"use strict";(self.webpackChunkpoc_app=self.webpackChunkpoc_app||[]).push([[124],{8294:function(e,n,t){t.d(n,{N:function(){return o}});var r=t(7861),a=t(3549),i=t(5638),o=function(){var e=r.useCallback((function(e,n){return!!e.type.match(n)}),[]);return{readData:r.useCallback((function(e){var n=e.files,t=e.callbackSetData,r=e.callbackHandleError;try{var o=n[0];if(o){var s=o.type,u=new FileReader;u.addEventListener("load",(function(){var e=u.result,n="";s.match("application/json")?(0,a.V)(e)&&(n=e):n=s.match("text/tab-separated-values")||s.match("text/tsv")?JSON.stringify(i.tJ3(e)):s.match("text/comma-separated-values")||s.match("text/csv")?JSON.stringify(i.ueB(e)):e,t(n,o)})),u.removeEventListener("load",(function(){return null})),u.readAsText(o)}}catch(l){"function"===typeof r&&r(l)}}),[]),handleValidateAcceptType:e}}},8318:function(e,n,t){t.d(n,{Q:function(){return i}});var r=t(1413),a=JSON.parse('{"REMOTE_CONTROL_CONTROL_CENTRE":"Control Centre","REMOTE_CONTROL_DESK_LABEL_SETTING":"Setting","REMOTE_CONTROL_MV_SUPPLY_FAN":"Supply Fan","REMOTE_CONTROL_MV_EXHAUST_FAN":"Exhaust Fan","REMOTE_CONTROL_AIR_SYSTEM":"Air System","REMOTE_CONTROL_VRV_INDOOR_UNIT":"Indoor Unit","REMOTE_CONTROL_VRV_OUTDOOR_UNIT":"Outdoor Unit"}'),i=function(){return function(e){return(0,r.Z)({},a)[e]||e}}},843:function(e,n,t){t.r(n),t.d(n,{default:function(){return sn}});var r=t(7861),a=t(1001),i=t(630),o=t(3025),s=t(8832),u=t(1413),l=t(9439),c=t(4925),N=t(2807),E=t(7770),d=["tabPanes","onChangeTab"],R=["key","tab","children"],O=N.Z.TabPane,_=function(e){var n=e.tabPanes,t=e.onChangeTab,a=void 0===t?void 0:t,i=(0,c.Z)(e,d),o=r.useState(n[0].key),s=(0,l.Z)(o,2),_=s[0],m=s[1],I=r.useCallback((function(e){m(e),"function"===typeof a&&a(e)}),[a]);return(0,E.jsx)(N.Z,(0,u.Z)((0,u.Z)({defaultActiveKey:_,activeKey:_,onChange:I,destroyInactiveTabPane:!0},i),{},{children:n.map((function(e){var n=e.key,t=e.tab,r=e.children,a=(0,c.Z)(e,R),i=n===_;return(0,E.jsx)(O,(0,u.Z)((0,u.Z)({tab:(0,E.jsx)("div",{className:"".concat(i?"text-white font-medium":"text-gray-400"),children:t})},a),{},{children:r&&r}),n)}))}))},m=r.memo(_),I=t(5577),f=t(738),G=t(4472),C=["onSelectKey","treeData"],p=r.memo((function(e){var n=e.keys,t=e.node,r=n[0]===t.key;return(0,E.jsx)("div",{className:"".concat(r?"text-white font-medium":"text-gray-400"),children:t.title},t.key)})),x=function(e){var n=e.onSelectKey,t=e.treeData,a=void 0===t?[]:t,i=(0,c.Z)(e,C),o=r.useState([]),s=(0,l.Z)(o,2),N=s[0],d=s[1];return r.useEffect((function(){var e;d([null===(e=a[0])||void 0===e?void 0:e.key])}),[a]),(0,E.jsx)(f.Z,(0,u.Z)({defaultExpandAll:!1,onSelect:function(e){(null===e||void 0===e?void 0:e.length)>0&&(d(e),"function"===typeof n&&n(e))},titleRender:function(e){return(0,E.jsx)(p,{node:e,keys:N})},switcherIcon:(0,E.jsx)(G.Z,{className:"text-white"}),treeData:a,defaultSelectedKeys:N},i))},Z=r.memo(x),v=t(6618),T=t(474),S=t(9813),g=t(685),A=t(8076),j=t(190),y=t(4165),h=t(5861),b=t(4942),L=t(7684),M=t(4951),Y=t(874),D=t(9146),k=t(8294),U=function(e,n){var t=r.useState(e),a=(0,l.Z)(t,2),i=a[0],o=a[1];r.useEffect((function(){n&&o(e.map((function(e){var t=e.name;return(0,u.Z)((0,u.Z)({},e),{},{name:t,value:n[t]})})))}),[n]);var s=r.useMemo((function(){var e=function(e){return i.reduce((function(n,t){var r=(0,u.Z)({},n);return r[t.name]=t[e],r}),{})},n=function(){return e("value")},t=i.some((function(e){var n=e.value,t=e.errors,r=void 0===t?[]:t;return!n||(null===r||void 0===r?void 0:r.length)>0}));return{getFieldValue:function(e){return n()[e]},getFieldsValue:n,getFieldError:function(e){return n()[e]},getFieldsError:function(){return e("errors")},disabled:t}}),[i]);return(0,u.Z)({formFields:i,setFormFields:o},s)},F=t(9373),K=t(4888),P=t(7212),V="GeoInfo_styles_formOperationGeojson__6ELRT",w=function(e){var n=e.isCreate,t=e.form,r=t.formFields,a=t.setFormFields,i=e.setGeojsonCountry,o=F.Z.useForm(),s=(0,l.Z)(o,1)[0],u=(0,k.N)(),c=u.readData,N=u.handleValidateAcceptType;return(0,E.jsxs)(F.Z,{form:s,name:"form-operation-geojson",fields:r,onFieldsChange:function(e,n){return a(n)},className:V,children:[(0,E.jsx)(F.Z.Item,{label:I.GEOJSON_INFO_RECORD_COLUMN[I.GEOJSON_INFO_COUNTRY],name:I.GEOJSON_INFO_COUNTRY,rules:[{required:!0,message:"Please input country's name!"}],children:(0,E.jsx)(K.Z,{disabled:!n})}),(0,E.jsx)(F.Z.Item,{label:I.GEOJSON_INFO_RECORD_COLUMN[I.GEOJSON_INFO_DATA],name:I.GEOJSON_INFO_DATA,rules:[{required:!0,message:"Please select a json file!"}],valuePropName:"fileList",getValueFromEvent:function(e){return e.fileList},children:(0,E.jsxs)(P.Z.Dragger,{className:"antd-dragger bg-primary-100",beforeUpload:function(e,n){return N(e,"application/json")?(c({files:n,callbackSetData:function(e){var n=JSON.parse(e);i(n)}}),!1):P.Z.LIST_IGNORE},multiple:!1,maxCount:1,accept:"application/json",children:[(0,E.jsx)("p",{className:"ant-upload-drag-icon",children:(0,E.jsx)(L.Z,{})}),(0,E.jsx)("p",{className:"ant-upload-text text-white",children:"Click or drag file to this area to upload"}),(0,E.jsxs)("p",{className:"ant-upload-hint text-gray-500",children:["Support for a single or bulk upload. Strictly prohibit",(0,E.jsx)("br",{}),"from uploading company data or other band files"]})]})})]})},B=function(e){var n=e.isCreate,t=r.useState(!1),a=(0,l.Z)(t,2),i=a[0],s=a[1],u=(0,I.useMutationOperationGeojsonMapOfACountry)({isCreate:n}),c=(0,I.useSelectedCountry)().country.country,N=r.useState({}),d=(0,l.Z)(N,2),R=d[0],O=d[1],_=r.useMemo((function(){return n&&c?void 0:(0,b.Z)({},I.GEOJSON_INFO_COUNTRY,c)}),[c,n]),m=U([{name:I.GEOJSON_INFO_COUNTRY,value:""},{name:I.GEOJSON_INFO_DATA,value:""}],_),f=m.disabled,G=m.getFieldsValue,C=r.useCallback((0,h.Z)((0,y.Z)().mark((function e(){var n,t;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f){e.next=3;break}return e.abrupt("return");case 3:return t=G(),e.next=6,u.mutateAsync((n={},(0,b.Z)(n,I.GEOJSON_INFO_COUNTRY,t[I.GEOJSON_INFO_COUNTRY]),(0,b.Z)(n,I.GEOJSON_INFO_DATA,R),n));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[f,G,R]);return(0,E.jsxs)(o.Z,{children:[(0,E.jsx)(g.Z,{type:"primary",className:"flex items-center",icon:n?(0,E.jsx)(M.Z,{}):(0,E.jsx)(Y.Z,{}),onClick:function(){return s(!0)},children:n?"Add new":"Upload geojson"}),(0,E.jsx)(D.n9,{title:"Form",visible:i,onCancel:function(){return s(!1)},okButtonProps:{disabled:f},onOk:(0,h.Z)((0,y.Z)().mark((function e(){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:s(!1);case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,children:(0,E.jsx)(w,{isCreate:n,form:m,setGeojsonCountry:O})})]})},J=r.memo(B),Q=function(){var e=(0,I.useGeojsonRegions)(),n=e.geojsonRegions,t=e.isLoading,r=(0,I.useSelectedCountry)().country,a=r.actived,i=r.id,o=(0,I.useMutationUpdateActiveCountry)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(S.Z,{children:[(0,E.jsx)(J,{isCreate:!1}),(0,E.jsx)(g.Z,{type:"primary",loading:o.isLoading,onClick:function(){return o.mutate(i)},className:"bg-green flex items-center ".concat(a?"ant-btn-actived":""),icon:(0,E.jsx)(v.Z,{}),children:a?"Actived":"Active"})]}),t?(0,E.jsx)(A.Z,{className:"mt-4"}):(0,E.jsx)(j.Lp,{data:{hierachy:n,width:"auto",height:480},classNameContainer:"z-1"})]})},q=r.memo(Q),W=t(3433),z=t(3370),H=t(6280),$=t(3026),X=t(1810),ee=["dataSource","columns","onEditRecord","onRemoveRecord","hasOperationColumn"],ne=function(e){var n=e.dataSource,t=e.columns,a=void 0===t?[]:t,o=e.onEditRecord,s=e.onRemoveRecord,l=e.hasOperationColumn,N=(0,c.Z)(e,ee),d=r.useMemo((function(){return[].concat((0,W.Z)(a),[{title:"",key:"operation",render:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,E.jsxs)(S.Z,{children:["function"===typeof o&&(0,E.jsx)(z.Z,{onClick:function(){return o.apply(void 0,n)}}),"function"===typeof s&&(0,E.jsx)(i.Z,{title:"Are you sure to remove this record?",onConfirm:function(){return s.apply(void 0,n)},children:(0,E.jsx)(T.Z,{})})]})},fixed:"right"}])}),[a,l,o,s]),R=r.useCallback((function(e){return(0,E.jsxs)("div",{className:"text-xs font-medium absolute left-0 ",children:["Total: ",e]})}),[n]),O=r.useCallback((function(e,n){switch(n){case"page":return e;case"next":return(0,E.jsx)(H.Z,{});case"prev":return(0,E.jsx)($.Z,{});case"jump-next":case"jump-prev":return(0,E.jsx)(E.Fragment,{children:"..."})}return(0,E.jsx)("div",{children:e})}),[n]);return(0,E.jsx)(X.Z,(0,u.Z)({size:"small",pagination:{position:["none","bottomCenter"],showTotal:R,itemRender:O},columns:l?d:a,dataSource:n},N))};ne.defaultProps={onEditRecord:void 0,onRemoveRecord:void 0,hasOperationColumn:!1};var te=r.memo(ne),re=t(4882),ae=t(3926),ie=t(2958),oe={modalOperationRegion:{isVisible:!1,isCreate:!1,region:void 0},units:(0,b.Z)({},I.REGION_ENERGY_CONSUMPTION,"baseWatt")},se=(0,ie.M)((function(e,n){return(0,u.Z)((0,u.Z)({},oe),{},{setModalOperationRegion:function(t){var r=t.isVisible;e(r?{modalOperationRegion:(0,u.Z)((0,u.Z)({},n().modalOperationRegion),t)}:{modalOperationRegion:(0,u.Z)({},oe.modalOperationRegion)})},setUnitsOperationRegion:function(t,r){var a=n().units;e({units:(0,u.Z)((0,u.Z)({},a),{},(0,b.Z)({},t,r))})},resetStore:function(){return e((0,u.Z)({},oe))}})}),"ConfigurationStore"),ue=(0,l.Z)(se,2),le=ue[0],ce=ue[1],Ne=(ce.getState,ce.destroy,function(e){var n=le(),t=n.units,r=n.setUnitsOperationRegion;return{selectedUnit:t[e],setUnitsOperationRegion:r}}),Ee=t(8259),de=t(5228),Re=t.n(de),Oe=t(3557),_e=t.n(Oe),me={required:!0,message:"Required"},Ie={message:"Please enter a valid number",validator:function(e,n){var t=Re()(n);return _e()(t)?Promise.reject(e.message):Promise.resolve(n)}},fe={message:"Number has to > 0",validator:function(e,n){var t=Re()(n);return _e()(t)||t>0||!n?Promise.resolve(n):Promise.reject(e.message)}},Ge=t(8318),Ce=function(){var e=(0,Ge.Q)();return r.useMemo((function(){return{validator:[me,Ie,fe]}}),[e])},pe="Region_styles_formOperationRegion__+PKaB",xe=Ee.Z.Option,Ze=function(e){var n=e.form,t=n.getFieldValue,r=n.formFields,i=n.setFormFields,o=e.isCreate,s=e.region,u=F.Z.useForm(),c=(0,l.Z)(u,1)[0],N=le().modalOperationRegion.isVisible,d=!o&&s&&N,R=Ce().validator,O=Ne(I.REGION_ENERGY_CONSUMPTION),_=O.selectedUnit,m=O.setUnitsOperationRegion,f=t(I.REGION_ENERGY_CONSUMPTION),G=(0,ae.$e)({value:f,unit:_});return(0,E.jsxs)(F.Z,{form:c,name:"form-operation-geojson",fields:r,onFieldsChange:function(e,n){return i(n)},className:"form-operation-region ".concat(pe),children:[(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_NAME],name:I.REGION_NAME,children:(0,E.jsx)(K.Z,{disabled:!o})}),(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_ENERGY_CONSUMPTION],name:I.REGION_ENERGY_CONSUMPTION,rules:R,children:(0,E.jsxs)(S.Z,{children:[(0,E.jsx)(K.Z,{defaultValue:d?s[I.REGION_ENERGY_CONSUMPTION]:"",className:"ant-input-number"}),(0,E.jsx)(a.Z,{title:"Equivalent ".concat((0,ae.dc)({value:G,divide:1})," ").concat(ae.Cr.baseWatt),children:(0,E.jsx)(Ee.Z,{defaultValue:_,onChange:function(e){return m(I.REGION_ENERGY_CONSUMPTION,e)},className:"w-[70px]",children:Object.entries(ae.Cr).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,E.jsx)(xe,{value:t,children:r},t)}))})})]})}),(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_ENERGY_DENSITY_CONSUMPTION],name:I.REGION_ENERGY_DENSITY_CONSUMPTION,rules:R,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})}),(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_OPEN_TICKETS],name:I.REGION_OPEN_TICKETS,rules:R,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})}),(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_ALERT_TICKETS],name:I.REGION_ALERT_TICKETS,rules:R,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})}),(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_BUILDINGS],name:I.REGION_BUILDINGS,rules:R,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})}),(0,E.jsx)(F.Z.Item,{label:I.REGION_RECORD_COLUMN[I.REGION_FLOOR_AREA],name:I.REGION_FLOOR_AREA,rules:R,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})})]})};Ze.defaultProps={region:void 0};var ve=r.memo(Ze),Te=function(){var e=le(),n=e.modalOperationRegion,t=n.isCreate,a=n.region,i=n.isVisible,o=e.setModalOperationRegion,s=Ne(I.REGION_ENERGY_CONSUMPTION).selectedUnit,u=(0,I.useMutationOperationRegion)({isCreate:t}),l=U([{name:I.REGION_NAME,value:""},{name:I.REGION_ENERGY_CONSUMPTION,value:""},{name:I.REGION_ENERGY_DENSITY_CONSUMPTION,value:""},{name:I.REGION_OPEN_TICKETS,value:""},{name:I.REGION_ALERT_TICKETS,value:""},{name:I.REGION_BUILDINGS,value:""},{name:I.REGION_FLOOR_AREA,value:""}],a),c=l.disabled,N=l.getFieldsValue,d=r.useCallback((0,h.Z)((0,y.Z)().mark((function e(){var n,t,r,a;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=3;break}return e.abrupt("return");case 3:return t=N(),r=t[I.REGION_ENERGY_CONSUMPTION],a=(0,ae.$e)({value:r,unit:s}),e.next=8,u.mutateAsync({region:t[I.REGION_NAME],info:(n={},(0,b.Z)(n,I.REGION_ENERGY_CONSUMPTION,a),(0,b.Z)(n,I.REGION_ENERGY_DENSITY_CONSUMPTION,t[I.REGION_ENERGY_DENSITY_CONSUMPTION]),(0,b.Z)(n,I.REGION_OPEN_TICKETS,t[I.REGION_OPEN_TICKETS]),(0,b.Z)(n,I.REGION_ALERT_TICKETS,t[I.REGION_ALERT_TICKETS]),(0,b.Z)(n,I.REGION_BUILDINGS,t[I.REGION_BUILDINGS]),(0,b.Z)(n,I.REGION_FLOOR_AREA,t[I.REGION_FLOOR_AREA]),n)});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])}))),[c,s]);return(0,E.jsx)(D.n9,{title:"Form",visible:i,onCancel:function(){return o({isVisible:!1,isCreate:t})},okButtonProps:{disabled:c},onOk:(0,h.Z)((0,y.Z)().mark((function e(){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:o({isVisible:!1,isCreate:t});case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,destroyOnClose:!0,children:(0,E.jsx)(ve,{isCreate:t,region:a,form:l})})},Se=r.memo(Te),ge=function(){var e=le().setModalOperationRegion,n=(0,re.useQueryClient)(),t=(0,I.useSelectedCountry)().country.country,r=(0,I.useRegionListData)(),a=r.regionList,i=r.isLoading,o=(0,I.useMutationAutoGenerateRegion)(),s=(0,I.useMutationDeleteRegion)(),l=[{title:I.REGION_RECORD_COLUMN[I.REGION_NAME],dataIndex:I.REGION_NAME,key:I.REGION_NAME,render:function(e){return e},fixed:"left"},{title:I.REGION_RECORD_COLUMN[I.REGION_COORDINATES],dataIndex:I.REGION_COORDINATES,key:I.REGION_COORDINATES,render:function(e){return e},ellipsis:!0,width:200},{title:I.REGION_RECORD_COLUMN[I.REGION_ENERGY_CONSUMPTION],dataIndex:I.REGION_ENERGY_CONSUMPTION,key:I.REGION_ENERGY_CONSUMPTION,render:function(e){return(0,I.formatterValueToLocaleString)({value:e,divide:1})},sorter:function(e,n){return n[I.REGION_ENERGY_CONSUMPTION]-e[I.REGION_ENERGY_CONSUMPTION]},sortDirections:["ascend","descend"],defaultSortOrder:"descend"},{title:I.REGION_RECORD_COLUMN[I.REGION_ENERGY_DENSITY_CONSUMPTION],dataIndex:I.REGION_ENERGY_DENSITY_CONSUMPTION,key:I.REGION_ENERGY_DENSITY_CONSUMPTION,render:function(e){return e}},{title:I.REGION_RECORD_COLUMN[I.REGION_OPEN_TICKETS],dataIndex:I.REGION_OPEN_TICKETS,key:I.REGION_OPEN_TICKETS,render:function(e){return e}},{title:I.REGION_RECORD_COLUMN[I.REGION_ALERT_TICKETS],dataIndex:I.REGION_ALERT_TICKETS,key:I.REGION_ALERT_TICKETS,render:function(e){return e}},{title:I.REGION_RECORD_COLUMN[I.REGION_BUILDINGS],dataIndex:I.REGION_BUILDINGS,key:I.REGION_BUILDINGS,render:function(e){return e}},{title:I.REGION_RECORD_COLUMN[I.REGION_FLOOR_AREA],dataIndex:I.REGION_FLOOR_AREA,key:I.REGION_FLOOR_AREA,render:function(e){return e}}];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(S.Z,{className:"mb-5",children:[(0,E.jsx)(g.Z,{className:"flex items-center",type:"primary",icon:(0,E.jsx)(M.Z,{}),disabled:!0,children:"Add"}),(0,E.jsx)(g.Z,{type:"primary",icon:(0,E.jsx)(M.Z,{}),onClick:function(){return o.mutate()},loading:o.isLoading,className:"flex items-center",children:"Auto fill"})]}),(0,E.jsx)(te,{dataSource:a.map((function(e){return(0,u.Z)((0,u.Z)({},e),{},{key:e.id})})),columns:l,loading:i,scroll:{x:1150},hasOperationColumn:!0,onEditRecord:function(n,t){return e({isVisible:!0,isCreate:!1,region:t})},onRemoveRecord:function(e,r){var a=["region-details",r.regionname,t];n.setQueryData(a,(function(e){return(0,u.Z)((0,u.Z)({},e),{},{data:void 0})})),s.mutate(r.id)}}),(0,E.jsx)(Se,{})]})},Ae=r.memo(ge),je=t(8679),ye={units:(0,b.Z)({},I.REGION_ENERGY_CONSUMPTION,"baseWatt"),modalOperationEnergyRanking:{isVisible:!1,isCreate:!1,resource:void 0}},he=(0,ie.M)((function(e,n){return(0,u.Z)((0,u.Z)({},ye),{},{setModalOperationEnergyRanking:function(t){var r=t.isVisible;e(r?{modalOperationEnergyRanking:(0,u.Z)((0,u.Z)({},n().modalOperationEnergyRanking),t)}:{modalOperationEnergyRanking:(0,u.Z)({},ye.modalOperationEnergyRanking)})},resetStore:function(){return e((0,u.Z)({},ye))}})}),"ConfigurationStore"),be=(0,l.Z)(he,2),Le=be[0],Me=be[1],Ye=(Me.getState,Me.destroy,function(e){var n=e.form,t=n.formFields,r=n.setFormFields,a=F.Z.useForm(),i=(0,l.Z)(a,1)[0],o=Le().modalOperationEnergyRanking.isCreate,s=Ce().validator;return(0,E.jsxs)(F.Z,{form:i,name:"form-operation-geojson",fields:t,onFieldsChange:function(e,n){return r(n)},className:"form-operation-region ".concat(pe),children:[(0,E.jsx)(F.Z.Item,{label:I.ENERGY_RANKING_RECORD_COLUMN[I.ENERGY_RANKING_BUILDING_NAME],name:I.ENERGY_RANKING_BUILDING_NAME,children:(0,E.jsx)(K.Z,{disabled:!o})}),(0,E.jsx)(F.Z.Item,{label:I.ENERGY_RANKING_RECORD_COLUMN[I.ENERGY_RANKING_ENERGY],name:I.ENERGY_RANKING_ENERGY,rules:s,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})}),(0,E.jsx)(F.Z.Item,{label:I.ENERGY_RANKING_RECORD_COLUMN[I.ENERGY_RANKING_ENERGY_DENSITY],name:I.ENERGY_RANKING_ENERGY_DENSITY,rules:s,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})})]})}),De=r.memo(Ye),ke=function(){var e=(0,I.useSelectedCountry)().country.country,n=Le(),t=n.modalOperationEnergyRanking,a=t.isCreate,i=t.resource,o=t.isVisible,s=n.setModalOperationEnergyRanking,u=(0,I.useMutationOperationEnergyRanking)(e),l=U([{name:I.ENERGY_RANKING_BUILDING_NAME,value:""},{name:I.ENERGY_RANKING_ENERGY,value:""},{name:I.ENERGY_RANKING_ENERGY_DENSITY,value:""}],i),c=l.disabled,N=l.getFieldsValue,d=r.useCallback((0,h.Z)((0,y.Z)().mark((function e(){var n,t;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=3;break}return e.abrupt("return");case 3:return t=N(),e.next=6,u.mutateAsync({buildingname:t[I.ENERGY_RANKING_BUILDING_NAME],info:(n={},(0,b.Z)(n,I.ENERGY_RANKING_ENERGY,t[I.ENERGY_RANKING_ENERGY]),(0,b.Z)(n,I.ENERGY_RANKING_ENERGY_DENSITY,t[I.ENERGY_RANKING_ENERGY_DENSITY]),n)});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[l]);return(0,E.jsx)(D.n9,{title:"Form",visible:o,onCancel:function(){return s({isVisible:!1,isCreate:a})},okButtonProps:{disabled:c},onOk:(0,h.Z)((0,y.Z)().mark((function e(){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:s({isVisible:!1,isCreate:a});case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,destroyOnClose:!0,children:(0,E.jsx)(De,{form:l})})},Ue=r.memo(ke),Fe=r.memo((function(){var e=(0,I.useSelectedCountry)().country.country,n=(0,re.useQueryClient)(),t=Le().setModalOperationEnergyRanking,r=(0,I.useQueryEnergyRanking)(e),a=r.data,i=void 0===a?[]:a,o=r.isLoading,s=(0,I.useMutationDeleteEnergyRanking)(e),l=[{title:I.ENERGY_RANKING_RECORD_COLUMN[I.ENERGY_RANKING_BUILDING_NAME],dataIndex:I.ENERGY_RANKING_BUILDING_NAME,key:I.ENERGY_RANKING_BUILDING_NAME},{title:I.ENERGY_RANKING_RECORD_COLUMN[I.ENERGY_RANKING_ENERGY],dataIndex:I.ENERGY_RANKING_ENERGY,key:I.ENERGY_RANKING_ENERGY,render:function(e){return(0,I.formatterValueToLocaleString)({value:e,divide:1})},sorter:function(e,n){return n[I.ENERGY_RANKING_ENERGY]-e[I.ENERGY_RANKING_ENERGY]},sortDirections:["ascend","descend"],defaultSortOrder:"descend"},{title:I.ENERGY_RANKING_RECORD_COLUMN[I.ENERGY_RANKING_ENERGY_DENSITY],dataIndex:I.ENERGY_RANKING_ENERGY_DENSITY,key:I.ENERGY_RANKING_ENERGY_DENSITY,render:function(e){return(0,I.formatterValueToLocaleString)({value:e,divide:1})},sorter:function(e,n){return n[I.ENERGY_RANKING_ENERGY_DENSITY]-e[I.ENERGY_RANKING_ENERGY_DENSITY]},sortDirections:["ascend","descend"],defaultSortOrder:"descend"}];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(g.Z,{type:"primary",onClick:function(){return t({isVisible:!0,isCreate:!0})},className:"mb-3",children:"New Record"}),(0,E.jsx)(te,{dataSource:i.map((function(e){return(0,u.Z)((0,u.Z)({},e),{},{key:e.id})})),columns:l,loading:o,hasOperationColumn:!0,onEditRecord:function(e,n){return t({isVisible:!0,resource:n,isCreate:!1})},onRemoveRecord:function(t,r){var a=["energy-ranking-".concat(e)];n.setQueryData(a,(function(e){return e&&e.filter((function(e){return e.id!==r.id}))})),s.mutate(r.id)}}),(0,E.jsx)(Ue,{})]})})),Ke=r.memo(Fe),Pe=t(5225),Ve=t(4601),we={modalOperation:{isVisible:!1,isCreate:!1,resource:void 0}},Be=(0,ie.M)((function(e,n){return(0,u.Z)((0,u.Z)({},we),{},{setModalOperation:function(t){var r=t.isVisible;e(r?{modalOperation:(0,u.Z)((0,u.Z)({},n().modalOperation),t)}:{modalOperation:(0,u.Z)({},we.modalOperation)})}})}),"AlertsAndTicketsConfigurationStore"),Je=(0,l.Z)(Be,2),Qe=Je[0],qe=Je[1],We=(qe.getState,qe.destroy,"AlertsAndTickets_styles_formOperation__tgurG"),ze=function(e){var n=e.form,t=n.formFields,a=n.setFormFields,i=F.Z.useForm(),u=(0,l.Z)(i,1)[0],c=Ce().validator,N=function(){var e=(0,Ge.Q)();return r.useMemo((function(){return{validator:[me]}}),[e])}().validator;return(0,E.jsxs)(F.Z,{form:u,name:"form-operation-geojson",fields:t,onFieldsChange:function(e,n){return a(n)},className:"form-operation-region ".concat(We),children:[(0,E.jsxs)(o.Z,{gutter:32,children:[(0,E.jsx)(s.Z,{span:12,children:(0,E.jsx)(F.Z.Item,{label:I.ALERT_AND_TICKETS_RECORD_COLUMN[I.ALERTS],name:I.ALERTS,rules:c,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})})}),(0,E.jsx)(s.Z,{span:12,children:(0,E.jsx)(F.Z.Item,{label:I.ALERT_AND_TICKETS_RECORD_COLUMN[I.DISPLAY_NAME],name:I.ALERTS_DISPLAY_NAME,rules:N,children:(0,E.jsx)(K.Z,{})})})]}),(0,E.jsxs)(o.Z,{gutter:32,children:[(0,E.jsx)(s.Z,{span:12,children:(0,E.jsx)(F.Z.Item,{label:I.ALERT_AND_TICKETS_RECORD_COLUMN[I.TICKETS],name:I.TICKETS,rules:c,children:(0,E.jsx)(K.Z,{className:"ant-input-number"})})}),(0,E.jsx)(s.Z,{span:12,children:(0,E.jsx)(F.Z.Item,{label:I.ALERT_AND_TICKETS_RECORD_COLUMN[I.DISPLAY_NAME],name:I.TICKETS_DISPLAY_NAME,rules:N,children:(0,E.jsx)(K.Z,{})})})]})]})},He=r.memo(ze),$e=function(){var e=(0,I.useSelectedCountry)().country.country,n=Qe(),t=n.modalOperation,a=t.isCreate,i=t.resource,o=t.isVisible,s=n.setModalOperation,u=(0,I.useMutationAlertsAndTickets)(e),l=U([{name:I.ALERTS,value:""},{name:I.TICKETS,value:""},{name:I.ALERTS_DISPLAY_NAME,value:""},{name:I.TICKETS_DISPLAY_NAME,value:""}],i),c=l.disabled,N=l.getFieldsValue,d=r.useCallback((0,h.Z)((0,y.Z)().mark((function e(){var n,t;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=3;break}return e.abrupt("return");case 3:return t=N(),e.next=6,u.mutateAsync((n={},(0,b.Z)(n,I.ALERTS,t[I.ALERTS]),(0,b.Z)(n,I.ALERTS_DISPLAY_NAME,t[I.ALERTS_DISPLAY_NAME]),(0,b.Z)(n,I.TICKETS,t[I.TICKETS]),(0,b.Z)(n,I.TICKETS_DISPLAY_NAME,t[I.TICKETS_DISPLAY_NAME]),n));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[l]);return(0,E.jsx)(D.n9,{title:"Form",visible:o,onCancel:function(){return s({isVisible:!1,isCreate:a})},okButtonProps:{disabled:c},onOk:(0,h.Z)((0,y.Z)().mark((function e(){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:s({isVisible:!1,isCreate:a});case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,destroyOnClose:!0,children:(0,E.jsx)(He,{form:l})})},Xe=r.memo($e),en=function(){var e=(0,I.useSelectedCountry)().country.country,n=(0,I.useQueryAlertsAndTicketsData)(e),t=n.alertsFormatted,r=n.ticketsFormatted,a=n.alertsDisplayName,i=n.ticketsDisplayName,u=n.resource,l=Qe().setModalOperation;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(g.Z,{type:"primary",className:"mb-3",onClick:function(){return l({isVisible:!0,resource:u,isCreate:!!u})},children:"Operation"}),(0,E.jsxs)(o.Z,{gutter:16,children:[(0,E.jsx)(s.Z,{span:12,children:(0,E.jsx)(Pe.Z,{children:(0,E.jsx)(Ve.Z,{title:a,className:"truncate",value:t})})}),(0,E.jsx)(s.Z,{span:12,children:(0,E.jsx)(Pe.Z,{children:(0,E.jsx)(Ve.Z,{title:i,className:"truncate",value:r})})})]}),(0,E.jsx)(Xe,{})]})},nn=r.memo(en),tn=function(){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(nn,{}),(0,E.jsx)(je.Z,{plain:!0}),(0,E.jsx)(Ke,{})]})},rn=r.memo(tn),an=r.memo((function(){var e=(0,I.useCountryStatusList)().data,n=void 0===e?[]:e,t=(0,I.useMutationDeleteCountry)(),o=(0,I.useMapStore)(),s=o.country,u=o.actionSetSelectedCountry,l=r.useMemo((function(){return(null===n||void 0===n?void 0:n.map((function(e){var n=e.id;return{title:e.country,key:n}})))||[]}),[n]),c=r.useCallback((function(e){var r,o=e.key===s,u=null===(r=n.find((function(n){return n.id===e.key})))||void 0===r?void 0:r.actived;return(0,E.jsxs)("div",{className:"ant-tree-title-container grid gap-2 items-center h-8 px-2 ".concat(o?"bg-primary-1000":"transparent"),style:{gridTemplateColumns:"2fr 24px 24px"},children:[(0,E.jsx)("div",{className:"ant-tree-title-text cursor-pointer truncate text-sm ".concat(o?"text-white font-medium":"text-gray-400"),children:e.title}),u?(0,E.jsx)(a.Z,{title:"Country actived",children:(0,E.jsx)(v.Z,{})}):(0,E.jsx)("span",{}),(0,E.jsx)(i.Z,{title:"Are you sure to delete this item?",onConfirm:function(){return t.mutate(e.key)},okText:"Yes",cancelText:"No",okButtonProps:{loading:t.isLoading},children:(0,E.jsx)(T.Z,{})})]},e.key)}),[s,t,n]);return(0,E.jsx)(Z,{treeData:l,onSelectKey:function(e){var n=e[0];u(n)},titleRender:c})})),on=function(){var e=r.useMemo((function(){return[{tab:"Geometry",key:"geometry",children:(0,E.jsx)(q,{})},{tab:"Region",key:"region",children:(0,E.jsx)(Ae,{})},{tab:"Data resource",key:"data_resource",children:(0,E.jsx)(rn,{})}]}),[]);return(0,E.jsxs)("div",{children:[(0,E.jsx)(J,{isCreate:!0}),(0,E.jsxs)(o.Z,{className:"mt-5",children:[(0,E.jsx)(s.Z,{span:6,className:"p-3 bg-primary-900 min-h-[600px] h-auto",children:(0,E.jsx)(an,{})}),(0,E.jsx)(s.Z,{span:18,className:"pl-5",children:(0,E.jsx)(m,{tabPanes:e})})]})]})},sn=r.memo(on)}}]);
//# sourceMappingURL=124.f39a3941.chunk.js.map
"use strict";(self.webpackChunkpoc_app=self.webpackChunkpoc_app||[]).push([[982],{1590:function(e,n,t){t.d(n,{N:function(){return o}});var r=t(2791),a=t(7187),i=t(5362),o=function(){var e=r.useCallback((function(e,n){return!!e.type.match(n)}),[]);return{readData:r.useCallback((function(e){var n=e.files,t=e.callbackSetData,r=e.callbackHandleError;try{var o=n[0];if(o){var s=o.type,u=new FileReader;u.addEventListener("load",(function(){var e=u.result,n="";s.match("application/json")?(0,a.V)(e)&&(n=e):n=s.match("text/tab-separated-values")||s.match("text/tsv")?JSON.stringify(i.tJ3(e)):s.match("text/comma-separated-values")||s.match("text/csv")?JSON.stringify(i.ueB(e)):e,t(n,o)})),u.removeEventListener("load",(function(){return null})),u.readAsText(o)}}catch(l){"function"===typeof r&&r(l)}}),[]),handleValidateAcceptType:e}}},241:function(e,n,t){t.d(n,{Q:function(){return i}});var r=t(1413),a=JSON.parse('{"REMOTE_CONTROL_CONTROL_CENTRE":"Control Centre","REMOTE_CONTROL_DESK_LABEL_SETTING":"Setting","REMOTE_CONTROL_MV_SUPPLY_FAN":"Supply Fan","REMOTE_CONTROL_MV_EXHAUST_FAN":"Exhaust Fan","REMOTE_CONTROL_AIR_SYSTEM":"Air System","REMOTE_CONTROL_VRV_INDOOR_UNIT":"Indoor Unit","REMOTE_CONTROL_VRV_OUTDOOR_UNIT":"Outdoor Unit"}'),i=function(){return function(e){return(0,r.Z)({},a)[e]||e}}},893:function(e,n,t){t.r(n),t.d(n,{default:function(){return nn}});var r=t(2791),a=t(6573),i=t(1520),o=t(6106),s=t(914),u=t(4816),l=t(3968),c=t(1413),N=t(9439),E=t(4925),d=t(6668),R=t(4848),O=t(184),_=["onSelectKey","treeData"],m=r.memo((function(e){var n=e.keys,t=e.node,r=n[0]===t.key;return(0,O.jsx)("div",{className:"".concat(r?"text-white font-medium":"text-gray-400"),children:t.title},t.key)})),I=function(e){var n=e.onSelectKey,t=e.treeData,a=void 0===t?[]:t,i=(0,E.Z)(e,_),o=r.useState([]),s=(0,N.Z)(o,2),u=s[0],l=s[1];return r.useEffect((function(){var e;l([null===(e=a[0])||void 0===e?void 0:e.key])}),[a]),(0,O.jsx)(d.Z,(0,c.Z)({defaultExpandAll:!1,onSelect:function(e){(null===e||void 0===e?void 0:e.length)>0&&(l(e),"function"===typeof n&&n(e))},titleRender:function(e){return(0,O.jsx)(m,{node:e,keys:u})},switcherIcon:(0,O.jsx)(R.Z,{className:"text-white"}),treeData:a,defaultSelectedKeys:u},i))},f=r.memo(I),G=t(8944),C=t(2622),p=t(3099),x=t(7309),Z=t(7504),T=t(150),v=t(4165),S=t(5861),g=t(4942),A=t(6776),j=t(9286),y=t(2351),h=t(1519),L=t(1590),M=function(e,n){var t=r.useState(e),a=(0,N.Z)(t,2),i=a[0],o=a[1];r.useEffect((function(){n&&o(e.map((function(e){var t=e.name;return(0,c.Z)((0,c.Z)({},e),{},{name:t,value:n[t]})})))}),[n]);var s=r.useMemo((function(){var e=function(e){return i.reduce((function(n,t){var r=(0,c.Z)({},n);return r[t.name]=t[e],r}),{})},n=function(){return e("value")},t=i.some((function(e){var n=e.value,t=e.errors,r=void 0===t?[]:t;return!n||(null===r||void 0===r?void 0:r.length)>0}));return{getFieldValue:function(e){return n()[e]},getFieldsValue:n,getFieldError:function(e){return n()[e]},getFieldsError:function(){return e("errors")},disabled:t}}),[i]);return(0,c.Z)({formFields:i,setFormFields:o},s)},Y=t(1095),b=t(8678),D=t(4941),k=t(2075),U=function(e){var n=e.isCreate,t=e.form,r=t.formFields,a=t.setFormFields,i=e.setGeojsonCountry,o=Y.Z.useForm(),s=(0,N.Z)(o,1)[0],u=(0,L.N)(),c=u.readData,E=u.handleValidateAcceptType;return(0,O.jsx)(k.Z,{children:(0,O.jsxs)(Y.Z,{form:s,name:"form-operation-geojson",fields:r,onFieldsChange:function(e,n){return a(n)},children:[(0,O.jsx)(Y.Z.Item,{label:l.GEOJSON_INFO_RECORD_COLUMN[l.GEOJSON_INFO_COUNTRY],name:l.GEOJSON_INFO_COUNTRY,rules:[{required:!0,message:"Please input country's name!"}],children:(0,O.jsx)(b.Z,{disabled:!n})}),(0,O.jsx)(Y.Z.Item,{label:l.GEOJSON_INFO_RECORD_COLUMN[l.GEOJSON_INFO_DATA],children:(0,O.jsxs)(D.Z.Dragger,{className:"antd-dragger bg-primary-100",beforeUpload:function(e,n){return E(e,"application/json")?(c({files:n,callbackSetData:function(e){var n=JSON.parse(e);i(n)}}),!1):D.Z.LIST_IGNORE},multiple:!1,maxCount:1,accept:"application/json",children:[(0,O.jsx)("p",{className:"ant-upload-drag-icon",children:(0,O.jsx)(A.Z,{})}),(0,O.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,O.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]})})]})})},F=function(e){var n=e.isCreate,t=r.useState(!1),a=(0,N.Z)(t,2),i=a[0],s=a[1],u=(0,l.useMutationOperationGeojsonMapOfACountry)({isCreate:n}),c=(0,l.useSelectedCountry)().country.country,E=r.useState({}),d=(0,N.Z)(E,2),R=d[0],_=d[1],m=r.useMemo((function(){return n&&c?void 0:(0,g.Z)({},l.GEOJSON_INFO_COUNTRY,c)}),[c,n]),I=M([{name:l.GEOJSON_INFO_COUNTRY,value:""},{name:l.GEOJSON_INFO_DATA,value:""}],m),f=I.disabled,G=I.getFieldsValue,C=r.useCallback((0,S.Z)((0,v.Z)().mark((function e(){var n,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f){e.next=3;break}return e.abrupt("return");case 3:return t=G(),e.next=6,u.mutateAsync((n={},(0,g.Z)(n,l.GEOJSON_INFO_COUNTRY,t[l.GEOJSON_INFO_COUNTRY]),(0,g.Z)(n,l.GEOJSON_INFO_DATA,R),n));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[f,G,R]);return(0,O.jsxs)(o.Z,{children:[(0,O.jsx)(x.Z,{type:"primary",className:"flex items-center",icon:n?(0,O.jsx)(j.Z,{}):(0,O.jsx)(y.Z,{}),onClick:function(){return s(!0)},children:n?"Add new":"Upload geojson"}),(0,O.jsx)(h.n9,{title:"Form",visible:i,onCancel:function(){return s(!1)},okButtonProps:{disabled:f},onOk:(0,S.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:s(!1);case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,children:(0,O.jsx)(U,{isCreate:n,form:I,setGeojsonCountry:_})})]})},K=r.memo(F),P=function(){var e=(0,l.useGeojsonRegions)(),n=e.geojsonRegions,t=e.isLoading,r=(0,l.useSelectedCountry)().country,a=r.actived,i=r.id,o=(0,l.useMutationUpdateActiveCountry)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(p.Z,{children:[(0,O.jsx)(K,{isCreate:!1}),(0,O.jsx)(x.Z,{type:"primary",loading:o.isLoading,onClick:function(){return o.mutate(i)},className:"bg-green flex items-center ".concat(a?"ant-btn-actived":""),icon:(0,O.jsx)(G.Z,{}),children:a?"Actived":"Active"})]}),t?(0,O.jsx)(Z.Z,{className:"mt-4"}):(0,O.jsx)(T.Lp,{data:{hierachy:n,width:"auto",height:480},classNameContainer:"z-1"})]})},V=r.memo(P),w=t(3433),B=t(1752),J=t(1938),Q=t(6864),q=t(1384),W=["dataSource","columns","onEditRecord","onRemoveRecord","hasOperationColumn"],z=function(e){var n=e.dataSource,t=e.columns,a=void 0===t?[]:t,o=e.onEditRecord,s=e.onRemoveRecord,u=e.hasOperationColumn,l=(0,E.Z)(e,W),N=r.useMemo((function(){return[].concat((0,w.Z)(a),[{title:"",key:"operation",render:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,O.jsxs)(p.Z,{children:["function"===typeof o&&(0,O.jsx)(B.Z,{onClick:function(){return o.apply(void 0,n)}}),"function"===typeof s&&(0,O.jsx)(i.Z,{title:"Are you sure to remove this record?",onConfirm:function(){return s.apply(void 0,n)},children:(0,O.jsx)(C.Z,{})})]})},fixed:"right"}])}),[a,u,o,s]),d=r.useCallback((function(e){return(0,O.jsxs)("div",{className:"text-xs font-medium absolute left-0 ",children:["Total: ",e]})}),[n]),R=r.useCallback((function(e,n){switch(n){case"page":return e;case"next":return(0,O.jsx)(J.Z,{});case"prev":return(0,O.jsx)(Q.Z,{});case"jump-next":case"jump-prev":return(0,O.jsx)(O.Fragment,{children:"..."})}return(0,O.jsx)("div",{children:e})}),[n]);return(0,O.jsx)(q.Z,(0,c.Z)({size:"small",pagination:{position:["none","bottomCenter"],showTotal:d,itemRender:R},columns:u?N:a,dataSource:n},l))};z.defaultProps={onEditRecord:void 0,onRemoveRecord:void 0,hasOperationColumn:!1};var H=r.memo(z),$=t(7408),X=t(6695),ee=t(1113),ne={modalOperationRegion:{isVisible:!1,isCreate:!1,region:void 0},units:(0,g.Z)({},l.REGION_ENERGY_CONSUMPTION,"baseWatt")},te=(0,ee.M)((function(e,n){return(0,c.Z)((0,c.Z)({},ne),{},{setModalOperationRegion:function(t){var r=t.isVisible;e(r?{modalOperationRegion:(0,c.Z)((0,c.Z)({},n().modalOperationRegion),t)}:{modalOperationRegion:(0,c.Z)({},ne.modalOperationRegion)})},setUnitsOperationRegion:function(t,r){var a=n().units;e({units:(0,c.Z)((0,c.Z)({},a),{},(0,g.Z)({},t,r))})},resetStore:function(){return e((0,c.Z)({},ne))}})}),"ConfigurationStore"),re=(0,N.Z)(te,2),ae=re[0],ie=re[1],oe=(ie.getState,ie.destroy,function(e){var n=ae(),t=n.units,r=n.setUnitsOperationRegion;return{selectedUnit:t[e],setUnitsOperationRegion:r}}),se=t(3734),ue=t(2582),le=t.n(ue),ce=t(2066),Ne=t.n(ce),Ee={required:!0,message:"Required"},de={message:"Please enter a valid number",validator:function(e,n){var t=le()(n);return Ne()(t)?Promise.reject(e.message):Promise.resolve(n)}},Re={message:"Number has to > 0",validator:function(e,n){var t=le()(n);return Ne()(t)||t>0||!n?Promise.resolve(n):Promise.reject(e.message)}},Oe=t(241),_e=function(){var e=(0,Oe.Q)();return r.useMemo((function(){return{validator:[Ee,de,Re]}}),[e])},me="Region_styles_formOperationRegion__+PKaB",Ie=se.Z.Option,fe=function(e){var n=e.form,t=n.getFieldValue,r=n.formFields,i=n.setFormFields,o=e.isCreate,s=e.region,u=Y.Z.useForm(),c=(0,N.Z)(u,1)[0],E=ae().modalOperationRegion.isVisible,d=!o&&s&&E,R=_e().validator,_=oe(l.REGION_ENERGY_CONSUMPTION),m=_.selectedUnit,I=_.setUnitsOperationRegion,f=t(l.REGION_ENERGY_CONSUMPTION),G=(0,X.$e)({value:f,unit:m});return(0,O.jsxs)(Y.Z,{form:c,name:"form-operation-geojson",fields:r,onFieldsChange:function(e,n){return i(n)},className:"form-operation-region ".concat(me),children:[(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_NAME],name:l.REGION_NAME,children:(0,O.jsx)(b.Z,{disabled:!o})}),(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_ENERGY_CONSUMPTION],name:l.REGION_ENERGY_CONSUMPTION,rules:R,children:(0,O.jsxs)(p.Z,{children:[(0,O.jsx)(b.Z,{defaultValue:d?s[l.REGION_ENERGY_CONSUMPTION]:"",className:"ant-input-number"}),(0,O.jsx)(a.Z,{title:"Equivalent ".concat((0,X.dc)({value:G,divide:1})," ").concat(X.Cr.baseWatt),children:(0,O.jsx)(se.Z,{defaultValue:m,onChange:function(e){return I(l.REGION_ENERGY_CONSUMPTION,e)},className:"w-[70px]",children:Object.entries(X.Cr).map((function(e){var n=(0,N.Z)(e,2),t=n[0],r=n[1];return(0,O.jsx)(Ie,{value:t,children:r},t)}))})})]})}),(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_ENERGY_DENSITY_CONSUMPTION],name:l.REGION_ENERGY_DENSITY_CONSUMPTION,rules:R,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})}),(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_OPEN_TICKETS],name:l.REGION_OPEN_TICKETS,rules:R,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})}),(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_ALERT_TICKETS],name:l.REGION_ALERT_TICKETS,rules:R,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})}),(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_BUILDINGS],name:l.REGION_BUILDINGS,rules:R,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})}),(0,O.jsx)(Y.Z.Item,{label:l.REGION_RECORD_COLUMN[l.REGION_FLOOR_AREA],name:l.REGION_FLOOR_AREA,rules:R,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})})]})};fe.defaultProps={region:void 0};var Ge=r.memo(fe),Ce=function(){var e=ae(),n=e.modalOperationRegion,t=n.isCreate,a=n.region,i=n.isVisible,o=e.setModalOperationRegion,s=oe(l.REGION_ENERGY_CONSUMPTION).selectedUnit,u=(0,l.useMutationOperationRegion)({isCreate:t}),c=M([{name:l.REGION_NAME,value:""},{name:l.REGION_ENERGY_CONSUMPTION,value:""},{name:l.REGION_ENERGY_DENSITY_CONSUMPTION,value:""},{name:l.REGION_OPEN_TICKETS,value:""},{name:l.REGION_ALERT_TICKETS,value:""},{name:l.REGION_BUILDINGS,value:""},{name:l.REGION_FLOOR_AREA,value:""}],a),N=c.disabled,E=c.getFieldsValue,d=r.useCallback((0,S.Z)((0,v.Z)().mark((function e(){var n,t,r,a;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!N){e.next=3;break}return e.abrupt("return");case 3:return t=E(),r=t[l.REGION_ENERGY_CONSUMPTION],a=(0,X.$e)({value:r,unit:s}),e.next=8,u.mutateAsync({region:t[l.REGION_NAME],info:(n={},(0,g.Z)(n,l.REGION_ENERGY_CONSUMPTION,a),(0,g.Z)(n,l.REGION_ENERGY_DENSITY_CONSUMPTION,t[l.REGION_ENERGY_DENSITY_CONSUMPTION]),(0,g.Z)(n,l.REGION_OPEN_TICKETS,t[l.REGION_OPEN_TICKETS]),(0,g.Z)(n,l.REGION_ALERT_TICKETS,t[l.REGION_ALERT_TICKETS]),(0,g.Z)(n,l.REGION_BUILDINGS,t[l.REGION_BUILDINGS]),(0,g.Z)(n,l.REGION_FLOOR_AREA,t[l.REGION_FLOOR_AREA]),n)});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])}))),[N,s]);return(0,O.jsx)(h.n9,{title:"Form",visible:i,onCancel:function(){return o({isVisible:!1,isCreate:t})},okButtonProps:{disabled:N},onOk:(0,S.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:o({isVisible:!1,isCreate:t});case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,destroyOnClose:!0,children:(0,O.jsx)(Ge,{isCreate:t,region:a,form:c})})},pe=r.memo(Ce),xe=function(){var e=ae().setModalOperationRegion,n=(0,$.useQueryClient)(),t=(0,l.useSelectedCountry)().country.country,r=(0,l.useRegionListData)(),a=r.regionList,i=r.isLoading,o=(0,l.useMutationAutoGenerateRegion)(),s=(0,l.useMutationDeleteRegion)(),u=[{title:l.REGION_RECORD_COLUMN[l.REGION_NAME],dataIndex:l.REGION_NAME,key:l.REGION_NAME,render:function(e){return e},fixed:"left"},{title:l.REGION_RECORD_COLUMN[l.REGION_COORDINATES],dataIndex:l.REGION_COORDINATES,key:l.REGION_COORDINATES,render:function(e){return e},ellipsis:!0,width:200},{title:l.REGION_RECORD_COLUMN[l.REGION_ENERGY_CONSUMPTION],dataIndex:l.REGION_ENERGY_CONSUMPTION,key:l.REGION_ENERGY_CONSUMPTION,render:function(e){return(0,l.formatterValueToLocaleString)({value:e,divide:1})},sorter:function(e,n){return n[l.REGION_ENERGY_CONSUMPTION]-e[l.REGION_ENERGY_CONSUMPTION]},sortDirections:["ascend","descend"],defaultSortOrder:"descend"},{title:l.REGION_RECORD_COLUMN[l.REGION_ENERGY_DENSITY_CONSUMPTION],dataIndex:l.REGION_ENERGY_DENSITY_CONSUMPTION,key:l.REGION_ENERGY_DENSITY_CONSUMPTION,render:function(e){return e}},{title:l.REGION_RECORD_COLUMN[l.REGION_OPEN_TICKETS],dataIndex:l.REGION_OPEN_TICKETS,key:l.REGION_OPEN_TICKETS,render:function(e){return e}},{title:l.REGION_RECORD_COLUMN[l.REGION_ALERT_TICKETS],dataIndex:l.REGION_ALERT_TICKETS,key:l.REGION_ALERT_TICKETS,render:function(e){return e}},{title:l.REGION_RECORD_COLUMN[l.REGION_BUILDINGS],dataIndex:l.REGION_BUILDINGS,key:l.REGION_BUILDINGS,render:function(e){return e}},{title:l.REGION_RECORD_COLUMN[l.REGION_FLOOR_AREA],dataIndex:l.REGION_FLOOR_AREA,key:l.REGION_FLOOR_AREA,render:function(e){return e}}];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(p.Z,{className:"mb-5",children:[(0,O.jsx)(x.Z,{className:"flex items-center",type:"primary",icon:(0,O.jsx)(j.Z,{}),disabled:!0,children:"Add"}),(0,O.jsx)(x.Z,{type:"primary",icon:(0,O.jsx)(j.Z,{}),onClick:function(){return o.mutate()},loading:o.isLoading,className:"flex items-center",children:"Auto fill"})]}),(0,O.jsx)(H,{dataSource:a.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{key:e.id})})),columns:u,loading:i,scroll:{x:1150},hasOperationColumn:!0,onEditRecord:function(n,t){return e({isVisible:!0,isCreate:!1,region:t})},onRemoveRecord:function(e,r){var a=["region-details",r.regionname,t];n.setQueryData(a,(function(e){return(0,c.Z)((0,c.Z)({},e),{},{data:void 0})})),s.mutate(r.id)}}),(0,O.jsx)(pe,{})]})},Ze=r.memo(xe),Te=t(1333),ve={units:(0,g.Z)({},l.REGION_ENERGY_CONSUMPTION,"baseWatt"),modalOperationEnergyRanking:{isVisible:!1,isCreate:!1,resource:void 0}},Se=(0,ee.M)((function(e,n){return(0,c.Z)((0,c.Z)({},ve),{},{setModalOperationEnergyRanking:function(t){var r=t.isVisible;e(r?{modalOperationEnergyRanking:(0,c.Z)((0,c.Z)({},n().modalOperationEnergyRanking),t)}:{modalOperationEnergyRanking:(0,c.Z)({},ve.modalOperationEnergyRanking)})},resetStore:function(){return e((0,c.Z)({},ve))}})}),"ConfigurationStore"),ge=(0,N.Z)(Se,2),Ae=ge[0],je=ge[1],ye=(je.getState,je.destroy,function(e){var n=e.form,t=n.formFields,r=n.setFormFields,a=Y.Z.useForm(),i=(0,N.Z)(a,1)[0],o=Ae().modalOperationEnergyRanking.isCreate,s=_e().validator;return(0,O.jsxs)(Y.Z,{form:i,name:"form-operation-geojson",fields:t,onFieldsChange:function(e,n){return r(n)},className:"form-operation-region ".concat(me),children:[(0,O.jsx)(Y.Z.Item,{label:l.ENERGY_RANKING_RECORD_COLUMN[l.ENERGY_RANKING_BUILDING_NAME],name:l.ENERGY_RANKING_BUILDING_NAME,children:(0,O.jsx)(b.Z,{disabled:!o})}),(0,O.jsx)(Y.Z.Item,{label:l.ENERGY_RANKING_RECORD_COLUMN[l.ENERGY_RANKING_ENERGY],name:l.ENERGY_RANKING_ENERGY,rules:s,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})}),(0,O.jsx)(Y.Z.Item,{label:l.ENERGY_RANKING_RECORD_COLUMN[l.ENERGY_RANKING_ENERGY_DENSITY],name:l.ENERGY_RANKING_ENERGY_DENSITY,rules:s,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})})]})}),he=r.memo(ye),Le=function(){var e=(0,l.useSelectedCountry)().country.country,n=Ae(),t=n.modalOperationEnergyRanking,a=t.isCreate,i=t.resource,o=t.isVisible,s=n.setModalOperationEnergyRanking,u=(0,l.useMutationOperationEnergyRanking)(e),c=M([{name:l.ENERGY_RANKING_BUILDING_NAME,value:""},{name:l.ENERGY_RANKING_ENERGY,value:""},{name:l.ENERGY_RANKING_ENERGY_DENSITY,value:""}],i),N=c.disabled,E=c.getFieldsValue,d=r.useCallback((0,S.Z)((0,v.Z)().mark((function e(){var n,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!N){e.next=3;break}return e.abrupt("return");case 3:return t=E(),e.next=6,u.mutateAsync({buildingname:t[l.ENERGY_RANKING_BUILDING_NAME],info:(n={},(0,g.Z)(n,l.ENERGY_RANKING_ENERGY,t[l.ENERGY_RANKING_ENERGY]),(0,g.Z)(n,l.ENERGY_RANKING_ENERGY_DENSITY,t[l.ENERGY_RANKING_ENERGY_DENSITY]),n)});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[c]);return(0,O.jsx)(h.n9,{title:"Form",visible:o,onCancel:function(){return s({isVisible:!1,isCreate:a})},okButtonProps:{disabled:N},onOk:(0,S.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:s({isVisible:!1,isCreate:a});case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,destroyOnClose:!0,children:(0,O.jsx)(he,{form:c})})},Me=r.memo(Le),Ye=r.memo((function(){var e=(0,l.useSelectedCountry)().country.country,n=(0,$.useQueryClient)(),t=Ae().setModalOperationEnergyRanking,r=(0,l.useQueryEnergyRanking)(e),a=r.data,i=void 0===a?[]:a,o=r.isLoading,s=(0,l.useMutationDeleteEnergyRanking)(e),u=[{title:l.ENERGY_RANKING_RECORD_COLUMN[l.ENERGY_RANKING_BUILDING_NAME],dataIndex:l.ENERGY_RANKING_BUILDING_NAME,key:l.ENERGY_RANKING_BUILDING_NAME},{title:l.ENERGY_RANKING_RECORD_COLUMN[l.ENERGY_RANKING_ENERGY],dataIndex:l.ENERGY_RANKING_ENERGY,key:l.ENERGY_RANKING_ENERGY,render:function(e){return(0,l.formatterValueToLocaleString)({value:e,divide:1})},sorter:function(e,n){return n[l.ENERGY_RANKING_ENERGY]-e[l.ENERGY_RANKING_ENERGY]},sortDirections:["ascend","descend"],defaultSortOrder:"descend"},{title:l.ENERGY_RANKING_RECORD_COLUMN[l.ENERGY_RANKING_ENERGY_DENSITY],dataIndex:l.ENERGY_RANKING_ENERGY_DENSITY,key:l.ENERGY_RANKING_ENERGY_DENSITY,render:function(e){return(0,l.formatterValueToLocaleString)({value:e,divide:1})},sorter:function(e,n){return n[l.ENERGY_RANKING_ENERGY_DENSITY]-e[l.ENERGY_RANKING_ENERGY_DENSITY]},sortDirections:["ascend","descend"],defaultSortOrder:"descend"}];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(x.Z,{type:"primary",onClick:function(){return t({isVisible:!0,isCreate:!0})},className:"mb-3",children:"New Record"}),(0,O.jsx)(H,{dataSource:i.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{key:e.id})})),columns:u,loading:o,hasOperationColumn:!0,onEditRecord:function(e,n){return t({isVisible:!0,resource:n,isCreate:!1})},onRemoveRecord:function(t,r){var a=["energy-ranking-".concat(e)];n.setQueryData(a,(function(e){return e&&e.filter((function(e){return e.id!==r.id}))})),s.mutate(r.id)}}),(0,O.jsx)(Me,{})]})})),be=r.memo(Ye),De=t(5509),ke=t(3373),Ue={modalOperation:{isVisible:!1,isCreate:!1,resource:void 0}},Fe=(0,ee.M)((function(e,n){return(0,c.Z)((0,c.Z)({},Ue),{},{setModalOperation:function(t){var r=t.isVisible;e(r?{modalOperation:(0,c.Z)((0,c.Z)({},n().modalOperation),t)}:{modalOperation:(0,c.Z)({},Ue.modalOperation)})}})}),"AlertsAndTicketsConfigurationStore"),Ke=(0,N.Z)(Fe,2),Pe=Ke[0],Ve=Ke[1],we=(Ve.getState,Ve.destroy,"AlertsAndTickets_styles_formOperation__tgurG"),Be=function(e){var n=e.form,t=n.formFields,a=n.setFormFields,i=Y.Z.useForm(),u=(0,N.Z)(i,1)[0],c=_e().validator,E=function(){var e=(0,Oe.Q)();return r.useMemo((function(){return{validator:[Ee]}}),[e])}().validator;return(0,O.jsxs)(Y.Z,{form:u,name:"form-operation-geojson",fields:t,onFieldsChange:function(e,n){return a(n)},className:"form-operation-region ".concat(we),children:[(0,O.jsxs)(o.Z,{gutter:32,children:[(0,O.jsx)(s.Z,{span:12,children:(0,O.jsx)(Y.Z.Item,{label:l.ALERT_AND_TICKETS_RECORD_COLUMN[l.ALERTS],name:l.ALERTS,rules:c,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})})}),(0,O.jsx)(s.Z,{span:12,children:(0,O.jsx)(Y.Z.Item,{label:l.ALERT_AND_TICKETS_RECORD_COLUMN[l.DISPLAY_NAME],name:l.ALERTS_DISPLAY_NAME,rules:E,children:(0,O.jsx)(b.Z,{})})})]}),(0,O.jsxs)(o.Z,{gutter:32,children:[(0,O.jsx)(s.Z,{span:12,children:(0,O.jsx)(Y.Z.Item,{label:l.ALERT_AND_TICKETS_RECORD_COLUMN[l.TICKETS],name:l.TICKETS,rules:c,children:(0,O.jsx)(b.Z,{className:"ant-input-number"})})}),(0,O.jsx)(s.Z,{span:12,children:(0,O.jsx)(Y.Z.Item,{label:l.ALERT_AND_TICKETS_RECORD_COLUMN[l.DISPLAY_NAME],name:l.TICKETS_DISPLAY_NAME,rules:E,children:(0,O.jsx)(b.Z,{})})})]})]})},Je=r.memo(Be),Qe=function(){var e=(0,l.useSelectedCountry)().country.country,n=Pe(),t=n.modalOperation,a=t.isCreate,i=t.resource,o=t.isVisible,s=n.setModalOperation,u=(0,l.useMutationAlertsAndTickets)(e),c=M([{name:l.ALERTS,value:""},{name:l.TICKETS,value:""},{name:l.ALERTS_DISPLAY_NAME,value:""},{name:l.TICKETS_DISPLAY_NAME,value:""}],i),N=c.disabled,E=c.getFieldsValue,d=r.useCallback((0,S.Z)((0,v.Z)().mark((function e(){var n,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!N){e.next=3;break}return e.abrupt("return");case 3:return t=E(),e.next=6,u.mutateAsync((n={},(0,g.Z)(n,l.ALERTS,t[l.ALERTS]),(0,g.Z)(n,l.ALERTS_DISPLAY_NAME,t[l.ALERTS_DISPLAY_NAME]),(0,g.Z)(n,l.TICKETS,t[l.TICKETS]),(0,g.Z)(n,l.TICKETS_DISPLAY_NAME,t[l.TICKETS_DISPLAY_NAME]),n));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[c]);return(0,O.jsx)(h.n9,{title:"Form",visible:o,onCancel:function(){return s({isVisible:!1,isCreate:a})},okButtonProps:{disabled:N},onOk:(0,S.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:s({isVisible:!1,isCreate:a});case 3:case"end":return e.stop()}}),e)}))),confirmLoading:u.isLoading,destroyOnClose:!0,children:(0,O.jsx)(Je,{form:c})})},qe=r.memo(Qe),We=function(){var e=(0,l.useSelectedCountry)().country.country,n=(0,l.useQueryAlertsAndTicketsData)(e),t=n.alertsFormatted,r=n.ticketsFormatted,a=n.alertsDisplayName,i=n.ticketsDisplayName,u=n.resource,c=Pe().setModalOperation;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(x.Z,{type:"primary",className:"mb-3",onClick:function(){return c({isVisible:!0,resource:u,isCreate:!!u})},children:"Operation"}),(0,O.jsxs)(o.Z,{gutter:16,children:[(0,O.jsx)(s.Z,{span:12,children:(0,O.jsx)(De.Z,{children:(0,O.jsx)(ke.Z,{title:a,className:"truncate",value:t})})}),(0,O.jsx)(s.Z,{span:12,children:(0,O.jsx)(De.Z,{children:(0,O.jsx)(ke.Z,{title:i,className:"truncate",value:r})})})]}),(0,O.jsx)(qe,{})]})},ze=r.memo(We),He=function(){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ze,{}),(0,O.jsx)(Te.Z,{plain:!0}),(0,O.jsx)(be,{})]})},$e=r.memo(He),Xe=r.memo((function(){var e=(0,l.useCountryStatusList)().data,n=void 0===e?[]:e,t=(0,l.useMutationDeleteCountry)(),o=(0,l.useMapStore)(),s=o.country,u=o.actionSetSelectedCountry,c=r.useMemo((function(){return(null===n||void 0===n?void 0:n.map((function(e){var n=e.id;return{title:e.country,key:n}})))||[]}),[n]),N=r.useCallback((function(e){var r,o=e.key===s,u=null===(r=n.find((function(n){return n.id===e.key})))||void 0===r?void 0:r.actived;return(0,O.jsxs)("div",{className:"ant-tree-title-container grid gap-2 items-center h-8 px-2 ".concat(o?"bg-primary-1000":"transparent"),style:{gridTemplateColumns:"2fr 24px 24px"},children:[(0,O.jsx)("div",{className:"ant-tree-title-text cursor-pointer truncate text-sm ".concat(o?"text-white font-medium":"text-gray-400"),children:e.title}),u?(0,O.jsx)(a.Z,{title:"Country actived",children:(0,O.jsx)(G.Z,{})}):(0,O.jsx)("span",{}),(0,O.jsx)(i.Z,{title:"Are you sure to delete this item?",onConfirm:function(){return t.mutate(e.key)},okText:"Yes",cancelText:"No",okButtonProps:{loading:t.isLoading},children:(0,O.jsx)(C.Z,{})})]},e.key)}),[s,t,n]);return(0,O.jsx)(f,{treeData:c,onSelectKey:function(e){var n=e[0];u(n)},titleRender:N})})),en=function(){var e=r.useMemo((function(){return[{tab:"Geometry",key:"geometry",children:(0,O.jsx)(V,{})},{tab:"Region",key:"region",children:(0,O.jsx)(Ze,{})},{tab:"Data resource",key:"data_resource",children:(0,O.jsx)($e,{})}]}),[]);return(0,O.jsxs)("div",{children:[(0,O.jsx)(K,{isCreate:!0}),(0,O.jsxs)(o.Z,{className:"mt-5",children:[(0,O.jsx)(s.Z,{span:6,className:"p-3 bg-primary-900 min-h-[600px] h-auto",children:(0,O.jsx)(Xe,{})}),(0,O.jsx)(s.Z,{span:18,className:"pl-5",children:(0,O.jsx)(u.Z,{tabPanes:e})})]})]})},nn=r.memo(en)}}]);
//# sourceMappingURL=982.5b94ecb8.chunk.js.map
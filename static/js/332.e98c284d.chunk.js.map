{"version":3,"file":"static/js/332.e98c284d.chunk.js","mappings":"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","sources":["components/charts/D3Chart/D3Chart.tsx","components/charts/D3Chart/index.ts","components/charts/D3Hierachy/D3Hierachy.utils.ts","utils/stack.ts","webpack://poc-app/./src/components/charts/D3Hierachy/D3Hierachy.styles.module.scss?8ed6","components/charts/D3Hierachy/D3Hierachy.3D.tsx","components/charts/D3Tooltip/D3Tooltip.tsx","components/charts/D3Tooltip/index.ts","components/charts/Utils/index.ts","webpack://poc-app/./src/components/charts/D3Pie/D3Hexbin.style.module.scss?003c","components/charts/D3Pie/D3Pie.tsx","components/charts/D3Tooltip/D3Tooltip.hook.tsx","components/charts/D3Pie/D3Hexbin.utils.ts","components/charts/D3Pie/index.ts","components/core/Loading/index.tsx","hooks/useWindowDimensions.ts","pages/hierachy_map/Map.utils.ts","webpack://poc-app/./src/pages/hierachy_map/Map.style.module.scss?975a","components/core/Panel/index.tsx","components/core/BreakLine/index.tsx","pages/hierachy_map/Map.services.ts","http-request/index.ts","pages/hierachy_map/Map.constant.ts","pages/hierachy_map/Map.hooks.ts","pages/hierachy_map/Map.HierachyMap.tsx","pages/hierachy_map/Map.AlertsAndTickets.tsx","webpack://poc-app/./src/components/charts/Ranking/Ranking.style.module.scss?fe62","components/charts/Ranking/Ranking.tsx","components/charts/Ranking/index.ts","pages/hierachy_map/Map.Ranking.tsx","pages/hierachy_map/Map.EnergyConsumption.tsx","pages/hierachy_map/Map.tsx","pages/hierachy_map/Map.zustand.ts","pages/hierachy_map/index.ts","utils/isJSONString.ts"],"sourcesContent":["import classNames from \"classnames\";\nimport Loading from \"components/core/Loading\";\nimport React from \"react\";\n\nexport interface IBaseD3ChartProps {\n  chartName?: string;\n  isLoading?: boolean;\n  classNameContainer?: string | any;\n  classNameSVGChart?: string | any;\n  children?: React.ReactNode | React.ReactElement | any;\n}\n\nexport interface IRefD3ChartProps {\n  ref: React.MutableRefObject<HTMLDivElement | any> | any;\n  refSVG: React.MutableRefObject<SVGSVGElement | any> | any;\n}\n\nconst D3Chart = React.forwardRef(\n  (props: IBaseD3ChartProps, { ref, refSVG }: IRefD3ChartProps | any) => {\n    const {\n      chartName,\n      isLoading,\n      classNameContainer,\n      classNameSVGChart,\n      children,\n    } = props;\n    return (\n      <div ref={ref} className={`relative ${classNames(classNameContainer)}`}>\n        {chartName && (\n          <div className=\"text-center mb-5 text-xl font-medium\">\n            {chartName}\n          </div>\n        )}\n        {isLoading && <Loading />}\n        {refSVG && (\n          <svg ref={refSVG} className={`m-auto ${classNameSVGChart}`} />\n        )}\n        {children && children}\n      </div>\n    );\n  }\n);\n\nD3Chart.defaultProps = {\n  chartName: \"\",\n  isLoading: false,\n  classNameContainer: \"\",\n  classNameSVGChart: \"\",\n  children: null,\n};\n\nexport default D3Chart;\n","import D3Chart from \"./D3Chart\";\n\nexport * from \"./D3Chart\";\n\nexport default D3Chart;\n","/* eslint-disable no-bitwise */\n/* eslint-disable prefer-arrow-callback */\nimport * as d3 from \"d3\";\nimport { ENV } from \"env\";\nimport { cachePromise } from \"utils/cachePromise\";\nimport * as echarts from \"echarts\";\nimport Stack from \"utils/stack\";\nimport isEqual from \"lodash/isEqual\";\nimport { HierachyData } from \"./D3Hierachy.typings\";\n\nconst stack2D = new Stack();\nconst stack3D = new Stack();\n\nconst renderEchartsMap = ({\n  hierachy,\n  mapName,\n  mapEcharts,\n  nameProperty,\n  renderTooltip,\n}: {\n  hierachy: HierachyData;\n  mapName: string;\n  mapEcharts: echarts.EChartsType;\n  nameProperty: string | any;\n  renderTooltip: (feature: any) => any;\n}) => {\n  const { geometry, regions = [] } = hierachy;\n  const scaleColor = d3.scaleOrdinal(regions, d3.schemeCategory10);\n  echarts.registerMap(mapName, geometry);\n  const defaultAreaColor = \"#333D3F\";\n  const rbgDefaultAreaColor = d3.color(defaultAreaColor) as d3.RGBColor;\n  const rbgShadowColor = rbgDefaultAreaColor;\n  rbgShadowColor.opacity = 0.5;\n  const rgbaShadowColor = String(rbgShadowColor);\n  const options = {\n    geo: {\n      map: mapName,\n      zoom: 1,\n      roam: true,\n      animation: false,\n      nameProperty,\n      label: {\n        show: false,\n      },\n      itemStyle: {\n        areaColor: defaultAreaColor,\n        shadowColor: rgbaShadowColor,\n        shadowOffsetX: 0,\n        shadowOffsetY: 10,\n      },\n    },\n    series: [\n      {\n        name: \"map\",\n        type: \"map\",\n        map: mapName,\n        selectedMode: false,\n        roam: true,\n        label: {\n          show: false,\n          color: \"#ffffff\",\n        },\n\n        itemStyle: {\n          areaColor: defaultAreaColor,\n          shadowColor: rgbaShadowColor,\n          shadowOffsetX: -2,\n          shadowOffsetY: 2,\n          shadowBlur: 10,\n        },\n        emphasis: {\n          label: {\n            color: \"#ffffff\",\n          },\n          itemStyle: {\n            areaColor: \"#6289AB\",\n            shadowColor: rgbaShadowColor,\n            shadowOffsetX: 0,\n            shadowOffsetY: 10,\n          },\n        },\n        data: regions.map((r) => {\n          const areaColor = scaleColor(r);\n          const rgbColor = d3.color(areaColor) as d3.RGBColor;\n          const shadowColor = rgbColor;\n          shadowColor.opacity = 1;\n          const emphasisShadowColor = rgbColor;\n          emphasisShadowColor.opacity = 0.5;\n          return {\n            name: r,\n            label: {\n              show: false,\n              color: \"#FFF\",\n            },\n            itemStyle: {\n              areaColor,\n              shadowColor: String(shadowColor),\n              shadowOffsetX: 0,\n              shadowOffsetY: 10,\n            },\n            emphasis: {\n              focus: \"self\",\n              label: {\n                color: \"#FFFFFF\",\n                show: true,\n              },\n              itemStyle: {\n                areaColor,\n                shadowColor: String(emphasisShadowColor),\n                shadowOffsetX: 0,\n                shadowOffsetY: 10,\n              },\n            },\n          };\n        }),\n      },\n    ],\n    tooltip: {\n      show: true,\n      trigger: \"item\" as any,\n      formatter: (params: { [key: string]: any } | any[] | any) => {\n        const { name } = params;\n        const feature = geometry?.features.find((f: any) =>\n          isEqual(f?.properties?.name, name)\n        );\n        if (feature) {\n          return renderTooltip({ feature, name });\n        }\n        return \"\";\n      },\n      // alwaysShowContent: true,\n      padding: 0,\n      borderWidth: 0,\n    },\n  };\n  mapEcharts.setOption(options);\n  mapEcharts.hideLoading();\n};\n\nlet $echartsMap: echarts.EChartsType | any;\n/**\n * createHierachyChart3D this function using for generator 3D map\n * @param container - HTMLDivElement div container -> using for draw map\n * @param hierachy - HierachyData recursive json data\n */\nexport const createHierachyChart3D = (paramsFnc: {\n  container: HTMLDivElement;\n  hierachy: HierachyData;\n  renderTooltip: (feature: any) => any;\n  width: number | any;\n  height: number | any;\n}) => {\n  let $echartMapEle;\n  try {\n    const { hierachy, container, renderTooltip, width, height } = paramsFnc;\n    const $container = d3.select(container);\n    if (!hierachy) {\n      $echartsMap.dispose();\n      return;\n    }\n    const {\n      geometry, // geometry json\n      children = [], // children hierachy recursive\n      name, // name map\n      nameProperty = \"name\", // https://echarts.apache.org/en/option.html#geo.nameProperty\n      // useAssetPath = false, // if useAssetPath === true -> get geometry data from asset resource (geometry is really heavy)\n      id,\n    } = hierachy;\n    // bind id for container\n\n    if ($echartsMap) {\n      $echartsMap.dispose(); // trick for re-draw chart\n    }\n    $echartMapEle = $container.append(\"div\").attr(\"id\", id).node() as any;\n    // init chart -> $echartsMap is instance of echarts.EChartsType\n    $echartsMap = echarts.init($echartMapEle, undefined, { width, height });\n    // show loading\n    $echartsMap.showLoading();\n    // function to render Echarts map\n    renderEchartsMap({\n      hierachy,\n      mapName: name,\n      mapEcharts: $echartsMap,\n      nameProperty,\n      renderTooltip,\n    });\n    const isStackEmpty = stack3D.isEmpty();\n    const handleEvent = ({ dataIndex }: any) => {\n      let child;\n      // get feature base on index\n      const feature = geometry.features[dataIndex];\n      // find geometry feature base on properties\n      if (feature) {\n        child = children.find((c) =>\n          isEqual(c.name, feature?.properties?.name)\n        );\n      }\n      return child;\n    };\n    // handle for event on click area\n    $echartsMap.on(\"click\", (params: any) => {\n      // when click to area (district, states, province,...)\n      // if they have children (mean it's hierachy) ->\n      // push current hierachy to stack + re-create chart base on data\n      const child: HierachyData | any = handleEvent(params);\n      if (child) {\n        stack3D.push(hierachy);\n        createHierachyChart3D({ ...paramsFnc, hierachy: child });\n      }\n    });\n    // handle for event go back when double click area\n    $echartsMap.on(\"dblclick\", (params: any) => {\n      const child: HierachyData | any = handleEvent(params);\n      if (!isStackEmpty) {\n        // when stack is empty -> we no need back\n        if (!child) {\n          const peek = stack3D.peek();\n          stack3D.pop();\n          createHierachyChart3D({\n            ...paramsFnc,\n            hierachy: peek as unknown as HierachyData,\n          });\n        }\n      }\n    });\n    // handle for event zoom\n    $echartsMap.on(\"georoam\", (params: any) => {\n      const option: any = $echartsMap.getOption();\n      if (params.zoom) {\n        option.geo[0].zoom = option.series[0].zoom;\n        option.geo[0].center = option.series[0].center;\n      } else {\n        option.geo[0].center = option.series[0].center;\n      }\n      $echartsMap.setOption(option);\n    });\n  } catch (error) {\n    //\n  }\n  return $echartMapEle;\n};\n\nexport const createHierachyChart2D = async (params: {\n  svg: SVGSVGElement;\n  container: HTMLDivElement;\n  hierachy: HierachyData;\n  width?: number | any;\n  height?: number | any;\n}) => {\n  try {\n    const { svg, hierachy, width = 800, height = 400 } = params;\n    const {\n      geometry: geometryPath,\n      children = [],\n      // points = [],\n    } = hierachy;\n    const assetPath = `${ENV.ASSETS_PATH}/${geometryPath}`;\n    const geometry: any = await cachePromise(assetPath, () =>\n      d3.json(assetPath)\n    );\n    const $svg = d3\n      .select(svg)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"viewbox\", `0,0,${width},${height}`);\n    $svg.html(\"\");\n    // draw map\n    const centroid = d3.geoPath().centroid(geometry);\n    const projection = d3 // https://github.com/d3/d3-geo#projections\n      .geoMercator()\n      .scale(1 / (2 * Math.PI))\n      .translate(centroid)\n      .fitSize([width, height], geometry);\n    // Generator map from project + geometry data: https://github.com/d3/d3-geo#geoPath\n    // NOTE: every map will has difference projection (scale, center, translate, v...v). We need research source from google to make sure it can be work\n    const color = d3.scaleOrdinal(geometry.features, d3.schemeCategory10);\n    const printData = (render: any) => {\n      $svg.html(\"\");\n      geometry.features.forEach((item: any) => {\n        $svg\n          .append(\"path\")\n          .datum(item)\n          .attr(\"class\", \"geometry-map\")\n          .attr(\"pointer-events\", \"visible\")\n          .attr(\"stroke\", \"#777\")\n          .attr(\"stroke-width\", 0.5)\n          .attr(\"stroke-linejoin\", \"round\")\n          .attr(\"cursor\", \"pointer\")\n          .attr(\"fill\", \"none\")\n          .attr(\"d\", (d: any) => render(d))\n          .each(function eachSelection(d) {\n            const $this = d3.select(this);\n            const child = children.find((c) => c.id === d.properties.id);\n            const hasChild = !!child?.id;\n            const isStackEmpty = stack2D.isEmpty();\n            if (hasChild) {\n              $this.attr(\"opacity\", 1);\n              $this.attr(\"fill\", color(d));\n            } else {\n              $this.attr(\"opacity\", 0.5);\n            }\n            $this\n              .on(\"mouseover\", function onMouseOver() {\n                $this.attr(\"opacity\", 1);\n                if (!hasChild) {\n                  $this.attr(\"fill\", \"#FFF\");\n                }\n              })\n              .on(\"mouseleave\", function onMouseLeave() {\n                if (!hasChild) {\n                  $this.attr(\"opacity\", 0.5);\n                  $this.attr(\"fill\", \"none\");\n                }\n              })\n              .on(\"click\", function onClick() {\n                if (hasChild) {\n                  // has child -> continue\n                  stack2D.push(hierachy);\n                  createHierachyChart2D({ ...params, hierachy: child });\n                }\n              })\n              .on(\"dblclick\", function onDoubleClick() {\n                if (!isStackEmpty) {\n                  // check if stack2D is not empty (initial case)\n                  if (!hasChild) {\n                    // item don't have children -> go back\n                    const peek = stack2D.peek();\n                    stack2D.pop();\n                    createHierachyChart2D({\n                      ...params,\n                      hierachy: peek as unknown as HierachyData,\n                    });\n                  }\n                }\n              });\n          });\n      });\n    };\n    printData(d3.geoPath(projection));\n  } catch (error) {\n    //\n  }\n};\n","class Stack {\n  stack: any[];\n\n  constructor() {\n    this.stack = [];\n  }\n\n  push(item: any) {\n    this.stack.push(item);\n  }\n\n  pop() {\n    this.stack.pop();\n  }\n\n  peek() {\n    return !this.isEmpty() ? this.stack[this.size - 1] : undefined;\n  }\n\n  isEmpty() {\n    return this.size === 0;\n  }\n\n  get size() {\n    return this.stack.length;\n  }\n\n  get stackItems() {\n    return this.stack;\n  }\n}\n\nexport default Stack;\n","// extracted by mini-css-extract-plugin\nexport default {\"tooltip\":\"D3Hierachy_styles_tooltip__IO1VA\"};","import React from \"react\";\nimport D3Chart, { IBaseD3ChartProps } from \"components/charts/D3Chart\";\nimport classNames from \"classnames\";\nimport ReactDOM from \"react-dom/server\";\nimport * as d3 from \"d3\";\nimport { createHierachyChart3D } from \"./D3Hierachy.utils\";\nimport { HierachyData } from \"./D3Hierachy.typings\";\nimport styles from \"./D3Hierachy.styles.module.scss\";\n\ninterface IProps extends IBaseD3ChartProps {\n  data: {\n    hierachy: HierachyData | any;\n    width: number | any;\n    height: number | any;\n  };\n  renderTooltip?: (data: {\n    feature: any;\n    name: string;\n  }) => React.ReactNode | React.ReactElement | any;\n}\n\nconst D3Hierachy: React.FC<IProps> = ({\n  data,\n  renderTooltip,\n  isLoading,\n  ...rest\n}: IProps) => {\n  const ref = React.useRef(null);\n  const callbackRenderTooltip = (dt: { feature: any; name: string }) => {\n    let $tooltip;\n    const { feature } = dt;\n    if (typeof renderTooltip === \"function\") {\n      $tooltip = renderTooltip(dt);\n    } else {\n      $tooltip = (\n        <div>\n          {Object.entries(feature?.properties).map(\n            ([key, value]: [string, any]) => (\n              <div\n                className={`grid gap-3 ${classNames(styles.tooltip)}`}\n                key={key}\n              >\n                <div className=\"font-medium text-base text-black\">{key}</div>\n                {value && <div>{value}</div>}\n              </div>\n            )\n          )}\n        </div>\n      );\n    }\n    return ReactDOM.renderToString($tooltip);\n  };\n  React.useEffect(() => {\n    if (isLoading || !ref.current) {\n      return;\n    }\n    const $echartMapEle = createHierachyChart3D({\n      container: ref.current,\n      ...data,\n      renderTooltip: callbackRenderTooltip,\n    });\n    return () => {\n      if ($echartMapEle) {\n        d3.select($echartMapEle).remove();\n      }\n    };\n  }, [ref, data, renderTooltip]);\n  return (\n    <D3Chart\n      {...{\n        ...rest,\n        isLoading,\n        ref: {\n          ref,\n        } as any,\n      }}\n    >\n      {!isLoading && !data.hierachy && <div>Geojson is not valid</div>}\n    </D3Chart>\n  );\n};\n\nD3Hierachy.defaultProps = {\n  renderTooltip: undefined,\n};\n\nexport default React.memo(D3Hierachy);\n","import React from \"react\";\n\ninterface IProps {\n  value: string | React.ReactNode | React.ReactElement | any;\n  className?: string | any;\n}\n\nconst D3Tooltip: React.FC<\n  IProps &\n    React.DetailedHTMLProps<\n      React.HTMLAttributes<HTMLDivElement>,\n      HTMLDivElement\n    >\n> = ({ value, className = \"\", ...rest }) => (\n  <div\n    className={`tooltip fixed flex justify-center items-center p-[10px] h-[40px] bg-white rounded-[4px] shadow-xl text-black ${className}`}\n    style={{\n      opacity: 0,\n      visibility: \"hidden\",\n      ...rest.style,\n    }}\n    {...rest}\n  >\n    {value && value}\n  </div>\n);\nD3Tooltip.defaultProps = {\n  className: \"\",\n};\nexport default React.memo(D3Tooltip);\n","import D3Tooltip from \"./D3Tooltip\";\n\nexport * from \"./D3Tooltip.hook\";\n\nexport default D3Tooltip;\n","import * as d3 from \"d3\";\nimport floor from \"lodash/floor\";\n\nexport function wrap({\n  selector,\n  width,\n  padding = 0,\n}: {\n  selector: any;\n  width: number;\n  padding?: number;\n}) {\n  const self = d3.select(selector);\n  let textLength = self.node().getComputedTextLength();\n  let text = self.text();\n  while (textLength > width - 2 * padding && text.length > 0) {\n    text = text.slice(0, -1);\n    self.text(`${text}...`);\n    textLength = self.node().getComputedTextLength();\n  }\n}\n\nexport const calculatePercent = (\n  value: number,\n  total: number,\n  precision?: number\n) => {\n  const p = (value / total) * 100;\n  const floorPercent = floor(p, precision || 2);\n  return floorPercent;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"pieChartInfo\":\"D3Hexbin_style_pieChartInfo__xKSaP\"};","import React from \"react\";\nimport D3Chart, { IBaseD3ChartProps } from \"components/charts/D3Chart\";\nimport { useRenderTooltip } from \"components/charts/D3Tooltip\";\nimport * as d3 from \"d3\";\nimport orderBy from \"lodash/orderBy\";\nimport ReactDOM from \"react-dom/server\";\nimport { calculatePercent } from \"components/charts/Utils\";\nimport sum from \"lodash/sum\";\nimport classNames from \"classnames\";\nimport { createPieChart } from \"./D3Hexbin.utils\";\nimport { PieChartItem, PieChartItemRender } from \"./D3Hexbin.typings\";\nimport style from \"./D3Hexbin.style.module.scss\";\n\ninterface IProps extends IBaseD3ChartProps {\n  data: {\n    pieData: PieChartItem[];\n    size: number;\n    donutText?: string;\n    subDonutText?: string;\n    quantitiesItemOnChart?: number;\n    pieChartContainerClassName?: string | any;\n    formatterValue?: (item: PieChartItemRender) => string;\n    renderTooltipValue?: (\n      item: PieChartItemRender\n    ) => React.ReactNode | React.ReactElement | any;\n  };\n}\n\nconst D3Pie: React.FC<IProps> = (props) => {\n  const { data, ...rest }: IProps = props;\n  const {\n    pieData: dataResource = [],\n    size,\n    donutText,\n    subDonutText,\n    quantitiesItemOnChart = 5,\n    pieChartContainerClassName = \"\",\n    formatterValue,\n    renderTooltipValue,\n  } = data;\n  const ref = React.useRef(null);\n  const refContainer = React.useRef(null);\n  const refSVG = React.useRef(null);\n  const [renderTooltip] = useRenderTooltip();\n  const pieData: PieChartItemRender[] = React.useMemo(() => {\n    const total = sum(dataResource.map((i) => i.value));\n    const inputPieData: PieChartItemRender[] = dataResource.map((i) => ({\n      ...i,\n      percent: calculatePercent(i.value, total),\n    }));\n    const pieDataSorted = orderBy(inputPieData, (i) => i.value, \"desc\");\n    if (pieDataSorted.length > quantitiesItemOnChart) {\n      const persist = pieDataSorted.slice(0, quantitiesItemOnChart - 1);\n      const remain = pieDataSorted.slice(\n        quantitiesItemOnChart,\n        pieDataSorted.length - 1\n      );\n      return [\n        ...persist,\n        { id: \"other\", label: \"Other\", value: sum(remain.map((i) => i.value)) },\n      ].map((i) => ({\n        ...i,\n        percent: calculatePercent(i.value, total),\n      }));\n    }\n    return pieDataSorted;\n  }, [dataResource]);\n  const scaleColor = React.useMemo(\n    () => d3.scaleOrdinal(pieData, d3.schemeCategory10),\n    [pieData]\n  );\n  const renderTooltipPieChart = React.useCallback(\n    (\n      event: any,\n      d:\n        | d3.PieArcDatum<\n            | number\n            | {\n                valueOf(): number;\n              }\n          >\n        | any\n      // selector: SVGPathElement | any\n    ) => {\n      if (!ref.current) {\n        return;\n      }\n      const item: PieChartItemRender = pieData[d.index];\n      const { value, label } = item;\n      const tooltipVal =\n        typeof renderTooltipValue === \"function\"\n          ? ReactDOM.renderToString(renderTooltipValue(item))\n          : `${label} has value = ${value}`;\n      const tooltip = renderTooltip({ value: tooltipVal, event });\n      return d3\n        .select(ref.current)\n        .selectChild(\".tooltip-container\")\n        .html(tooltip);\n    },\n    [ref, pieData]\n  );\n  const renderPieChartInfo = React.useCallback(\n    () =>\n      pieData.map((item) => {\n        const { label, value, id } = item;\n        return (\n          <div\n            key={id}\n            className={`grid gap-2 mb-2 ${style.pieChartInfo} last:mb-0`}\n          >\n            <div\n              className=\"grid gap-1 items-center\"\n              style={{ gridTemplateColumns: \"min-content 1fr\" }}\n            >\n              <div\n                className=\"rounded-full w-2 h-2\"\n                style={{ backgroundColor: scaleColor(item) }}\n              />\n              <div className=\"font-medium text-sm text-gray-500 truncate\">\n                {label}\n              </div>\n            </div>\n            <div className=\"font-medium text-base text-white truncate sub-font\">\n              {typeof formatterValue === \"function\"\n                ? formatterValue(item)\n                : value}\n            </div>\n          </div>\n        );\n      }),\n    [pieData, formatterValue]\n  );\n  React.useLayoutEffect(() => {\n    if (ref.current && refSVG.current && pieData) {\n      createPieChart({\n        svg: refSVG.current,\n        container: ref.current,\n        renderTooltip: renderTooltipPieChart,\n        data: pieData,\n        size,\n        scaleColor,\n        donutText,\n        subDonutText,\n      });\n    }\n  }, [ref, refSVG, refContainer, data, scaleColor, size]);\n  return (\n    <div\n      className={`pie-chart-container ${classNames(\n        pieChartContainerClassName\n      )}`}\n    >\n      <div\n        className=\"pie-chart grid gap-5 items-center\"\n        style={{\n          gridTemplateColumns: `${size}px 1fr`,\n        }}\n      >\n        <D3Chart\n          {...{\n            ...rest,\n            ref: {\n              ref,\n              refSVG,\n            } as any,\n          }}\n        >\n          <div className=\"tooltip-container\" />\n        </D3Chart>\n        <div className=\"pie-chart-info\">{renderPieChartInfo()}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(D3Pie);\n","import React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport D3Tooltip from \"./index\";\n\nexport const useRenderTooltip = () => {\n  const renderTooltip = React.useCallback(\n    ({ value, event }: { event: any; value: string }) => {\n      const { pageX, pageY } = event;\n      const left = `${pageX + 20}px`;\n      const top = `${pageY - 20}px`;\n      const tooltip = renderToString(\n        <D3Tooltip\n          value={value}\n          style={{\n            top,\n            left,\n            opacity: 1,\n            visibility: \"visible\",\n            zIndex: Number.MAX_SAFE_INTEGER,\n          }}\n        />\n      );\n      return tooltip;\n    },\n    []\n  );\n  return [renderTooltip];\n};\n","import * as d3 from \"d3\";\nimport { Domain } from \"domain\";\nimport { wrap } from \"../Utils\";\nimport { PieChartItem } from \"./D3Hexbin.typings\";\n\nexport const createPieChart = ({\n  size,\n  svg,\n  data,\n  donut = 80,\n  container,\n  renderTooltip,\n  scaleColor,\n  donutText,\n  subDonutText,\n}: {\n  size: number;\n  svg: SVGElement;\n  data: PieChartItem[];\n  donut?: number;\n  container: HTMLDivElement;\n  renderTooltip?: (\n    event: any,\n    d:\n      | d3.PieArcDatum<\n          | number\n          | {\n              valueOf(): number;\n            }\n        >\n      | any,\n    selector: SVGPathElement | any\n  ) => any;\n  scaleColor: d3.ScaleOrdinal<Domain, Range, any> | any;\n  donutText?: string;\n  subDonutText?: string;\n}) => {\n  const $container = d3.select(container);\n  const radius = size / 2;\n  const $svg = d3.select(svg).attr(\"width\", size).attr(\"height\", size);\n  $svg.html(\"\");\n  const $g = $svg\n    .append(\"g\")\n    .attr(\"transform\", `translate(${size / 2},${size / 2})`);\n  //   const scaleColor2 = d3.scaleOrdinal(data, d3.schemeTableau10);\n  // Generate the pie\n  const pie = d3.pie();\n  const innerRadius = (donut / 100) * radius;\n  const outerRadius = radius;\n  // Generate the arcs\n  const arc: any = d3.arc().innerRadius(innerRadius).outerRadius(outerRadius);\n  // Generate groups\n  const values = data.map((i) => (i.value < 0.1 ? 0.1 : i.value));\n  const pieData = pie(values);\n  const $arcs = $g\n    .selectAll(\"arc\")\n    .data(pieData)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"arc\");\n  // Draw arc paths\n  $arcs\n    .append(\"path\")\n    .attr(\"d\", arc)\n    .attr(\"cursor\", \"pointer\")\n    .attr(\"fill\", (d, index) => scaleColor(data[index]))\n    .on(\"mouseover\", function onMouseOver(event, d) {\n      if (typeof renderTooltip === \"function\") {\n        renderTooltip(event, d, this);\n      }\n    })\n    .on(\"mouseleave\", () => {\n      if (typeof renderTooltip === \"function\") {\n        const $tooltip = $container.selectChild(\".tooltip-container\");\n        $tooltip.html(\"\");\n      }\n    });\n  // center value\n  if (donutText) {\n    $g.append(\"text\")\n      .attr(\"class\", \"donut-text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"y\", \"0\")\n      .attr(\"fill\", \"#FFF\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-family\", \"BPDS_Iconfont\")\n      .style(\"font-style\", \"normal\")\n      .style(\"font-weight\", \"400\")\n      .text(donutText)\n      .each(function invokeWrap() {\n        const maxWidth = innerRadius * 2;\n        return wrap({ selector: this, width: maxWidth, padding: 0 });\n      });\n  }\n  if (subDonutText) {\n    $g.append(\"text\")\n      .attr(\"class\", \"donut-text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"y\", \"20\")\n      .attr(\"fill\", \"#6b7280\")\n      .style(\"font-size\", \"12px\")\n      .text(subDonutText)\n      .each(function invokeWrap() {\n        const maxWidth = innerRadius * 2;\n        return wrap({ selector: this, width: maxWidth, padding: 0 });\n      });\n  }\n};\n","import D3PieChart from \"./D3Pie\";\n\nexport * from \"./D3Hexbin.utils\";\nexport * from \"./D3Hexbin.typings\";\n\nexport default D3PieChart;\n","import classNames from \"classnames\";\nimport React from \"react\";\nimport appStyle from \"styles/App.module.scss\";\n\nconst Loading: React.FC<\n  React.DetailedHTMLProps<\n    React.HTMLAttributes<HTMLDivElement>,\n    HTMLDivElement\n  > & {\n    className?: string;\n    isCenterAbsolute?: boolean;\n  }\n> = ({ className, isCenterAbsolute, ...rest }) => (\n  <div\n    className={`${isCenterAbsolute && appStyle.absCenter} ${classNames(\n      className\n    )}`}\n    {...rest}\n  >\n    <i className=\"fa-solid fa-spinner fa-spin-pulse fa-2xl\" />\n  </div>\n);\nLoading.defaultProps = {\n  className: \"\",\n  isCenterAbsolute: true,\n};\n\nexport default React.memo(Loading);\n","import { useState, useEffect } from \"react\";\n\nconst getWindowDimensions = () => {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n};\n\nfunction useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n\nexport default useWindowDimensions;\n","import { HierachyData } from \"components/charts/D3Hierachy\";\nimport uniq from \"lodash/uniq\";\nimport isEqual from \"lodash/isEqual\";\nimport toLower from \"lodash/toLower\";\nimport toUpper from \"lodash/toUpper\";\nimport isNaN from \"lodash/isNaN\";\nimport max from \"lodash/max\";\nimport min from \"lodash/min\";\nimport {\n  EnergyConsumptionItem,\n  EnergyConsumptionUnit,\n  MapProperty,\n} from \"./Map.typings\";\n\nexport const STANDARD_ENERGY_CONSUMPTION_UNIT = \"Wh\";\n\nexport const ENERGY_BASE_UNIT = \"Wh\";\n\nexport const ENERGY_DENSITY_AREA_BASE_UNIT = \"m\";\n\nexport const CARBON_BASE_UNIT = \"CO2e\";\n\nexport const CARBON_DENSITY_BASE_UNIT = \"CO2e/m\";\n\nexport const EC_UNITS: {\n  [key in EnergyConsumptionUnit]: string;\n} = {\n  baseWatt: \"Wh\",\n  kgWatt: \"kWh\",\n  megaWatt: \"MWh\",\n  gigaWatt: \"GWh\",\n};\n\n/**\n * convertECByUnit Convert energy consumption value base on unit\n * @param { value, unit } : EnergyConsumptionItem\n * @returns number\n */\nexport const convertECByUnit = ({ value, unit }: EnergyConsumptionItem) => {\n  let valConverted = 0;\n  try {\n    if (!isNaN(value)) {\n      switch (unit) {\n        case \"kgWatt\":\n          valConverted = value * 1e3;\n          break;\n        case \"megaWatt\":\n          valConverted = value * 1e6;\n          break;\n        case \"gigaWatt\":\n          valConverted = value * 1e9;\n          break;\n        default:\n          valConverted = value;\n          break;\n      }\n    }\n  } catch (error) {\n    //\n  }\n  return valConverted;\n};\n\n/**\n * findDivideBaseOnValuesEC Find divide base on values energy consumption\n * @param values number[]\n * @returns { divide: number, unit: string }\n */\nexport const findDivideBaseOnValuesEC = (\n  values: number[],\n  isDensity = false\n) => {\n  let divide = 1;\n  let unit = EC_UNITS.baseWatt;\n  const maxValue = max(values) || 0;\n\n  if (maxValue >= 1e9) {\n    divide = 1e9;\n    unit = EC_UNITS.gigaWatt;\n  } else if (maxValue >= 1e6) {\n    divide = 1e6;\n    unit = EC_UNITS.megaWatt;\n  } else if (maxValue >= 1e3) {\n    divide = 1e3;\n    unit = EC_UNITS.kgWatt;\n  }\n  let minFractionDigits = 2;\n  const minValue = (min(values) || 0) / divide;\n  if (minValue > 0 && minValue < 1) {\n    minFractionDigits = -Math.floor(Math.log10(minValue));\n  }\n  return {\n    divide,\n    unit: isDensity ? `${unit}/${ENERGY_DENSITY_AREA_BASE_UNIT}` : unit,\n    minFractionDigits,\n  };\n};\n\nexport const formatterValueToLocaleString = ({\n  value,\n  divide = 1,\n  fractionDigits = 2,\n  unit,\n}: {\n  value: number;\n  divide?: number;\n  fractionDigits?: number;\n  unit?: string;\n}) => {\n  try {\n    const divided = value / divide;\n    const locale = divided.toLocaleString(undefined, {\n      minimumFractionDigits: fractionDigits,\n    });\n    return `${locale} ${unit || \"\"}`;\n  } catch (error) {\n    //\n  }\n  return `${value}`;\n};\n\nconst createFeature = (\n  mapProperty: MapProperty,\n  geojson: d3.GeoPermissibleObjects | any,\n  listProperties: string[]\n) => {\n  try {\n    const { id, name, mapProperties } = mapProperty;\n    const geojsonMapping = geojson.features.map(\n      ({ properties, geometry: { coordinates, type } }: any) => ({\n        coordinates,\n        properties,\n        type,\n      })\n    );\n    const coordinates: any = [];\n    mapProperties.forEach((i: any) => {\n      const splitByComma = i.split(\",\");\n      splitByComma.forEach((propertyName: string) => {\n        listProperties.push(propertyName);\n        const foundCoordinates = geojsonMapping.find((gItem: any) =>\n          isEqual(toLower(gItem.properties.name), toLower(propertyName))\n        );\n        if (foundCoordinates) {\n          switch (foundCoordinates.type) {\n            case \"LineString\": {\n              // convert to polygon\n              coordinates.push([foundCoordinates.coordinates]);\n              break;\n            }\n            case \"Polygon\":\n              coordinates.push(foundCoordinates.coordinates);\n              break;\n            case \"MultiPolygon\": {\n              foundCoordinates.coordinates.forEach((polygon: any) => {\n                coordinates.push(polygon);\n              });\n              break;\n            }\n\n            default:\n              break;\n          }\n        }\n      });\n    });\n    const feature = {\n      type: \"Feature\",\n      id,\n      geometry: {\n        type: \"MultiPolygon\",\n        coordinates,\n      },\n      properties: { name },\n    };\n    return feature;\n  } catch (error) {\n    //\n  }\n};\n\nexport const convertMapPropertiesToCoordinates = (\n  regionMapProperties: MapProperty[],\n  hierachyData: HierachyData | undefined\n) => {\n  const features: any[] = [];\n  let listProperties: string[] = [];\n  try {\n    if (hierachyData) {\n      const { geometry } = hierachyData;\n      regionMapProperties.forEach((i: MapProperty, index) => {\n        const feature = createFeature(i, geometry, listProperties);\n        if (feature) {\n          const fItem = features[index];\n          features[index] = { ...fItem, ...feature };\n        }\n      });\n      listProperties = uniq(listProperties);\n    }\n  } catch (error) {\n    //\n  }\n  return { listProperties, features };\n};\n\nexport const convertFromStringToArrayPropertyList = (data: string) =>\n  data?.split(\",\").map((p) => toUpper(p)) || [];\n","// extracted by mini-css-extract-plugin\nexport default {\"extra\":\"Map_style_extra__Kv95r\",\"alertAndTicketExtra\":\"Map_style_alertAndTicketExtra__K9e4l\",\"bgFlash\":\"Map_style_bgFlash__dmygw\",\"blockRankingTitle\":\"Map_style_blockRankingTitle__vM98E\",\"blockAlertsAndTickets\":\"Map_style_blockAlertsAndTickets__Mj53f\"};","import React from \"react\";\nimport Loading from \"components/core/Loading\";\n\ninterface IProps {\n  title: string;\n  sub?: React.ReactNode | React.ReactElement | any;\n  className?: string | undefined | any;\n  isLoading?: boolean;\n  classNameBlockTitle?: string | any;\n  childrenCenter?: boolean;\n  panelTitleClassName?: string | undefined | any;\n}\nconst Panel: React.FC<\n  IProps &\n    React.DetailedHTMLProps<\n      React.HTMLAttributes<HTMLDivElement>,\n      HTMLDivElement\n    >\n> = ({\n  title,\n  children,\n  sub,\n  className = \"\",\n  isLoading,\n  classNameBlockTitle,\n  childrenCenter,\n  panelTitleClassName = \"\",\n  ...rest\n}) => (\n  <div\n    className={`relative bg-[#212029] p-5 h-auto ${className || \"\"}`}\n    {...rest}\n  >\n    <div\n      className={`grid items-center justify-between gap-3 ${classNameBlockTitle}`}\n    >\n      <div\n        className={`panel-title font-medium text-white truncate max-w-100px ${\n          panelTitleClassName || \"\"\n        }`}\n      >\n        {title}\n      </div>\n      {sub && sub}\n    </div>\n    {isLoading ? (\n      <Loading />\n    ) : (\n      children && (\n        <div\n          className={`${\n            childrenCenter ? \"flex justify-center items-center\" : \"\"\n          } `}\n        >\n          {children}\n        </div>\n      )\n    )}\n  </div>\n);\n\nPanel.defaultProps = {\n  sub: null,\n  className: \"\",\n  isLoading: false,\n  classNameBlockTitle: \"\",\n  childrenCenter: false,\n  panelTitleClassName: \"\",\n};\nexport default React.memo(Panel);\n","import classNames from \"classnames\";\nimport React from \"react\";\n\nconst BreakLine: React.FC<\n  { className?: string | undefined } & React.DetailedHTMLProps<\n    React.HTMLAttributes<HTMLDivElement>,\n    HTMLDivElement\n  >\n> = ({ className = \"\", ...rest }) => (\n  <div\n    className={`h-[1px] bg-slate-300 w-[100%] ${classNames(className)}`}\n    {...rest}\n  />\n);\n\nBreakLine.defaultProps = {\n  className: \"\",\n};\nexport default React.memo(BreakLine);\n","import { ENV } from \"env\";\nimport HTTP from \"http-request\";\nimport {\n  RegionResponse,\n  AlertsAndTicketsResponse,\n  EnergyRankingResponse,\n  EnergyConsumptionResponse,\n  GeneralResponse,\n  GeojsonMapOfACountryResponse,\n  GeojsonMapPropertyListOfACountryResponse,\n  ListCountryResponse,\n  RegionListResponse,\n  APIResponse,\n  CountryStatusListResponse,\n} from \"./Map.typings\";\n\nconst http = new HTTP({ baseURL: `${ENV.API_DOMAIN_URL}/map` });\n\n/**\n * getMapGeneral: Get general information\n */\nexport const getMapGeneral: () => Promise<GeneralResponse> = () =>\n  http.get(\"general\");\n\n/**\n * getGeojsonMapOfACountryResponse: Get geojson map of a country\n * @param country: string;\n */\nexport const getGeojsonMapOfACountry: (\n  country: string\n) => Promise<GeojsonMapOfACountryResponse> = (country) =>\n  http.get(`geojsonmap?Country=${country}`);\n\n/**\n * operationGeojsonMapOfACountry: Create / Update geojson map of a country\n * @param country: string;\n * @param geojson: d3.GeoGeometryObjects | any;\n */\nexport const operationGeojsonMapOfACountry: (\n  country: string,\n  geojson: d3.GeoGeometryObjects | any\n) => Promise<GeojsonMapOfACountryResponse> = (country, geojson) =>\n  http.post(`geojsonmap?Country=${country}`, geojson);\n\n/**\n * getPropertyList: Get property (name) list of a country\n * @param country: string;\n */\nexport const getPropertyList: (\n  country: string\n) => Promise<GeojsonMapPropertyListOfACountryResponse> = (country) =>\n  http.get(`geojsonmappropertylist?Country=${country}`);\n\n/**\n * getRegion: Get details info of a region\n * @param country: string;\n * @param region: string;\n */\nexport const getRegion: (\n  country: string,\n  region: string\n) => Promise<RegionResponse> = (country, region) =>\n  http.get(`region?Country=${country}&Region=${region}`);\n\n/**\n * createRegion: Create general details info of a region\n * @param country: string;\n * @param region: string;\n */\nexport const createRegion: (\n  country: string,\n  region: string,\n  updateInfo: {\n    map_properties?: string;\n    buildings?: number;\n    floor_area?: number;\n    energy_densisty_YTD?: number;\n    active_alerts?: number;\n    open_tickets?: number;\n    energy_consumption?: number;\n  }\n) => Promise<RegionResponse> = (country, region, updateInfo) =>\n  http.post(`region`, {\n    country,\n    regionname: region,\n    ...updateInfo,\n  });\n\n/**\n * updateRegion: Update general details info of a region\n * @param country: string;\n * @param region: string;\n */\nexport const updateRegion: (\n  country: string,\n  region: string,\n  updateInfo: {\n    map_properties?: string;\n    buildings?: number;\n    floor_area?: number;\n    energy_densisty_YTD?: number;\n    active_alerts?: number;\n    open_tickets?: number;\n    energy_consumption?: number;\n  }\n) => Promise<RegionResponse> = (country, region, updateInfo) =>\n  http.put(`region`, {\n    country,\n    regionname: region,\n    ...updateInfo,\n  });\n\n/**\n * deleteRegion: Delete a region\n * @param id: number | string;\n */\nexport const deleteRegion: (id: any) => Promise<APIResponse> = (id: any) =>\n  http.post(`${id}/region`, {});\n\n/**\n * getAlertsTickets: Get alerts & tickets of country\n * @return AlertsAndTicketsResponse\n */\nexport const getAlertsTickets: (\n  country: string\n) => Promise<AlertsAndTicketsResponse> = (country) =>\n  http.get(`alertstickets?Country=${country}`);\n\n/**\n * operationAlertsTickets: Create / update alerts & tickets of country\n * @return AlertsAndTicketsResponse\n */\nexport const operationAlertsTickets: (body: {\n  country: string;\n  alerts: number;\n  tickets: number;\n}) => Promise<APIResponse> = (body) => http.post(`alertstickets`, body);\n\n/**\n * getEnergyConsumption: Get energy consumption of a country\n * @param country: string\n */\nexport const getEnergyConsumption: (\n  country: string\n) => Promise<EnergyConsumptionResponse> = (country) =>\n  http.get(`energyconsumption?Country=${country}`);\n\n/**\n * getEnergyRanking: Get energy ranking by country\n */\nexport const getEnergyRanking: (\n  country: string\n) => Promise<EnergyRankingResponse> = (country) =>\n  http.get(`energyranking?Country=${country}`);\n\n/**\n * getListCountry\n * @returns string[]\n */\nexport const getListCountry: () => Promise<ListCountryResponse> = () =>\n  http.get(\"countrylist\");\n\n/**\n * getRegionList: Get list region of country\n */\nexport const getRegionList: (country: string) => Promise<RegionListResponse> = (\n  country\n) => http.get(`regionlist?Country=${country}`);\n\n/**\n * deleteGeojsonMap: Delete geoJson map data by id\n */\nexport const deleteGeojsonMap: (countyId: number) => Promise<APIResponse> = (\n  countryId\n) => http.delete(`${countryId}/geojsonmap`);\n\n/**\n * activeGeojsonMap: Update geoJson map data actived\n */\nexport const activeGeojsonMap: (countyId: number) => Promise<APIResponse> = (\n  countryId\n) => http.post(`${countryId}/geojsonmap`);\n\n/**\n * getCountryStatusList: Get country list\n */\nexport const getCountryStatusList: () => Promise<CountryStatusListResponse> =\n  () => http.get(`countrystatuslist`);\n\n/**\n * operationEnergyRanking: Create / update energy ranking item\n * @param country: string;\n * @param buildingname: string;\n */\nexport const operationEnergyRanking: (\n  country: string,\n  buildingname: string,\n  updateInfo: {\n    energy: number;\n    energy_density: number;\n  }\n) => Promise<RegionResponse> = (country, buildingname, updateInfo) =>\n  http.post(`energyranking?Country=${country}`, {\n    country,\n    buildingname,\n    ...updateInfo,\n  });\n\n/**\n * deleteEnergyRanking: Delete energy ranking record\n * @param id: number | string;\n */\nexport const deleteEnergyRanking: (id: any) => Promise<APIResponse> = (\n  id: any\n) => http.post(`${id}/energyranking`, {});\n","class HTTP {\n  baseURL: string;\n\n  controller: AbortController;\n\n  requestInit: RequestInit;\n\n  constructor({ baseURL }: { baseURL: string }) {\n    this.baseURL = baseURL;\n    this.controller = new AbortController();\n    this.requestInit = {\n      cache: \"no-cache\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"*\",\n        \"Access-Control-Allow-Headers\": \"*\",\n      },\n      credentials: \"same-origin\", // include, *same-origin, omit\n      redirect: \"follow\", // manual, *follow, error\n      referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n    };\n  }\n\n  get(url: string) {\n    const { signal } = this.controller;\n    return fetch(`${this.baseURL}/${url}`, {\n      ...this.requestInit,\n      method: \"GET\",\n      signal,\n    })\n      .then((res) => res.json())\n      .catch((error) => {\n        throw new Error(error);\n      });\n  }\n\n  post(url: string, data?: any) {\n    const { signal } = this.controller;\n    return fetch(`${this.baseURL}/${url}`, {\n      ...this.requestInit,\n      method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n      body: JSON.stringify(data), // body data type must match \"Content-Type\" header\n      signal,\n    })\n      .then((res) => res.json())\n      .catch((error) => {\n        throw new Error(error);\n      });\n  }\n\n  put(url: string, data?: any) {\n    const { signal } = this.controller;\n    return fetch(`${this.baseURL}/${url}`, {\n      ...this.requestInit,\n      method: \"PUT\", // *GET, POST, PUT, DELETE, etc.\n      body: JSON.stringify(data), // body data type must match \"Content-Type\" header\n      signal,\n    })\n      .then((res) => res.json())\n      .catch((error) => {\n        throw new Error(error);\n      });\n  }\n\n  delete(url: string, data?: any) {\n    const { signal } = this.controller;\n    return fetch(`${this.baseURL}/${url}`, {\n      ...this.requestInit,\n      method: \"DELETE\", // *GET, POST, PUT, DELETE, etc.\n      body: JSON.stringify(data), // body data type must match \"Content-Type\" header\n      signal,\n    })\n      .then((res) => res.json())\n      .catch((error) => {\n        throw new Error(error);\n      });\n  }\n\n  abort() {\n    this.controller.abort();\n  }\n}\n\nexport default HTTP;\n","import {\n  RegionProperty,\n  EnergyRankingProperty,\n  AlertsAndTicketsProperty,\n} from \"./Map.typings\";\n\nexport const REGION_NAME = \"regionname\";\nexport const REGION_COORDINATES = \"map_properties\";\nexport const REGION_ENERGY_CONSUMPTION = \"energy_consumption\";\nexport const REGION_ENERGY_DENSITY_CONSUMPTION = \"energy_densisty_YTD\";\nexport const REGION_OPEN_TICKETS = \"open_tickets\";\nexport const REGION_ALERT_TICKETS = \"active_alerts\";\nexport const REGION_BUILDINGS = \"buildings\";\nexport const REGION_FLOOR_AREA = \"floor_area\";\nexport const REGION_TIME = \"time\";\n\nexport const REGION_RECORD_COLUMN: {\n  [key in RegionProperty]: string;\n} = {\n  [REGION_NAME]: \"Region\",\n  [REGION_COORDINATES]: \"Coordinates\",\n  [REGION_ENERGY_CONSUMPTION]: \"Energy Consumption\",\n  [REGION_ENERGY_DENSITY_CONSUMPTION]: \"Energy Density Consumption\",\n  [REGION_OPEN_TICKETS]: \"Open tickets\",\n  [REGION_ALERT_TICKETS]: \"Alert Tickets\",\n  [REGION_BUILDINGS]: \"Buildings\",\n  [REGION_FLOOR_AREA]: \"Floor Area\",\n  [REGION_TIME]: \"Time\",\n};\n\nexport const ENERGY_RANKING_BUILDING_NAME = \"buildingname\";\nexport const ENERGY_RANKING_ENERGY = \"energy\";\nexport const ENERGY_RANKING_ENERGY_DENSITY = \"energy_density\";\n\nexport const ENERGY_RANKING_RECORD_COLUMN: {\n  [key in EnergyRankingProperty]: string;\n} = {\n  [ENERGY_RANKING_BUILDING_NAME]: \"Building Name\",\n  [ENERGY_RANKING_ENERGY]: \"Energy\",\n  [ENERGY_RANKING_ENERGY_DENSITY]: \"Energy Density\",\n};\n\nexport const GEOJSON_INFO_COUNTRY = \"country\";\nexport const GEOJSON_INFO_DATA = \"geojson\";\nexport const GEOJSON_INFO_RECORD_COLUMN = {\n  [GEOJSON_INFO_COUNTRY]: \"Country\",\n  [GEOJSON_INFO_DATA]: \"Geojson\",\n};\n\nexport const ALERTS = \"alerts\";\nexport const TICKETS = \"tickets\";\nexport const ALERTS_DISPLAY_NAME = \"alerts_display_name\";\nexport const TICKETS_DISPLAY_NAME = \"tickets_display_name\";\nexport const DISPLAY_NAME = \"display_name\";\n\nexport const ALERT_AND_TICKETS_RECORD_COLUMN: {\n  [key in AlertsAndTicketsProperty]: string;\n} = {\n  [ALERTS]: \"Alerts\",\n  [TICKETS]: \"Tickets\",\n  [ALERTS_DISPLAY_NAME]: \"\",\n  [TICKETS_DISPLAY_NAME]: \"\",\n  [DISPLAY_NAME]: \"Display name\",\n};\n","import { useMapStore } from \"pages/hierachy_map\";\nimport { HierachyData } from \"components/charts/D3Hierachy\";\nimport React from \"react\";\nimport {\n  useQuery,\n  useQueries,\n  useMutation,\n  useQueryClient,\n  UseQueryResult,\n} from \"@tanstack/react-query\";\nimport { PieChartItemRender } from \"components/charts/D3Pie\";\nimport sum from \"lodash/sum\";\nimport { isJSONString } from \"utils/isJSONString\";\nimport { RankingChartItem } from \"components/charts/Ranking\";\nimport {\n  activeGeojsonMap,\n  createRegion,\n  deleteEnergyRanking,\n  deleteGeojsonMap,\n  deleteRegion,\n  getAlertsTickets,\n  getCountryStatusList,\n  getEnergyConsumption,\n  getEnergyRanking,\n  getGeojsonMapOfACountry,\n  getPropertyList,\n  getRegion,\n  getRegionList,\n  operationAlertsTickets,\n  operationEnergyRanking,\n  operationGeojsonMapOfACountry,\n  updateRegion,\n} from \"./Map.services\";\nimport {\n  AlertsAndTickets,\n  Country,\n  EnergyConsumption,\n  EnergyRanking,\n  MapProperty,\n  Region,\n} from \"./Map.typings\";\nimport {\n  convertFromStringToArrayPropertyList,\n  convertMapPropertiesToCoordinates,\n  ENERGY_DENSITY_AREA_BASE_UNIT,\n  findDivideBaseOnValuesEC,\n  formatterValueToLocaleString,\n} from \"./Map.utils\";\nimport {\n  ALERTS,\n  ALERTS_DISPLAY_NAME,\n  TICKETS,\n  TICKETS_DISPLAY_NAME,\n} from \"./Map.constant\";\n\n/**\n * useCountryStatusList\n * This hook will use to fetch list country (use to know which country actived too)\n * @returns UseQueryResult<CountryStatusListResponse, unknown>\n */\nexport const useCountryStatusList = () => {\n  const { actionSetSelectedCountry } = useMapStore();\n  const countryStatusListQuery = useQuery(\n    [\"country-status-list\"],\n    async () => {\n      const res = await getCountryStatusList();\n      return res?.data || [];\n    },\n    {\n      onSuccess: (data) => {\n        let activedCountry = -1;\n        if (data.length > 0) {\n          activedCountry = data.find((c) => c.actived)?.id || -1;\n        }\n        actionSetSelectedCountry(activedCountry);\n      },\n      placeholderData: [],\n    }\n  );\n  return countryStatusListQuery;\n};\n/**\n * useSelectedCountry\n * This hook will use to find selected country by id\n * @returns Country\n */\nexport const useSelectedCountry = () => {\n  const { country: countryId, geojsonPropertyList } = useMapStore();\n  const { data = [] } = useCountryStatusList();\n  return {\n    country:\n      data.find((c: Country) => c.id === countryId) ||\n      ({ id: -1, country: \"\", actived: false } as Country),\n    propertyList:\n      geojsonPropertyList.find((d) => d.countryId === countryId)\n        ?.propertyList || [],\n  };\n};\n\n/**\n * useActivedCountry\n * This hook will use to determine data of country actived\n * @returns {\n *  country: Country;\n *  countryName: string;\n * }\n */\nexport const useActivedCountry = () => {\n  const { data: countries = [] } = useCountryStatusList();\n  const defaultCountry: Country | undefined = countries.find(\n    (c: Country) => c.actived\n  );\n  return {\n    country: defaultCountry,\n    countryName: defaultCountry?.country || \"\",\n  };\n};\n\n/**\n * useRegionList\n * This hook will use to region list country actived\n * @returns UseQueryResult<string[], unknown>\n */\nexport const useRegionList = () => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const query = useQuery(\n    [\"regionlist\", country],\n    async () => {\n      const res = await getRegionList(country);\n      return res?.data || [];\n    },\n    {\n      enabled: !!country,\n    }\n  );\n  return query;\n};\n\n/**\n * usePropertyList\n * This hook will use to fetch list property name of country actived\n * @returns UseQueryResult<string[], unknown>\n */\nexport const usePropertyList = () => {\n  const {\n    country: { country, id: countryId },\n  } = useSelectedCountry();\n  const { actionSetGeojsonPropertyList } = useMapStore();\n  const propertyListQuery = useQuery(\n    [\"property-list\", country],\n    async () => {\n      const res = await getPropertyList(country);\n      const list = res?.data.split(\",\") || [];\n      return list;\n    },\n    {\n      enabled: !!country,\n      onSuccess: (propertyList: string[]) => {\n        actionSetGeojsonPropertyList({ countryId, propertyList });\n      },\n    }\n  );\n  return propertyListQuery;\n};\n\n/**\n * useGeojsonCountry\n * This hook will use to fetch geojson string of country actived\n * @returns UseQueryResult<string, unknown>\n */\nexport const useGeojsonCountry = () => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const geojsonCountryQuery = useQuery(\n    [\"geojsonmap\", country],\n    async () => {\n      const res = await getGeojsonMapOfACountry(country);\n      return res.data || \"\";\n    },\n    {\n      enabled: !!country,\n    }\n  );\n  return geojsonCountryQuery;\n};\n\n/**\n * useRegionListData\n * This hook will use to region list data of country actived\n * 1/ Fetch region list of country\n * 2/ Fetch region details\n * 3/ Re-mapping data\n * @returns {\n * isLoading: boolean;\n * regionList: Region[];\n * regions: string[];\n * regionMapProperties: MapProperty[];\n * regionListIds: number[];\n * regionListName: string[];\n * }\n */\nexport const useRegionListData = () => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const { data = [] } = useRegionList();\n  const regionQueries = useQueries({\n    queries: data.map((region: string) => ({\n      queryKey: [\"region-details\", region, country],\n      queryFn: () => getRegion(country, region),\n      enabled: data?.length > 0,\n    })),\n  });\n  return React.useMemo(() => {\n    const isLoading = regionQueries.some(\n      (regionQuery) => regionQuery.isLoading\n    );\n    const regionList = regionQueries\n      .map((regionQuery) => regionQuery.data?.data)\n      .filter((r) => !!r)\n      .map((r) => {\n        const { energy_densisty_YTD } = r as Region;\n        const { divide, unit, minFractionDigits } = findDivideBaseOnValuesEC(\n          [energy_densisty_YTD],\n          true\n        );\n        return {\n          ...r,\n          energy_densisty_YTD_formatted: energy_densisty_YTD\n            ? formatterValueToLocaleString({\n                value: energy_densisty_YTD,\n                unit,\n                divide,\n                fractionDigits: minFractionDigits,\n              })\n            : \"-\",\n          buildings_formatted: r?.buildings\n            ? formatterValueToLocaleString({\n                value: r?.buildings,\n              })\n            : \"-\",\n          floor_area_formatted: r?.floor_area\n            ? formatterValueToLocaleString({\n                value: r?.floor_area,\n                unit: ENERGY_DENSITY_AREA_BASE_UNIT,\n              })\n            : \"-\",\n          active_alerts_formatted: r?.active_alerts || \"-\",\n          open_tickets_formatted: r?.open_tickets || \"-\",\n        };\n      }) as Region[];\n    const regionListIds = regionList.map((r) => r.id);\n    const regionListName = regionList.map((r) => r.regionname);\n    const regionMapProperties = regionList.map(\n      ({ id, regionname, map_properties }) => {\n        const mapPropertiesParse =\n          !!map_properties && isJSONString(map_properties)\n            ? JSON.parse(map_properties)\n            : undefined;\n        const mapProperties =\n          typeof mapPropertiesParse !== \"undefined\"\n            ? mapPropertiesParse\n            : [regionname];\n        const result = {\n          id,\n          name: regionname,\n          mapProperties,\n        };\n        return result;\n      }\n    ) as unknown[] as MapProperty[];\n    return {\n      isLoading,\n      regionList,\n      regions: data,\n      regionMapProperties,\n      regionListIds,\n      regionListName,\n    };\n  }, [regionQueries]);\n};\n\n/**\n * useHierachyCountryData\n * This hook will use to get hierachy data of country actived\n * @returns HierachyData\n */\nexport const useHierachyCountryData = () => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const { data: jsonString = \"\" } = useGeojsonCountry();\n  const geojson = isJSONString(jsonString) ? JSON.parse(jsonString) : {};\n  return {\n    id: country,\n    name: country,\n    geometry: geojson,\n    children: [],\n  } as HierachyData;\n};\n\n/**\n * useGeojsonRegions\n * This hook will use to get geojson of each region base on property name of country actived\n * Each region will be a collection of properties name -> we have to convert from regions -> coordinates\n * @returns {\n * geojsonRegions:HierachyData;\n * isLoading: boolean;\n * }\n */\nexport const useGeojsonRegions = () => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const { isLoading: loadingGeojson } = useGeojsonCountry();\n  const hierachyData = useHierachyCountryData();\n  const {\n    regionMapProperties,\n    regionListName,\n    isLoading: loadingRegionList,\n  } = useRegionListData();\n  const { data: propertyList, isLoading: loadingPropertyList } =\n    usePropertyList();\n  return React.useMemo(() => {\n    const { features: regionCoordinates } = convertMapPropertiesToCoordinates(\n      regionMapProperties,\n      hierachyData\n    );\n    let geojson: { type: string; features: any[] } = {\n      type: \"FeatureCollection\",\n      features: [],\n    };\n    if (hierachyData) {\n      const { geometry } = hierachyData;\n      let { features } = geometry;\n      try {\n        features = [...features, ...regionCoordinates];\n        geojson = { ...geometry, features };\n      } catch (error) {\n        //\n      }\n    }\n    return {\n      geojsonRegions: {\n        id: country,\n        name: country,\n        geometry: geojson,\n        children: [],\n        regions: regionListName,\n      } as HierachyData,\n      isLoading: loadingGeojson || loadingPropertyList || loadingRegionList,\n    };\n  }, [\n    hierachyData,\n    regionMapProperties,\n    propertyList,\n    regionListName,\n    loadingGeojson,\n    loadingPropertyList,\n    loadingRegionList,\n    country,\n  ]);\n};\n\n/**\n * useMutationDeleteCountry\n * This hook will use to remove country\n * Will reload 'country-status-list' after remove success\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationDeleteCountry = () => {\n  const queryClient = useQueryClient();\n  const deleteCountryMutation = useMutation(\n    (countryId: number) => deleteGeojsonMap(countryId),\n    {\n      onSuccess() {\n        queryClient.invalidateQueries([\"country-status-list\"]);\n      },\n    }\n  );\n  return deleteCountryMutation;\n};\n\n/**\n * useMutationUpdateActiveCountry\n * This hook will use to update status country => active\n * Will reload 'country-status-list' after remove success\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationUpdateActiveCountry = () => {\n  const queryClient = useQueryClient();\n  const mutation = useMutation(\n    (countryId: number) => activeGeojsonMap(countryId),\n    {\n      onSuccess() {\n        queryClient.invalidateQueries([\"country-status-list\"]);\n      },\n    }\n  );\n  return mutation;\n};\n\n/**\n * useMutationCreateRegion\n * This hook will use to auto generate region\n * Will reload 'country-status-list' after remove success\n * @returns  UseMutationResult<({\n    data: Region;\n} & APIResponse)[], unknown, void, unknown>\n */\nexport const useMutationAutoGenerateRegion = () => {\n  const queryClient = useQueryClient();\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const mutation = useMutation(\n    async () => {\n      const res = await getPropertyList(country);\n      const propertyList = convertFromStringToArrayPropertyList(res.data);\n      await Promise.all(\n        propertyList.map((region) => createRegion(country, region, {}))\n      );\n      return propertyList;\n    },\n    {\n      onSuccess: (regions: string[]) => {\n        queryClient.refetchQueries([\"regionlist\", country]);\n        regions.forEach((region) => {\n          const key = [\"region-details\", region, country];\n          queryClient.refetchQueries(key, { type: \"all\", exact: true });\n        });\n      },\n    }\n  );\n  return mutation;\n};\n\n/**\n * useMutationDeleteRegion\n * This hook will use to remove region\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationDeleteRegion = () => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const queryClient = useQueryClient();\n  const mutation = useMutation((regionId: number) => deleteRegion(regionId), {\n    onSuccess() {\n      queryClient.refetchQueries([\"regionlist\", country]);\n    },\n  });\n  return mutation;\n};\n\n/**\n * useMutationOperationRegion\n * This hook will use to create / update region\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationOperationRegion = ({\n  isCreate,\n}: {\n  isCreate: boolean;\n}) => {\n  const {\n    country: { country },\n  } = useSelectedCountry();\n  const queryClient = useQueryClient();\n  const mutation = useMutation(\n    async ({ region, info }: { region: string; info: any }) => {\n      if (isCreate) {\n        await createRegion(country, region, info);\n      } else {\n        await updateRegion(country, region, info);\n      }\n      return region;\n    },\n    {\n      onSuccess(region: string) {\n        if (isCreate) {\n          queryClient.refetchQueries([\"regionlist\", country]);\n        } else {\n          const key = [\"region-details\", region, country];\n          queryClient.refetchQueries(key, { type: \"all\", exact: true });\n        }\n      },\n    }\n  );\n  return mutation;\n};\n\n/**\n * useMutationCreateGeojsonMapOfACountry\n * This hook will use to create/update geojson map of a country\n * Will reload 'country-status-list' or 'geojsonmap'\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationOperationGeojsonMapOfACountry = ({\n  isCreate,\n}: {\n  isCreate: boolean;\n}) => {\n  const queryClient = useQueryClient();\n  const mutation = useMutation(\n    async ({\n      country,\n      geojson,\n    }: {\n      country: string;\n      geojson: d3.GeoGeometryObjects | any;\n    }) => {\n      await operationGeojsonMapOfACountry(country, geojson);\n      return country;\n    },\n    {\n      onSuccess(country: string) {\n        if (isCreate) {\n          queryClient.refetchQueries([\"country-status-list\"]);\n        } else {\n          queryClient.refetchQueries([\"geojsonmap\", country]);\n        }\n      },\n    }\n  );\n  return mutation;\n};\n\n/**\n * This function use for get energy consumption of actived country\n * @returns UseQueryResult<\n  EnergyConsumption[],\n  unknown\n>\n */\nexport const useQueryEnergyConsumption: () => UseQueryResult<\n  EnergyConsumption[],\n  unknown\n> = () => {\n  const { countryName: country } = useActivedCountry();\n  const query = useQuery(\n    [`energy-consumption-${country}`],\n    async () => {\n      let result: EnergyConsumption[] = [];\n      try {\n        const res = await getEnergyConsumption(country);\n        result = res?.data || [];\n      } catch (error) {\n        //\n      }\n      return result;\n    },\n    { enabled: !!country, placeholderData: [] }\n  );\n  return query;\n};\n\nexport const useEnergyConsumptionData = () => {\n  const query = useQueryEnergyConsumption();\n  const { data = [], isLoading } = query;\n  return React.useMemo(() => {\n    const values = data.map((i) => i.energyconsumption);\n    const { divide, unit } = findDivideBaseOnValuesEC(values);\n    const energyConsumptionData =\n      data.map(({ regionname, energyconsumption }: EnergyConsumption) => ({\n        id: regionname,\n        label: regionname,\n        value: energyconsumption / divide,\n      })) || [];\n    const total = sum(energyConsumptionData.map((i) => i.value));\n    const formatterValue = (item: PieChartItemRender) =>\n      `${formatterValueToLocaleString({\n        value: item.value,\n        divide: 1,\n        unit,\n      })} | ${item.percent}%`;\n    const renderTooltipValue = (item: PieChartItemRender) =>\n      `${item.label} - ${formatterValueToLocaleString({\n        value: item.value,\n        divide: 1,\n        unit,\n      })} | ${item.percent}%`;\n    const result = {\n      donutText: !isLoading\n        ? `${formatterValueToLocaleString({ value: total, divide: 1, unit })}`\n        : \"-\",\n      subDonutText: \"YTD Energy\",\n      pieData: energyConsumptionData,\n      isLoading,\n      formatterValue,\n      renderTooltipValue,\n    };\n    return result;\n  }, [query]);\n};\n\n/**\n * useQueryEnergyRanking\n * This hook will use to query energy ranking\n * @param country: string\n * @returns UseQueryResult<EnergyRanking[] | undefined, unknown>\n */\nexport const useQueryEnergyRanking = (country: string) => {\n  const query = useQuery(\n    [`energy-ranking-${country}`],\n    async () => {\n      try {\n        const res = await getEnergyRanking(country);\n        return res.data || [];\n      } catch (error) {\n        //\n      }\n    },\n    { enabled: !!country, placeholderData: [] }\n  );\n  return query;\n};\n\n/**\n * useEnergyRankingData\n * This hook will use to get energy ranking data\n * @param isDensity: boolean;\n * @param country: string\n * @returns { isLoading: boolean; data: RankingChartItem[]; unit: string; minFractionDigits: number;dataResource: EnergyRanking[];}\n */\nexport const useEnergyRankingData: (\n  isDensity: boolean,\n  country: string\n) => {\n  isLoading: boolean;\n  data: RankingChartItem[];\n  unit: string;\n  minFractionDigits: number;\n  dataResource: EnergyRanking[];\n} = (isDensity, country) => {\n  const query = useQueryEnergyRanking(country);\n  const { data = [], isLoading } = query;\n  return React.useMemo(() => {\n    const values = data.map((i) => (isDensity ? i.energy_density : i.energy));\n    const { divide, unit, minFractionDigits } = findDivideBaseOnValuesEC(\n      values,\n      isDensity\n    );\n    const dataResource: EnergyRanking[] = [];\n    const result = {\n      isLoading,\n      data: data.map((i) => {\n        const { energy, energy_density, id, buildingname } = i;\n        const value = isDensity ? energy_density : energy;\n        const dividedValue = value / divide;\n        return {\n          id: String(id),\n          label: buildingname,\n          value: dividedValue,\n        };\n      }) as RankingChartItem[],\n      unit,\n      minFractionDigits,\n      dataResource,\n    };\n    return result;\n  }, [query, isDensity]);\n};\n\n/**\n * useMutationOperationEnergyRanking\n * This hook will use to create / update energy ranking\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationOperationEnergyRanking = (country: string) => {\n  const queryClient = useQueryClient();\n  const mutation = useMutation(\n    async ({ buildingname, info }: { buildingname: string; info: any }) => {\n      await operationEnergyRanking(country, buildingname, info);\n    },\n    {\n      onSuccess() {\n        queryClient.refetchQueries([`energy-ranking-${country}`]);\n      },\n    }\n  );\n  return mutation;\n};\n\n/**\n * useMutationDeleteEnergyRanking\n * This hook will use to remove energy ranking record\n * @returns UseMutationResult<APIResponse, unknown, number, unknown>\n */\nexport const useMutationDeleteEnergyRanking = (country: string) => {\n  const queryClient = useQueryClient();\n  const mutation = useMutation(\n    (regionId: number) => deleteEnergyRanking(regionId),\n    {\n      onSuccess() {\n        queryClient.refetchQueries([`energy-ranking-${country}`]);\n      },\n    }\n  );\n  return mutation;\n};\n\n/**\n * useQueryAlertsAndTickets\n * This hook will use for query alerts and tickets data\n * @returns UseMutationResult<AlertsAndTickets, unknown, number, unknown>\n */\nexport const useQueryAlertsAndTickets = (country: string) => {\n  const query = useQuery([`alerts-and-tickets-${country}`], async () => {\n    const response = await getAlertsTickets(country);\n    return response.data;\n  });\n  return query;\n};\n\n/**\n * useQueryAlertsAndTicketsData\n * This hook will use for mapping alerts and tickets data\n * @returns { isLoading: boolean; alerts: string; tickets: string; resource: AlertsAndTickets | undefined;}\n */\nexport const useQueryAlertsAndTicketsData: (country: string) => {\n  isLoading: boolean;\n  alertsFormatted: string;\n  ticketsFormatted: string;\n  alertsDisplayName: string;\n  ticketsDisplayName: string;\n  resource: AlertsAndTickets | undefined;\n} = (country) => {\n  const query = useQueryAlertsAndTickets(country);\n  return React.useMemo(() => {\n    const { data, isLoading } = query;\n    if (!data) {\n      return {\n        isLoading,\n        resource: undefined,\n        alertsFormatted: \"-\",\n        ticketsFormatted: \"-\",\n        alertsDisplayName: \"-\",\n        ticketsDisplayName: \"-\",\n      };\n    }\n    const result = {\n      isLoading,\n      alertsFormatted: `${data[ALERTS]}`,\n      ticketsFormatted: `${data[TICKETS]}`,\n      resource: data,\n      alertsDisplayName: data[ALERTS_DISPLAY_NAME],\n      ticketsDisplayName: data[TICKETS_DISPLAY_NAME],\n    };\n    return result;\n  }, [query]);\n};\n\nexport const useMutationAlertsAndTickets = (country: string) => {\n  const queryClient = useQueryClient();\n  const mutation = useMutation(\n    (info: {\n      [ALERTS]: number;\n      [TICKETS]: number;\n      [ALERTS_DISPLAY_NAME]: string;\n      [TICKETS_DISPLAY_NAME]: string;\n    }) => operationAlertsTickets({ country, ...info }),\n    {\n      onSuccess() {\n        queryClient.refetchQueries([`alerts-and-tickets-${country}`]);\n      },\n    }\n  );\n  return mutation;\n};\n","import React from \"react\";\nimport useWindowDimensions from \"hooks/useWindowDimensions\";\nimport { D3HierachyChart3D } from \"components/charts/D3Hierachy\";\nimport Panel from \"components/core/Panel\";\nimport isEqual from \"lodash/isEqual\";\nimport toUpper from \"lodash/toUpper\";\nimport BreakLine from \"components/core/BreakLine\";\nimport appStyle from \"styles/App.module.scss\";\nimport { Region } from \"./Map.typings\";\nimport { useGeojsonRegions, useRegionListData } from \"./Map.hooks\";\nimport styles from \"./Map.style.module.scss\";\n\nconst HierachyMap = () => {\n  const { height } = useWindowDimensions();\n  const { geojsonRegions, isLoading } = useGeojsonRegions();\n  const { regionList } = useRegionListData();\n  const renderTooltip = ({ name }: { name: string }) => {\n    let child = null;\n    const upperName = toUpper(name);\n    const regionHover = regionList.find((r: Region) =>\n      isEqual(upperName, r.regionname)\n    );\n    if (regionHover) {\n      const {\n        energy_densisty_YTD_formatted,\n        buildings_formatted,\n        floor_area_formatted,\n        active_alerts_formatted,\n        open_tickets_formatted,\n      } = regionHover as unknown as Region;\n      child = (\n        <>\n          <div\n            className=\"grid items-center gap-2 justify-between\"\n            style={{\n              gridTemplateColumns: \"repeat(2, minmax(100px, 50%))\",\n            }}\n          >\n            <div className=\"text-xs truncate text-gray-400\">{`${buildings_formatted} Buildings`}</div>\n            <div className=\"text-right text-xs truncate text-gray-400\">\n              {floor_area_formatted}\n            </div>\n          </div>\n          <BreakLine className=\"my-2\" />\n          <div className=\"flex flex-row justify-around gap-3 p-3\">\n            {[\n              {\n                title: \"Energy Density YTD\",\n                value: energy_densisty_YTD_formatted,\n              },\n              {\n                title: \"Active Alerts\",\n                value: active_alerts_formatted,\n              },\n              {\n                title: \"Open Tickets\",\n                value: open_tickets_formatted,\n              },\n            ].map(({ title, value }) => (\n              <div key={title}>\n                <div className=\"text-sm font-medium text-white text-center truncate mb-1 sub-font\">\n                  {value}\n                </div>\n                <div className=\"text-xs text-gray-500 truncate\">{title}</div>\n              </div>\n            ))}\n          </div>\n        </>\n      );\n    } else {\n      child = <div className={`${appStyle.absCenter}`}>Not data yet!</div>;\n    }\n\n    return (\n      <Panel\n        className={`w-fit min-w-[380px] max-w-[400px] h-auto min-h-[150px] ${styles.tooltipHierachyMap}`}\n        title={upperName}\n        panelTitleClassName=\"text-sm\"\n        classNameBlockTitle=\"mb-2\"\n      >\n        {!!child && child}\n      </Panel>\n    );\n  };\n\n  return (\n    <D3HierachyChart3D\n      data={{\n        hierachy: geojsonRegions,\n        width: \"auto\",\n        height: height - 240,\n      }}\n      renderTooltip={renderTooltip}\n      isLoading={isLoading}\n      classNameContainer=\"z-1\"\n    />\n  );\n};\n\nexport default React.memo(HierachyMap);\n","import Panel from \"components/core/Panel\";\nimport React from \"react\";\nimport style from \"./Map.style.module.scss\";\nimport { useActivedCountry, useQueryAlertsAndTicketsData } from \"./Map.hooks\";\n\nconst AlertsAndTickets = () => {\n  const { countryName: country } = useActivedCountry();\n  const {\n    alertsFormatted,\n    ticketsFormatted,\n    alertsDisplayName,\n    ticketsDisplayName,\n    isLoading,\n  } = useQueryAlertsAndTicketsData(country);\n  return (\n    <Panel\n      title={`${alertsDisplayName} & ${ticketsDisplayName}`}\n      isLoading={isLoading}\n      classNameBlockTitle=\"mb-3\"\n      panelTitleClassName=\"text-base\"\n    >\n      <div\n        className={`grid items-center gap-8 justify-center abs-center ${style.blockAlertsAndTickets} w-[100%]`}\n      >\n        {[\n          {\n            label: `Total ${alertsDisplayName}`,\n            value: alertsFormatted,\n            sub: \"\",\n            icon: (\n              <i className=\"fa-solid fa-triangle-exclamation text-red-500 fa-2x\" />\n            ),\n          },\n          {\n            label: `Total ${ticketsDisplayName}`,\n            value: ticketsFormatted,\n            sub: \"\",\n            icon: <i className=\"fa-solid fa-list text-yellow-500 fa-2x\" />,\n          },\n        ].map(({ label, value, sub, icon }, index) => (\n          <div\n            key={label}\n            className={`flex flex-col justify-center items-center ${\n              index === 0 ? \"justify-self-end\" : \"justify-self-start\"\n            }`}\n          >\n            <div className=\"text-sm text-gray-500 font-medium mb-2\">\n              {label}\n            </div>\n            <div\n              className={`grid items-center gap-3 ${style.alertAndTicketExtra}`}\n            >\n              <div>{icon}</div>\n              <div className=\"text-2xl sub-font font-medium truncate text-center\">\n                {value}\n              </div>\n              <div className=\"text-xs text-gray-500\">{sub}</div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </Panel>\n  );\n};\n\nexport default React.memo(AlertsAndTickets);\n","// extracted by mini-css-extract-plugin\nexport default {\"ranking-item\":\"Ranking_style_ranking-item__sqsW-\"};","import _orderBy from \"lodash/orderBy\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport sum from \"lodash/sum\";\nimport { RankingChartItem } from \"./Ranking.typings\";\nimport style from \"./Ranking.style.module.scss\";\n\ninterface IProps {\n  data: {\n    rankingData: RankingChartItem[];\n    topRanking?: number;\n    orderBy?: \"asc\" | \"desc\";\n    formatterValue?: (item: RankingChartItem) => string;\n  };\n  rankingChartContainerClassName?: string | any;\n}\nconst D3Ranking: React.FC<IProps> = ({\n  data: { rankingData, topRanking = 5, orderBy = \"desc\", formatterValue },\n  rankingChartContainerClassName,\n}: IProps) => {\n  const values = React.useMemo(\n    () => rankingData.map((i) => i.value),\n    [rankingData]\n  );\n  const total = React.useMemo(() => sum(values), [values]);\n  const sorted = React.useMemo(\n    () => _orderBy(rankingData, (i) => i.value, orderBy),\n    [rankingData, orderBy]\n  );\n  return (\n    <div\n      className={`ranking-chart-container ${classNames(\n        rankingChartContainerClassName\n      )}`}\n    >\n      {sorted.slice(0, topRanking).map((item) => (\n        <div\n          className={`ranking-item grid items-center gap-5 mb-2 ${classNames(\n            style[\"ranking-item\"]\n          )}`}\n          key={item.id}\n        >\n          <div className=\"font-medium text-xs text-gray-500 truncate capitalize\">\n            {item.label}\n          </div>\n          <div className=\"bg-transparent h-2 rounded relative w-[100%] min-w-[100px]\">\n            <div\n              className=\"rounded bg-blue-500 absolute top-0 left-0 h-[100%]\"\n              style={{\n                width: `${(item.value / total) * 100}%`,\n              }}\n            />\n          </div>\n          <div className=\"font-normal text-xs text-white truncate text-right\">\n            {typeof formatterValue === \"function\"\n              ? formatterValue(item)\n              : item.value}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nD3Ranking.defaultProps = {\n  rankingChartContainerClassName: \"\",\n};\n\nexport default React.memo(D3Ranking);\n","import RankingChart from \"./Ranking\";\n\nexport * from \"./Ranking.typings\";\n\nexport default RankingChart;\n","import Panel from \"components/core/Panel\";\nimport D3Ranking from \"components/charts/Ranking\";\nimport React from \"react\";\nimport { Button } from \"antd\";\nimport styles from \"./Map.style.module.scss\";\nimport { useActivedCountry, useEnergyRankingData } from \"./Map.hooks\";\nimport { formatterValueToLocaleString } from \"./Map.utils\";\n\nconst factories = [\n  {\n    key: \"energy\",\n    tab: \"Energy\",\n  },\n  {\n    key: \"energy-density\",\n    tab: \"Energy Density\",\n  },\n];\n\nconst Ranking = () => {\n  const [selected, setSelected] = React.useState(factories[0].key);\n  const { countryName: country } = useActivedCountry();\n  const { data, isLoading, unit, minFractionDigits } = useEnergyRankingData(\n    selected === \"energy-density\",\n    country\n  );\n  return (\n    <Panel\n      title=\"Ranking\"\n      sub={\n        <div className=\"flex justify-end\">\n          {factories.map(({ key, tab }) => {\n            const isSelected = key === selected;\n            return (\n              <Button\n                key={key}\n                onClick={() => setSelected(key)}\n                type={isSelected ? \"primary\" : \"default\"}\n              >\n                {tab}\n              </Button>\n            );\n          })}\n        </div>\n      }\n      isLoading={isLoading}\n      classNameBlockTitle={`${styles.blockRankingTitle} mb-3`}\n      panelTitleClassName=\"text-base\"\n    >\n      <D3Ranking\n        data={{\n          rankingData: data,\n          formatterValue: ({ value }) =>\n            formatterValueToLocaleString({\n              value,\n              divide: 1,\n              unit,\n              fractionDigits: minFractionDigits,\n            }),\n        }}\n      />\n    </Panel>\n  );\n};\n\nexport default React.memo(Ranking);\n","import Panel from \"components/core/Panel\";\nimport D3PieChart from \"components/charts/D3Pie\";\nimport React from \"react\";\nimport { useEnergyConsumptionData } from \"./Map.hooks\";\n\nconst EnergyConsumption = () => {\n  const {\n    pieData,\n    donutText,\n    subDonutText,\n    isLoading,\n    formatterValue,\n    renderTooltipValue,\n  } = useEnergyConsumptionData();\n  return (\n    <Panel\n      title=\"Energy Consumption\"\n      isLoading={isLoading}\n      classNameBlockTitle=\"mb-3\"\n      panelTitleClassName=\"text-base\"\n    >\n      <D3PieChart\n        data={{\n          size: 125,\n          pieData,\n          formatterValue,\n          quantitiesItemOnChart: 5,\n          donutText,\n          subDonutText,\n          renderTooltipValue,\n        }}\n      />\n    </Panel>\n  );\n};\n\nexport default React.memo(EnergyConsumption);\n","import React from \"react\";\nimport bg from \"assets/images/background-map.png\";\nimport style from \"./Map.style.module.scss\";\nimport HierachyMap from \"./Map.HierachyMap\";\nimport AlertsAndTickets from \"./Map.AlertsAndTickets\";\nimport Ranking from \"./Map.Ranking\";\nimport EnergyConsumption from \"./Map.EnergyConsumption\";\n\nconst MapPage = () => (\n  <div className=\"relative min-h-screen\">\n    <div\n      className=\"bg-no-repeat bg-center bg-auto opacity-50 absolute left-0 top-0 w-[100%] h-[100%]\"\n      style={{\n        backgroundImage: `url(${bg})`,\n      }}\n    />\n    <div className={style.bgFlash} />\n    <HierachyMap />\n    <div\n      className={`extra grid gap-8 mt-5 absolute bottom-0 left-0 z-50 px-5 pb-3 ${style.extra}`}\n    >\n      <EnergyConsumption />\n      <Ranking />\n      <AlertsAndTickets />\n    </div>\n  </div>\n);\nexport default React.memo(MapPage);\n","import { createStore } from \"zustand-store\";\nimport { GeojsonPropertyList } from \"./Map.typings\";\n\ntype IState = {\n  country: number;\n  geojsonPropertyList: GeojsonPropertyList[];\n};\n\ninterface IActions {\n  actionSetSelectedCountry: (country: number) => any;\n  actionSetGeojsonPropertyList: (data: GeojsonPropertyList) => any;\n}\n\nconst initialState = {\n  country: -1,\n  geojsonPropertyList: [],\n};\n\nexport const [useMapStore, { getState }] = createStore<IState & IActions>(\n  (set, get) => ({\n    ...initialState,\n    actionSetSelectedCountry: (country) => set({ country }),\n    actionSetGeojsonPropertyList: (data) =>\n      set({ geojsonPropertyList: [...get().geojsonPropertyList, data] }),\n  }),\n  \"MapStore\"\n);\n","import Map from \"./Map\";\n\nexport * from \"./Map.zustand\";\nexport * from \"./Map.services\";\nexport * from \"./Map.hooks\";\nexport * from \"./Map.typings\";\nexport * from \"./Map.constant\";\nexport * from \"./Map.utils\";\n\nexport default Map;\n","/**\n * isJSONString is a function to check a valid json string\n * reference link: https://thewebdev.info/2021/06/12/how-to-check-if-a-string-is-json-in-javascript/\n * @param jsonString - a json string\n * @returns boolean\n */\nexport const isJSONString = (jsonString: string) => {\n  let result = true;\n  try {\n    JSON.parse(jsonString);\n  } catch (e) {\n    result = false;\n  }\n  return result;\n};\n"],"names":["D3Chart","React","props","ref","refSVG","chartName","isLoading","classNameContainer","classNameSVGChart","children","className","classNames","Loading","defaultProps","$echartsMap","Stack","stack","this","item","push","pop","isEmpty","undefined","size","length","stack3D","createHierachyChart3D","paramsFnc","$echartMapEle","hierachy","container","renderTooltip","width","height","$container","d3","dispose","geometry","name","nameProperty","id","append","attr","node","echarts","showLoading","mapName","mapEcharts","regions","scaleColor","defaultAreaColor","rbgShadowColor","opacity","rgbaShadowColor","String","options","geo","map","zoom","roam","animation","label","show","itemStyle","areaColor","shadowColor","shadowOffsetX","shadowOffsetY","series","type","selectedMode","color","shadowBlur","emphasis","data","r","rgbColor","emphasisShadowColor","focus","tooltip","trigger","formatter","params","feature","features","find","f","isEqual","properties","padding","borderWidth","setOption","hideLoading","renderEchartsMap","isStackEmpty","handleEvent","child","dataIndex","c","on","peek","option","getOption","center","error","D3Hierachy","rest","callbackRenderTooltip","dt","$tooltip","Object","entries","key","value","styles","ReactDOM","current","remove","D3Tooltip","style","visibility","wrap","selector","self","textLength","getComputedTextLength","text","slice","calculatePercent","total","precision","p","floor","D3Pie","pieData","dataResource","donutText","subDonutText","quantitiesItemOnChart","pieChartContainerClassName","formatterValue","renderTooltipValue","refContainer","event","pageX","pageY","left","top","renderToString","zIndex","Number","MAX_SAFE_INTEGER","sum","i","inputPieData","percent","pieDataSorted","orderBy","persist","remain","renderTooltipPieChart","d","index","tooltipVal","selectChild","html","renderPieChartInfo","gridTemplateColumns","backgroundColor","svg","donut","radius","$svg","$g","pie","innerRadius","outerRadius","arc","selectAll","enter","each","createPieChart","isCenterAbsolute","appStyle","getWindowDimensions","window","innerWidth","innerHeight","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","STANDARD_ENERGY_CONSUMPTION_UNIT","ENERGY_BASE_UNIT","ENERGY_DENSITY_AREA_BASE_UNIT","CARBON_BASE_UNIT","CARBON_DENSITY_BASE_UNIT","EC_UNITS","baseWatt","kgWatt","megaWatt","gigaWatt","convertECByUnit","unit","valConverted","isNaN","findDivideBaseOnValuesEC","values","isDensity","divide","maxValue","max","minFractionDigits","minValue","min","Math","log10","formatterValueToLocaleString","fractionDigits","locale","toLocaleString","minimumFractionDigits","convertMapPropertiesToCoordinates","regionMapProperties","hierachyData","listProperties","forEach","mapProperty","geojson","mapProperties","geojsonMapping","coordinates","split","propertyName","foundCoordinates","gItem","toLower","polygon","createFeature","fItem","uniq","convertFromStringToArrayPropertyList","toUpper","Panel","title","sub","classNameBlockTitle","childrenCenter","panelTitleClassName","BreakLine","http","HTTP","baseURL","controller","requestInit","AbortController","cache","mode","headers","credentials","redirect","referrerPolicy","url","signal","fetch","method","then","res","json","catch","Error","body","JSON","stringify","abort","ENV","getMapGeneral","get","getGeojsonMapOfACountry","country","operationGeojsonMapOfACountry","post","getPropertyList","getRegion","region","createRegion","updateInfo","regionname","updateRegion","put","deleteRegion","getAlertsTickets","operationAlertsTickets","getEnergyConsumption","getEnergyRanking","getListCountry","getRegionList","deleteGeojsonMap","countryId","delete","activeGeojsonMap","getCountryStatusList","operationEnergyRanking","buildingname","deleteEnergyRanking","REGION_NAME","REGION_COORDINATES","REGION_ENERGY_CONSUMPTION","REGION_ENERGY_DENSITY_CONSUMPTION","REGION_OPEN_TICKETS","REGION_ALERT_TICKETS","REGION_BUILDINGS","REGION_FLOOR_AREA","REGION_TIME","REGION_RECORD_COLUMN","ENERGY_RANKING_BUILDING_NAME","ENERGY_RANKING_ENERGY","ENERGY_RANKING_ENERGY_DENSITY","ENERGY_RANKING_RECORD_COLUMN","GEOJSON_INFO_COUNTRY","GEOJSON_INFO_DATA","GEOJSON_INFO_RECORD_COLUMN","ALERTS","TICKETS","ALERTS_DISPLAY_NAME","TICKETS_DISPLAY_NAME","DISPLAY_NAME","ALERT_AND_TICKETS_RECORD_COLUMN","useCountryStatusList","actionSetSelectedCountry","useMapStore","useQuery","onSuccess","activedCountry","actived","placeholderData","useSelectedCountry","geojsonPropertyList","propertyList","useActivedCountry","defaultCountry","countryName","useRegionList","enabled","usePropertyList","actionSetGeojsonPropertyList","list","useGeojsonCountry","useRegionListData","regionQueries","useQueries","queries","queryKey","queryFn","some","regionQuery","regionList","filter","energy_densisty_YTD","energy_densisty_YTD_formatted","buildings_formatted","buildings","floor_area_formatted","floor_area","active_alerts_formatted","active_alerts","open_tickets_formatted","open_tickets","regionListIds","regionListName","map_properties","mapPropertiesParse","isJSONString","parse","useHierachyCountryData","jsonString","useGeojsonRegions","loadingGeojson","loadingRegionList","loadingPropertyList","regionCoordinates","geojsonRegions","useMutationDeleteCountry","queryClient","useQueryClient","useMutation","invalidateQueries","useMutationUpdateActiveCountry","useMutationAutoGenerateRegion","Promise","all","refetchQueries","exact","useMutationDeleteRegion","regionId","useMutationOperationRegion","isCreate","mutation","info","useMutationOperationGeojsonMapOfACountry","useQueryEnergyConsumption","result","useEnergyConsumptionData","query","energyconsumption","energyConsumptionData","useQueryEnergyRanking","useEnergyRankingData","energy_density","energy","dividedValue","useMutationOperationEnergyRanking","useMutationDeleteEnergyRanking","useQueryAlertsAndTickets","response","useQueryAlertsAndTicketsData","alertsFormatted","ticketsFormatted","resource","alertsDisplayName","ticketsDisplayName","useMutationAlertsAndTickets","HierachyMap","useWindowDimensions","upperName","regionHover","AlertsAndTickets","icon","D3Ranking","rankingData","topRanking","rankingChartContainerClassName","sorted","_orderBy","factories","tab","Ranking","selected","setSelected","isSelected","onClick","EnergyConsumption","MapPage","backgroundImage","bg","initialState","createStore","set","getState","e"],"sourceRoot":""}
"use strict";(self.webpackChunkpoc_app=self.webpackChunkpoc_app||[]).push([[332],{6170:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(7144),i=n.n(r),a=n(552),o=n(7861),u=n(7770),c=o.forwardRef((function(e,t){var n=t.ref,r=t.refSVG,o=e.chartName,c=e.isLoading,s=e.classNameContainer,l=e.classNameSVGChart,d=e.children;return(0,u.jsxs)("div",{ref:n,className:"relative ".concat(i()(s)),children:[o&&(0,u.jsx)("div",{className:"text-center mb-5 text-xl font-medium",children:o}),c&&(0,u.jsx)(a.Z,{}),r&&(0,u.jsx)("svg",{ref:r,className:"m-auto ".concat(l)}),d&&d]})}));c.defaultProps={chartName:"",isLoading:!1,classNameContainer:"",classNameSVGChart:"",children:null};var s=c},190:function(e,t,n){n.d(t,{Lp:function(){return Z}});var r,i=n(7861),a=n(6170),o=(n(2685),n(1413)),u=n(5638),c=(n(9146),n(5904)),s=n(5671),l=n(3144),d=function(){function e(){(0,s.Z)(this,e),this.stack=void 0,this.stack=[]}return(0,l.Z)(e,[{key:"push",value:function(e){this.stack.push(e)}},{key:"pop",value:function(){this.stack.pop()}},{key:"peek",value:function(){return this.isEmpty()?void 0:this.stack[this.size-1]}},{key:"isEmpty",value:function(){return 0===this.size}},{key:"size",get:function(){return this.stack.length}},{key:"stackItems",get:function(){return this.stack}}]),e}(),f=n(627),m=n.n(f),p=(new d,new d),v=function e(t){var n;try{var i=t.hierachy,a=t.container,s=t.renderTooltip,l=t.width,d=t.height,f=u.Ys(a);if(!i)return void r.dispose();var v=i.geometry,g=i.children,y=void 0===g?[]:g,h=i.name,x=i.nameProperty,N=void 0===x?"name":x,b=i.id;r&&r.dispose(),n=f.append("div").attr("id",b).node(),(r=c.S1(n,void 0,{width:l,height:d})).showLoading(),function(e){var t=e.hierachy,n=e.mapName,r=e.mapEcharts,i=e.nameProperty,a=e.renderTooltip,o=t.geometry,s=t.regions,l=void 0===s?[]:s,d=u.PKp(l,u.Cn1);c.je(n,o);var f="#333D3F",p=u.$_Y(f);p.opacity=.5;var v=String(p),g={geo:{map:n,zoom:1,roam:!0,animation:!1,nameProperty:i,label:{show:!1},itemStyle:{areaColor:f,shadowColor:v,shadowOffsetX:0,shadowOffsetY:10}},series:[{name:"map",type:"map",map:n,selectedMode:!1,roam:!0,label:{show:!1,color:"#ffffff"},itemStyle:{areaColor:f,shadowColor:v,shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{label:{color:"#ffffff"},itemStyle:{areaColor:"#6289AB",shadowColor:v,shadowOffsetX:0,shadowOffsetY:10}},data:l.map((function(e){var t=d(e),n=u.$_Y(t),r=n;r.opacity=1;var i=n;return i.opacity=.5,{name:e,label:{show:!1,color:"#FFF"},itemStyle:{areaColor:t,shadowColor:String(r),shadowOffsetX:0,shadowOffsetY:10},emphasis:{focus:"self",label:{color:"#FFFFFF",show:!0},itemStyle:{areaColor:t,shadowColor:String(i),shadowOffsetX:0,shadowOffsetY:10}}}}))}],tooltip:{show:!0,trigger:"item",formatter:function(e){var t=e.name,n=null===o||void 0===o?void 0:o.features.find((function(e){var n;return m()(null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.name,t)}));return n?a({feature:n,name:t}):""},padding:0,borderWidth:0}};r.setOption(g),r.hideLoading()}({hierachy:i,mapName:h,mapEcharts:r,nameProperty:N,renderTooltip:s});var _=p.isEmpty(),k=function(e){var t,n=e.dataIndex,r=v.features[n];return r&&(t=y.find((function(e){var t;return m()(e.name,null===r||void 0===r||null===(t=r.properties)||void 0===t?void 0:t.name)}))),t};r.on("click",(function(n){var r=k(n);r&&(p.push(i),e((0,o.Z)((0,o.Z)({},t),{},{hierachy:r})))})),r.on("dblclick",(function(n){var r=k(n);if(!_&&!r){var i=p.peek();p.pop(),e((0,o.Z)((0,o.Z)({},t),{},{hierachy:i}))}})),r.on("georoam",(function(e){var t=r.getOption();e.zoom?(t.geo[0].zoom=t.series[0].zoom,t.geo[0].center=t.series[0].center):t.geo[0].center=t.series[0].center,r.setOption(t)}))}catch(C){}return n},g=n(7770),y=n(9439),h=n(4925),x=n(7144),N=n.n(x),b=n(220),_="D3Hierachy_styles_tooltip__IO1VA",k=["data","renderTooltip","isLoading"],C=function(e){var t=e.data,n=e.renderTooltip,r=e.isLoading,c=(0,h.Z)(e,k),s=i.useRef(null),l=function(e){var t,r=e.feature;return t="function"===typeof n?n(e):(0,g.jsx)("div",{children:Object.entries(null===r||void 0===r?void 0:r.properties).map((function(e){var t=(0,y.Z)(e,2),n=t[0],r=t[1];return(0,g.jsxs)("div",{className:"grid gap-3 ".concat(N()(_)),children:[(0,g.jsx)("div",{className:"font-medium text-base text-black",children:n}),r&&(0,g.jsx)("div",{children:r})]},n)}))}),b.renderToString(t)};return i.useEffect((function(){if(!r&&s.current){var e=v((0,o.Z)((0,o.Z)({container:s.current},t),{},{renderTooltip:l}));return function(){e&&u.Ys(e).remove()}}}),[s,t,n]),(0,g.jsx)(a.Z,(0,o.Z)((0,o.Z)({},(0,o.Z)((0,o.Z)({},c),{},{isLoading:r,ref:{ref:s}})),{},{children:!r&&!t.hierachy&&(0,g.jsx)("div",{children:"Geojson is not valid"})}))};C.defaultProps={renderTooltip:void 0};var Z=i.memo(C)},2022:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(3433),i=n(1413),a=n(9439),o=n(4925),u=n(7861),c=n(6170),s=n(7770),l=["value","className"],d=function(e){var t=e.value,n=e.className,r=void 0===n?"":n,a=(0,o.Z)(e,l);return(0,s.jsx)("div",(0,i.Z)((0,i.Z)({className:"tooltip fixed flex justify-center items-center p-[10px] h-[40px] bg-white rounded-[4px] shadow-xl text-black ".concat(r),style:(0,i.Z)({opacity:0,visibility:"hidden"},a.style)},a),{},{children:t&&t}))};d.defaultProps={className:""};var f=u.memo(d),m=n(220),p=f,v=n(5638),g=n(5906),y=n.n(g),h=n(1114),x=n.n(h);function N(e){for(var t=e.selector,n=e.width,r=e.padding,i=void 0===r?0:r,a=v.Ys(t),o=a.node().getComputedTextLength(),u=a.text();o>n-2*i&&u.length>0;)u=u.slice(0,-1),a.text("".concat(u,"...")),o=a.node().getComputedTextLength()}var b=function(e,t,n){var r=e/t*100;return x()(r,n||2)},_=n(2137),k=n.n(_),C=n(7144),Z=n.n(C),E="D3Hexbin_style_pieChartInfo__xKSaP",j=["data"],T=function(e){var t=e.data,n=(0,o.Z)(e,j),l=t.pieData,d=void 0===l?[]:l,f=t.size,g=t.donutText,h=t.subDonutText,x=t.quantitiesItemOnChart,_=void 0===x?5:x,C=t.pieChartContainerClassName,T=void 0===C?"":C,w=t.formatterValue,R=t.renderTooltipValue,L=u.useRef(null),S=u.useRef(null),O=u.useRef(null),A=[u.useCallback((function(e){var t=e.value,n=e.event,r=n.pageX,i=n.pageY,a="".concat(r+20,"px"),o="".concat(i-20,"px");return(0,m.renderToString)((0,s.jsx)(p,{value:t,style:{top:o,left:a,opacity:1,visibility:"visible",zIndex:Number.MAX_SAFE_INTEGER}}))}),[])],D=(0,a.Z)(A,1)[0],M=u.useMemo((function(){var e=k()(d.map((function(e){return e.value}))),t=d.map((function(t){return(0,i.Z)((0,i.Z)({},t),{},{percent:b(t.value,e)})})),n=y()(t,(function(e){return e.value}),"desc");if(n.length>_){var a=n.slice(0,_-1),o=n.slice(_,n.length-1);return[].concat((0,r.Z)(a),[{id:"other",label:"Other",value:k()(o.map((function(e){return e.value})))}]).map((function(t){return(0,i.Z)((0,i.Z)({},t),{},{percent:b(t.value,e)})}))}return n}),[d]),I=u.useMemo((function(){return v.PKp(M,v.Cn1)}),[M]),G=u.useCallback((function(e,t){if(L.current){var n=M[t.index],r=n.value,i=n.label,a="function"===typeof R?m.renderToString(R(n)):"".concat(i," has value = ").concat(r),o=D({value:a,event:e});return v.Ys(L.current).selectChild(".tooltip-container").html(o)}}),[L,M]),P=u.useCallback((function(){return M.map((function(e){var t=e.label,n=e.value,r=e.id;return(0,s.jsxs)("div",{className:"grid gap-2 mb-2 ".concat(E," last:mb-0"),children:[(0,s.jsxs)("div",{className:"grid gap-1 items-center",style:{gridTemplateColumns:"min-content 1fr"},children:[(0,s.jsx)("div",{className:"rounded-full w-2 h-2",style:{backgroundColor:I(e)}}),(0,s.jsx)("div",{className:"font-medium text-sm text-gray-500 truncate",children:t})]}),(0,s.jsx)("div",{className:"font-medium text-base text-white truncate sub-font",children:"function"===typeof w?w(e):n})]},r)}))}),[M,w]);return u.useLayoutEffect((function(){L.current&&O.current&&M&&function(e){var t=e.size,n=e.svg,r=e.data,i=e.donut,a=void 0===i?80:i,o=e.container,u=e.renderTooltip,c=e.scaleColor,s=e.donutText,l=e.subDonutText,d=v.Ys(o),f=t/2,m=v.Ys(n).attr("width",t).attr("height",t);m.html("");var p=m.append("g").attr("transform","translate(".concat(t/2,",").concat(t/2,")")),g=v.ve8(),y=a/100*f,h=f,x=v.Nb1().innerRadius(y).outerRadius(h),b=g(r.map((function(e){return e.value<.1?.1:e.value})));p.selectAll("arc").data(b).enter().append("g").attr("class","arc").append("path").attr("d",x).attr("cursor","pointer").attr("fill",(function(e,t){return c(r[t])})).on("mouseover",(function(e,t){"function"===typeof u&&u(e,t,this)})).on("mouseleave",(function(){"function"===typeof u&&d.selectChild(".tooltip-container").html("")})),s&&p.append("text").attr("class","donut-text").attr("text-anchor","middle").attr("y","0").attr("fill","#FFF").style("font-size","16px").style("font-family","BPDS_Iconfont").style("font-style","normal").style("font-weight","400").text(s).each((function(){return N({selector:this,width:2*y,padding:0})})),l&&p.append("text").attr("class","donut-text").attr("text-anchor","middle").attr("y","20").attr("fill","#6b7280").style("font-size","12px").text(l).each((function(){return N({selector:this,width:2*y,padding:0})}))}({svg:O.current,container:L.current,renderTooltip:G,data:M,size:f,scaleColor:I,donutText:g,subDonutText:h})}),[L,O,S,t,I,f]),(0,s.jsx)("div",{className:"pie-chart-container ".concat(Z()(T)),children:(0,s.jsxs)("div",{className:"pie-chart grid gap-5 items-center",style:{gridTemplateColumns:"".concat(f,"px 1fr")},children:[(0,s.jsx)(c.Z,(0,i.Z)((0,i.Z)({},(0,i.Z)((0,i.Z)({},n),{},{ref:{ref:L,refSVG:O}})),{},{children:(0,s.jsx)("div",{className:"tooltip-container"})})),(0,s.jsx)("div",{className:"pie-chart-info",children:P()})]})})},w=u.memo(T)},552:function(e,t,n){var r=n(1413),i=n(4925),a=n(7144),o=n.n(a),u=n(7861),c=n(5335),s=n(7770),l=["className","isCenterAbsolute"],d=function(e){var t=e.className,n=e.isCenterAbsolute,a=(0,i.Z)(e,l);return(0,s.jsx)("div",(0,r.Z)((0,r.Z)({className:"".concat(n&&c.Z.absCenter," ").concat(o()(t))},a),{},{children:(0,s.jsx)("i",{className:"fa-solid fa-spinner fa-spin-pulse fa-2xl"})}))};d.defaultProps={className:"",isCenterAbsolute:!0},t.Z=u.memo(d)},9049:function(e,t,n){var r=n(9439),i=n(7861),a=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};t.Z=function(){var e=(0,i.useState)(a()),t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,i.useEffect)((function(){function e(){o(a())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}},3926:function(e,t,n){n.d(t,{$e:function(){return C},BQ:function(){return Z},BY:function(){return j},Cr:function(){return k},FD:function(){return N},_r:function(){return _},bB:function(){return h},bM:function(){return x},dc:function(){return E},kZ:function(){return T},r7:function(){return b}});var r=n(1413),i=n(5618),a=n.n(i),o=n(627),u=n.n(o),c=n(1648),s=n.n(c),l=n(7165),d=n.n(l),f=n(3557),m=n.n(f),p=n(6994),v=n.n(p),g=n(9470),y=n.n(g),h="Wh",x="Wh",N="m\xb2",b="CO2e",_="CO2e/m\xb2",k={baseWatt:"Wh",kgWatt:"kWh",megaWatt:"MWh",gigaWatt:"GWh"},C=function(e){var t=e.value,n=e.unit,r=0;try{if(!m()(t))switch(n){case"kgWatt":r=1e3*t;break;case"megaWatt":r=1e6*t;break;case"gigaWatt":r=1e9*t;break;default:r=t}}catch(i){}return r},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=1,r=k.baseWatt,i=v()(e)||0;i>=1e9?(n=1e9,r=k.gigaWatt):i>=1e6?(n=1e6,r=k.megaWatt):i>=1e3&&(n=1e3,r=k.kgWatt);var a=2,o=(y()(e)||0)/n;return o>0&&o<1&&(a=-Math.floor(Math.log10(o))),{divide:n,unit:t?"".concat(r,"/").concat(N):r,minFractionDigits:a}},E=function(e){var t=e.value,n=e.divide,r=void 0===n?1:n,i=e.fractionDigits,a=void 0===i?2:i,o=e.unit;try{var u=(t/r).toLocaleString(void 0,{minimumFractionDigits:a});return"".concat(u," ").concat(o||"")}catch(c){}return"".concat(t)},j=function(e,t){var n=[],i=[];try{if(t){var o=t.geometry;e.forEach((function(e,t){var a=function(e,t,n){try{var r=e.id,i=e.name,a=e.mapProperties,o=t.features.map((function(e){var t=e.properties,n=e.geometry;return{coordinates:n.coordinates,properties:t,type:n.type}})),c=[];return a.forEach((function(e){e.split(",").forEach((function(e){n.push(e);var t=o.find((function(t){return u()(s()(t.properties.name),s()(e))}));if(t)switch(t.type){case"LineString":c.push([t.coordinates]);break;case"Polygon":c.push(t.coordinates);break;case"MultiPolygon":t.coordinates.forEach((function(e){c.push(e)}))}}))})),{type:"Feature",id:r,geometry:{type:"MultiPolygon",coordinates:c},properties:{name:i}}}catch(l){}}(e,o,i);if(a){var c=n[t];n[t]=(0,r.Z)((0,r.Z)({},c),a)}})),i=a()(i)}}catch(c){}return{listProperties:i,features:n}},T=function(e){return(null===e||void 0===e?void 0:e.split(",").map((function(e){return d()(e)})))||[]}},5577:function(e,t,n){n.r(t),n.d(t,{ALERTS:function(){return Ce},ALERTS_DISPLAY_NAME:function(){return Ee},ALERT_AND_TICKETS_RECORD_COLUMN:function(){return we},CARBON_BASE_UNIT:function(){return ae.r7},CARBON_DENSITY_BASE_UNIT:function(){return ae._r},DISPLAY_NAME:function(){return Te},EC_UNITS:function(){return ae.Cr},ENERGY_BASE_UNIT:function(){return ae.bM},ENERGY_DENSITY_AREA_BASE_UNIT:function(){return ae.FD},ENERGY_RANKING_BUILDING_NAME:function(){return ye},ENERGY_RANKING_ENERGY:function(){return he},ENERGY_RANKING_ENERGY_DENSITY:function(){return xe},ENERGY_RANKING_RECORD_COLUMN:function(){return Ne},GEOJSON_INFO_COUNTRY:function(){return be},GEOJSON_INFO_DATA:function(){return _e},GEOJSON_INFO_RECORD_COLUMN:function(){return ke},REGION_ALERT_TICKETS:function(){return fe},REGION_BUILDINGS:function(){return me},REGION_COORDINATES:function(){return ce},REGION_ENERGY_CONSUMPTION:function(){return se},REGION_ENERGY_DENSITY_CONSUMPTION:function(){return le},REGION_FLOOR_AREA:function(){return pe},REGION_NAME:function(){return ue},REGION_OPEN_TICKETS:function(){return de},REGION_RECORD_COLUMN:function(){return ge},REGION_TIME:function(){return ve},STANDARD_ENERGY_CONSUMPTION_UNIT:function(){return ae.bB},TICKETS:function(){return Ze},TICKETS_DISPLAY_NAME:function(){return je},activeGeojsonMap:function(){return te},convertECByUnit:function(){return ae.$e},convertFromStringToArrayPropertyList:function(){return ae.kZ},convertMapPropertiesToCoordinates:function(){return ae.BY},createRegion:function(){return V},default:function(){return Zt},deleteEnergyRanking:function(){return ie},deleteGeojsonMap:function(){return ee},deleteRegion:function(){return z},findDivideBaseOnValuesEC:function(){return ae.BQ},formatterValueToLocaleString:function(){return ae.dc},getAlertsTickets:function(){return K},getCountryStatusList:function(){return ne},getEnergyConsumption:function(){return J},getEnergyRanking:function(){return X},getGeojsonMapOfACountry:function(){return Y},getListCountry:function(){return H},getMapGeneral:function(){return F},getPropertyList:function(){return B},getRegion:function(){return U},getRegionList:function(){return $},getState:function(){return Ct},operationAlertsTickets:function(){return q},operationEnergyRanking:function(){return re},operationGeojsonMapOfACountry:function(){return Q},updateRegion:function(){return W},useActivedCountry:function(){return Se},useCountryStatusList:function(){return Re},useEnergyConsumptionData:function(){return We},useEnergyRankingData:function(){return Ke},useGeojsonCountry:function(){return De},useGeojsonRegions:function(){return Ge},useHierachyCountryData:function(){return Ie},useMapStore:function(){return kt},useMutationAlertsAndTickets:function(){return $e},useMutationAutoGenerateRegion:function(){return Ye},useMutationDeleteCountry:function(){return Pe},useMutationDeleteEnergyRanking:function(){return Je},useMutationDeleteRegion:function(){return Qe},useMutationOperationEnergyRanking:function(){return qe},useMutationOperationGeojsonMapOfACountry:function(){return Ue},useMutationOperationRegion:function(){return Be},useMutationUpdateActiveCountry:function(){return Fe},usePropertyList:function(){return Ae},useQueryAlertsAndTickets:function(){return Xe},useQueryAlertsAndTicketsData:function(){return He},useQueryEnergyConsumption:function(){return Ve},useQueryEnergyRanking:function(){return ze},useRegionList:function(){return Oe},useRegionListData:function(){return Me},useSelectedCountry:function(){return Le}});var r=n(7861),i=n.p+"static/media/background-map.5970f7141606477a2923.png",a={extra:"Map_style_extra__Kv95r",alertAndTicketExtra:"Map_style_alertAndTicketExtra__K9e4l",bgFlash:"Map_style_bgFlash__dmygw",blockRankingTitle:"Map_style_blockRankingTitle__vM98E",blockAlertsAndTickets:"Map_style_blockAlertsAndTickets__Mj53f"},o=n(9049),u=n(190),c=n(1413),s=n(4925),l=n(552),d=n(7770),f=["title","children","sub","className","isLoading","classNameBlockTitle","childrenCenter","panelTitleClassName"],m=function(e){var t=e.title,n=e.children,r=e.sub,i=e.className,a=void 0===i?"":i,o=e.isLoading,u=e.classNameBlockTitle,m=e.childrenCenter,p=e.panelTitleClassName,v=void 0===p?"":p,g=(0,s.Z)(e,f);return(0,d.jsxs)("div",(0,c.Z)((0,c.Z)({className:"relative bg-[#212029] p-5 h-auto ".concat(a||"")},g),{},{children:[(0,d.jsxs)("div",{className:"grid items-center justify-between gap-3 ".concat(u),children:[(0,d.jsx)("div",{className:"panel-title font-medium text-white truncate max-w-100px ".concat(v||""),children:t}),r&&r]}),o?(0,d.jsx)(l.Z,{}):n&&(0,d.jsx)("div",{className:"".concat(m?"flex justify-center items-center":""," "),children:n})]}))};m.defaultProps={sub:null,className:"",isLoading:!1,classNameBlockTitle:"",childrenCenter:!1,panelTitleClassName:""};var p=r.memo(m),v=n(627),g=n.n(v),y=n(7165),h=n.n(y),x=n(7144),N=n.n(x),b=["className"],_=function(e){var t=e.className,n=void 0===t?"":t,r=(0,s.Z)(e,b);return(0,d.jsx)("div",(0,c.Z)({className:"h-[1px] bg-slate-300 w-[100%] ".concat(N()(n))},r))};_.defaultProps={className:""};var k,C,Z,E,j=r.memo(_),T=n(5335),w=n(3433),R=n(4165),L=n(5861),S=n(4882),O=n(2137),A=n.n(O),D=n(3549),M=n(9146),I=n(5671),G=n(3144),P=new(function(){function e(t){var n=t.baseURL;(0,I.Z)(this,e),this.baseURL=void 0,this.controller=void 0,this.requestInit=void 0,this.baseURL=n,this.controller=new AbortController,this.requestInit={cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*"},credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer"}}return(0,G.Z)(e,[{key:"get",value:function(e){var t=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,c.Z)((0,c.Z)({},this.requestInit),{},{method:"GET",signal:t})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"post",value:function(e,t){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,c.Z)((0,c.Z)({},this.requestInit),{},{method:"POST",body:JSON.stringify(t),signal:n})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"put",value:function(e,t){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,c.Z)((0,c.Z)({},this.requestInit),{},{method:"PUT",body:JSON.stringify(t),signal:n})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"delete",value:function(e,t){var n=this.controller.signal;return fetch("".concat(this.baseURL,"/").concat(e),(0,c.Z)((0,c.Z)({},this.requestInit),{},{method:"DELETE",body:JSON.stringify(t),signal:n})).then((function(e){return e.json()})).catch((function(e){throw new Error(e)}))}},{key:"abort",value:function(){this.controller.abort()}}]),e}())({baseURL:"".concat(M.V.API_DOMAIN_URL,"/map")}),F=function(){return P.get("general")},Y=function(e){return P.get("geojsonmap?Country=".concat(e))},Q=function(e,t){return P.post("geojsonmap?Country=".concat(e),t)},B=function(e){return P.get("geojsonmappropertylist?Country=".concat(e))},U=function(e,t){return P.get("region?Country=".concat(e,"&Region=").concat(t))},V=function(e,t,n){return P.post("region",(0,c.Z)({country:e,regionname:t},n))},W=function(e,t,n){return P.put("region",(0,c.Z)({country:e,regionname:t},n))},z=function(e){return P.post("".concat(e,"/region"),{})},K=function(e){return P.get("alertstickets?Country=".concat(e))},q=function(e){return P.post("alertstickets",e)},J=function(e){return P.get("energyconsumption?Country=".concat(e))},X=function(e){return P.get("energyranking?Country=".concat(e))},H=function(){return P.get("countrylist")},$=function(e){return P.get("regionlist?Country=".concat(e))},ee=function(e){return P.delete("".concat(e,"/geojsonmap"))},te=function(e){return P.post("".concat(e,"/geojsonmap"))},ne=function(){return P.get("countrystatuslist")},re=function(e,t,n){return P.post("energyranking?Country=".concat(e),(0,c.Z)({country:e,buildingname:t},n))},ie=function(e){return P.post("".concat(e,"/energyranking"),{})},ae=n(3926),oe=n(4942),ue="regionname",ce="map_properties",se="energy_consumption",le="energy_densisty_YTD",de="open_tickets",fe="active_alerts",me="buildings",pe="floor_area",ve="time",ge=(k={},(0,oe.Z)(k,ue,"Region"),(0,oe.Z)(k,ce,"Coordinates"),(0,oe.Z)(k,se,"Energy Consumption"),(0,oe.Z)(k,le,"Energy Density Consumption"),(0,oe.Z)(k,de,"Open tickets"),(0,oe.Z)(k,fe,"Alert Tickets"),(0,oe.Z)(k,me,"Buildings"),(0,oe.Z)(k,pe,"Floor Area"),(0,oe.Z)(k,ve,"Time"),k),ye="buildingname",he="energy",xe="energy_density",Ne=(C={},(0,oe.Z)(C,ye,"Building Name"),(0,oe.Z)(C,he,"Energy"),(0,oe.Z)(C,xe,"Energy Density"),C),be="country",_e="geojson",ke=(Z={},(0,oe.Z)(Z,be,"Country"),(0,oe.Z)(Z,_e,"Geojson"),Z),Ce="alerts",Ze="tickets",Ee="alerts_display_name",je="tickets_display_name",Te="display_name",we=(E={},(0,oe.Z)(E,Ce,"Alerts"),(0,oe.Z)(E,Ze,"Tickets"),(0,oe.Z)(E,Ee,""),(0,oe.Z)(E,je,""),(0,oe.Z)(E,Te,"Display name"),E),Re=function(){var e=kt().actionSetSelectedCountry;return(0,S.useQuery)(["country-status-list"],(0,L.Z)((0,R.Z)().mark((function e(){var t;return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return t=e.sent,e.abrupt("return",(null===t||void 0===t?void 0:t.data)||[]);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(t){var n,r=-1;t.length>0&&(r=(null===(n=t.find((function(e){return e.actived})))||void 0===n?void 0:n.id)||-1);e(r)},placeholderData:[]})},Le=function(){var e,t=kt(),n=t.country,r=t.geojsonPropertyList,i=Re().data;return{country:(void 0===i?[]:i).find((function(e){return e.id===n}))||{id:-1,country:"",actived:!1},propertyList:(null===(e=r.find((function(e){return e.countryId===n})))||void 0===e?void 0:e.propertyList)||[]}},Se=function(){var e=Re().data,t=(void 0===e?[]:e).find((function(e){return e.actived}));return{country:t,countryName:(null===t||void 0===t?void 0:t.country)||""}},Oe=function(){var e=Le().country.country;return(0,S.useQuery)(["regionlist",e],(0,L.Z)((0,R.Z)().mark((function t(){var n;return(0,R.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e);case 2:return n=t.sent,t.abrupt("return",(null===n||void 0===n?void 0:n.data)||[]);case 4:case"end":return t.stop()}}),t)}))),{enabled:!!e})},Ae=function(){var e=Le().country,t=e.country,n=e.id,r=kt().actionSetGeojsonPropertyList;return(0,S.useQuery)(["property-list",t],(0,L.Z)((0,R.Z)().mark((function e(){var n,r;return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,r=(null===n||void 0===n?void 0:n.data.split(","))||[],e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!t,onSuccess:function(e){r({countryId:n,propertyList:e})}})},De=function(){var e=Le().country.country;return(0,S.useQuery)(["geojsonmap",e],(0,L.Z)((0,R.Z)().mark((function t(){var n;return(0,R.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:return n=t.sent,t.abrupt("return",n.data||"");case 4:case"end":return t.stop()}}),t)}))),{enabled:!!e})},Me=function(){var e=Le().country.country,t=Oe().data,n=void 0===t?[]:t,i=(0,S.useQueries)({queries:n.map((function(t){return{queryKey:["region-details",t,e],queryFn:function(){return U(e,t)},enabled:(null===n||void 0===n?void 0:n.length)>0}}))});return r.useMemo((function(){var e=i.some((function(e){return e.isLoading})),t=i.map((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.data})).filter((function(e){return!!e})).map((function(e){var t=e.energy_densisty_YTD,n=(0,ae.BQ)([t],!0),r=n.divide,i=n.unit,a=n.minFractionDigits;return(0,c.Z)((0,c.Z)({},e),{},{energy_densisty_YTD_formatted:t?(0,ae.dc)({value:t,unit:i,divide:r,fractionDigits:a}):"-",buildings_formatted:null!==e&&void 0!==e&&e.buildings?(0,ae.dc)({value:null===e||void 0===e?void 0:e.buildings}):"-",floor_area_formatted:null!==e&&void 0!==e&&e.floor_area?(0,ae.dc)({value:null===e||void 0===e?void 0:e.floor_area,unit:ae.FD}):"-",active_alerts_formatted:(null===e||void 0===e?void 0:e.active_alerts)||"-",open_tickets_formatted:(null===e||void 0===e?void 0:e.open_tickets)||"-"})})),r=t.map((function(e){return e.id})),a=t.map((function(e){return e.regionname})),o=t.map((function(e){var t=e.id,n=e.regionname,r=e.map_properties,i=r&&(0,D.V)(r)?JSON.parse(r):void 0;return{id:t,name:n,mapProperties:"undefined"!==typeof i?i:[n]}}));return{isLoading:e,regionList:t,regions:n,regionMapProperties:o,regionListIds:r,regionListName:a}}),[i])},Ie=function(){var e=Le().country.country,t=De().data,n=void 0===t?"":t;return{id:e,name:e,geometry:(0,D.V)(n)?JSON.parse(n):{},children:[]}},Ge=function(){var e=Le().country.country,t=De().isLoading,n=Ie(),i=Me(),a=i.regionMapProperties,o=i.regionListName,u=i.isLoading,s=Ae(),l=s.data,d=s.isLoading;return r.useMemo((function(){var r=(0,ae.BY)(a,n).features,i={type:"FeatureCollection",features:[]};if(n){var s=n.geometry,l=s.features;try{l=[].concat((0,w.Z)(l),(0,w.Z)(r)),i=(0,c.Z)((0,c.Z)({},s),{},{features:l})}catch(f){}}return{geojsonRegions:{id:e,name:e,geometry:i,children:[],regions:o},isLoading:t||d||u}}),[n,a,l,o,t,d,u,e])},Pe=function(){var e=(0,S.useQueryClient)();return(0,S.useMutation)((function(e){return ee(e)}),{onSuccess:function(){e.invalidateQueries(["country-status-list"])}})},Fe=function(){var e=(0,S.useQueryClient)();return(0,S.useMutation)((function(e){return te(e)}),{onSuccess:function(){e.invalidateQueries(["country-status-list"])}})},Ye=function(){var e=(0,S.useQueryClient)(),t=Le().country.country;return(0,S.useMutation)((0,L.Z)((0,R.Z)().mark((function e(){var n,r;return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return n=e.sent,r=(0,ae.kZ)(n.data),e.next=6,Promise.all(r.map((function(e){return V(t,e,{})})));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),{onSuccess:function(n){e.refetchQueries(["regionlist",t]),n.forEach((function(n){var r=["region-details",n,t];e.refetchQueries(r,{type:"all",exact:!0})}))}})},Qe=function(){var e=Le().country.country,t=(0,S.useQueryClient)();return(0,S.useMutation)((function(e){return z(e)}),{onSuccess:function(){t.refetchQueries(["regionlist",e])}})},Be=function(e){var t=e.isCreate,n=Le().country.country,r=(0,S.useQueryClient)(),i=(0,S.useMutation)(function(){var e=(0,L.Z)((0,R.Z)().mark((function e(r){var i,a;return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.region,a=r.info,!t){e.next=6;break}return e.next=4,V(n,i,a);case 4:e.next=8;break;case 6:return e.next=8,W(n,i,a);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){if(t)r.refetchQueries(["regionlist",n]);else{var i=["region-details",e,n];r.refetchQueries(i,{type:"all",exact:!0})}}});return i},Ue=function(e){var t=e.isCreate,n=(0,S.useQueryClient)(),r=(0,S.useMutation)(function(){var e=(0,L.Z)((0,R.Z)().mark((function e(t){var n,r;return(0,R.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.country,r=t.geojson,e.next=3,Q(n,r);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){t?n.refetchQueries(["country-status-list"]):n.refetchQueries(["geojsonmap",e])}});return r},Ve=function(){var e=Se().countryName;return(0,S.useQuery)(["energy-consumption-".concat(e)],(0,L.Z)((0,R.Z)().mark((function t(){var n,r;return(0,R.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,J(e);case 4:r=t.sent,n=(null===r||void 0===r?void 0:r.data)||[],t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),{enabled:!!e,placeholderData:[]})},We=function(){var e=Ve(),t=e.data,n=void 0===t?[]:t,i=e.isLoading;return r.useMemo((function(){var e=n.map((function(e){return e.energyconsumption})),t=(0,ae.BQ)(e),r=t.divide,a=t.unit,o=n.map((function(e){var t=e.regionname;return{id:t,label:t,value:e.energyconsumption/r}}))||[],u=A()(o.map((function(e){return e.value})));return{donutText:i?"-":"".concat((0,ae.dc)({value:u,divide:1,unit:a})),subDonutText:"YTD Energy",pieData:o,isLoading:i,formatterValue:function(e){return"".concat((0,ae.dc)({value:e.value,divide:1,unit:a})," | ").concat(e.percent,"%")},renderTooltipValue:function(e){return"".concat(e.label," - ").concat((0,ae.dc)({value:e.value,divide:1,unit:a})," | ").concat(e.percent,"%")}}}),[e])},ze=function(e){return(0,S.useQuery)(["energy-ranking-".concat(e)],(0,L.Z)((0,R.Z)().mark((function t(){var n;return(0,R.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X(e);case 3:return n=t.sent,t.abrupt("return",n.data||[]);case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])}))),{enabled:!!e,placeholderData:[]})},Ke=function(e,t){var n=ze(t),i=n.data,a=void 0===i?[]:i,o=n.isLoading;return r.useMemo((function(){var t=a.map((function(t){return e?t.energy_density:t.energy})),n=(0,ae.BQ)(t,e),r=n.divide,i=n.unit,u=n.minFractionDigits;return{isLoading:o,data:a.map((function(t){var n=t.energy,i=t.energy_density,a=t.id,o=t.buildingname,u=(e?i:n)/r;return{id:String(a),label:o,value:u}})),unit:i,minFractionDigits:u,dataResource:[]}}),[n,e])},qe=function(e){var t=(0,S.useQueryClient)(),n=(0,S.useMutation)(function(){var t=(0,L.Z)((0,R.Z)().mark((function t(n){var r,i;return(0,R.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.buildingname,i=n.info,t.next=3,re(e,r,i);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){t.refetchQueries(["energy-ranking-".concat(e)])}});return n},Je=function(e){var t=(0,S.useQueryClient)();return(0,S.useMutation)((function(e){return ie(e)}),{onSuccess:function(){t.refetchQueries(["energy-ranking-".concat(e)])}})},Xe=function(e){return(0,S.useQuery)(["alerts-and-tickets-".concat(e)],(0,L.Z)((0,R.Z)().mark((function t(){var n;return(0,R.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))))},He=function(e){var t=Xe(e);return r.useMemo((function(){var e=t.data,n=t.isLoading;return e?{isLoading:n,alertsFormatted:"".concat(e[Ce]),ticketsFormatted:"".concat(e[Ze]),resource:e,alertsDisplayName:e[Ee],ticketsDisplayName:e[je]}:{isLoading:n,resource:void 0,alertsFormatted:"-",ticketsFormatted:"-",alertsDisplayName:"-",ticketsDisplayName:"-"}}),[t])},$e=function(e){var t=(0,S.useQueryClient)();return(0,S.useMutation)((function(t){return q((0,c.Z)({country:e},t))}),{onSuccess:function(){t.refetchQueries(["alerts-and-tickets-".concat(e)])}})},et=function(){var e=(0,o.Z)().height,t=Ge(),n=t.geojsonRegions,r=t.isLoading,i=Me().regionList;return(0,d.jsx)(u.Lp,{data:{hierachy:n,width:"auto",height:e-240},renderTooltip:function(e){var t=e.name,n=null,r=h()(t),o=i.find((function(e){return g()(r,e.regionname)}));if(o){var u=o,c=u.energy_densisty_YTD_formatted,s=u.buildings_formatted,l=u.floor_area_formatted,f=u.active_alerts_formatted,m=u.open_tickets_formatted;n=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"grid items-center gap-2 justify-between",style:{gridTemplateColumns:"repeat(2, minmax(100px, 50%))"},children:[(0,d.jsx)("div",{className:"text-xs truncate text-gray-400",children:"".concat(s," Buildings")}),(0,d.jsx)("div",{className:"text-right text-xs truncate text-gray-400",children:l})]}),(0,d.jsx)(j,{className:"my-2"}),(0,d.jsx)("div",{className:"flex flex-row justify-around gap-3 p-3",children:[{title:"Energy Density YTD",value:c},{title:"Active Alerts",value:f},{title:"Open Tickets",value:m}].map((function(e){var t=e.title,n=e.value;return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-white text-center truncate mb-1 sub-font",children:n}),(0,d.jsx)("div",{className:"text-xs text-gray-500 truncate",children:t})]},t)}))})]})}else n=(0,d.jsx)("div",{className:"".concat(T.Z.absCenter),children:"Not data yet!"});return(0,d.jsx)(p,{className:"w-fit min-w-[380px] max-w-[400px] h-auto min-h-[150px] ".concat(a.tooltipHierachyMap),title:r,panelTitleClassName:"text-sm",classNameBlockTitle:"mb-2",children:!!n&&n})},isLoading:r,classNameContainer:"z-1"})},tt=r.memo(et),nt=function(){var e=Se().countryName,t=He(e),n=t.alertsFormatted,r=t.ticketsFormatted,i=t.alertsDisplayName,o=t.ticketsDisplayName,u=t.isLoading;return(0,d.jsx)(p,{title:"".concat(i," & ").concat(o),isLoading:u,classNameBlockTitle:"mb-3",panelTitleClassName:"text-base",children:(0,d.jsx)("div",{className:"grid items-center gap-8 justify-center abs-center ".concat(a.blockAlertsAndTickets," w-[100%]"),children:[{label:"Total ".concat(i),value:n,sub:"",icon:(0,d.jsx)("i",{className:"fa-solid fa-triangle-exclamation text-red-500 fa-2x"})},{label:"Total ".concat(o),value:r,sub:"",icon:(0,d.jsx)("i",{className:"fa-solid fa-list text-yellow-500 fa-2x"})}].map((function(e,t){var n=e.label,r=e.value,i=e.sub,o=e.icon;return(0,d.jsxs)("div",{className:"flex flex-col justify-center items-center ".concat(0===t?"justify-self-end":"justify-self-start"),children:[(0,d.jsx)("div",{className:"text-sm text-gray-500 font-medium mb-2",children:n}),(0,d.jsxs)("div",{className:"grid items-center gap-3 ".concat(a.alertAndTicketExtra),children:[(0,d.jsx)("div",{children:o}),(0,d.jsx)("div",{className:"text-2xl sub-font font-medium truncate text-center",children:r}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:i})]})]},n)}))})})},rt=r.memo(nt),it=n(9439),at=n(5906),ot=n.n(at),ut="Ranking_style_ranking-item__sqsW-",ct=function(e){var t=e.data,n=t.rankingData,i=t.topRanking,a=void 0===i?5:i,o=t.orderBy,u=void 0===o?"desc":o,c=t.formatterValue,s=e.rankingChartContainerClassName,l=r.useMemo((function(){return n.map((function(e){return e.value}))}),[n]),f=r.useMemo((function(){return A()(l)}),[l]),m=r.useMemo((function(){return ot()(n,(function(e){return e.value}),u)}),[n,u]);return(0,d.jsx)("div",{className:"ranking-chart-container ".concat(N()(s)),children:m.slice(0,a).map((function(e){return(0,d.jsxs)("div",{className:"ranking-item grid items-center gap-5 mb-2 ".concat(N()(ut)),children:[(0,d.jsx)("div",{className:"font-medium text-xs text-gray-500 truncate capitalize",children:e.label}),(0,d.jsx)("div",{className:"bg-transparent h-2 rounded relative w-[100%] min-w-[100px]",children:(0,d.jsx)("div",{className:"rounded bg-blue-500 absolute top-0 left-0 h-[100%]",style:{width:"".concat(e.value/f*100,"%")}})}),(0,d.jsx)("div",{className:"font-normal text-xs text-white truncate text-right",children:"function"===typeof c?c(e):e.value})]},e.id)}))})};ct.defaultProps={rankingChartContainerClassName:""};var st=r.memo(ct),lt=n(685),dt=[{key:"energy",tab:"Energy"},{key:"energy-density",tab:"Energy Density"}],ft=function(){var e=r.useState(dt[0].key),t=(0,it.Z)(e,2),n=t[0],i=t[1],o=Se().countryName,u=Ke("energy-density"===n,o),c=u.data,s=u.isLoading,l=u.unit,f=u.minFractionDigits;return(0,d.jsx)(p,{title:"Ranking",sub:(0,d.jsx)("div",{className:"flex justify-end",children:dt.map((function(e){var t=e.key,r=e.tab,a=t===n;return(0,d.jsx)(lt.Z,{onClick:function(){return i(t)},type:a?"primary":"default",children:r},t)}))}),isLoading:s,classNameBlockTitle:"".concat(a.blockRankingTitle," mb-3"),panelTitleClassName:"text-base",children:(0,d.jsx)(st,{data:{rankingData:c,formatterValue:function(e){var t=e.value;return(0,ae.dc)({value:t,divide:1,unit:l,fractionDigits:f})}}})})},mt=r.memo(ft),pt=n(2022),vt=function(){var e=We(),t=e.pieData,n=e.donutText,r=e.subDonutText,i=e.isLoading,a=e.formatterValue,o=e.renderTooltipValue;return(0,d.jsx)(p,{title:"Energy Consumption",isLoading:i,classNameBlockTitle:"mb-3",panelTitleClassName:"text-base",children:(0,d.jsx)(pt.Z,{data:{size:125,pieData:t,formatterValue:a,quantitiesItemOnChart:5,donutText:n,subDonutText:r,renderTooltipValue:o}})})},gt=r.memo(vt),yt=function(){return(0,d.jsxs)("div",{className:"relative min-h-screen",children:[(0,d.jsx)("div",{className:"bg-no-repeat bg-center bg-auto opacity-50 absolute left-0 top-0 w-[100%] h-[100%]",style:{backgroundImage:"url(".concat(i,")")}}),(0,d.jsx)("div",{className:a.bgFlash}),(0,d.jsx)(tt,{}),(0,d.jsxs)("div",{className:"extra grid gap-8 mt-5 absolute bottom-0 left-0 z-50 px-5 pb-3 ".concat(a.extra),children:[(0,d.jsx)(gt,{}),(0,d.jsx)(mt,{}),(0,d.jsx)(rt,{})]})]})},ht=r.memo(yt),xt=n(2958),Nt={country:-1,geojsonPropertyList:[]},bt=(0,xt.M)((function(e,t){return(0,c.Z)((0,c.Z)({},Nt),{},{actionSetSelectedCountry:function(t){return e({country:t})},actionSetGeojsonPropertyList:function(n){return e({geojsonPropertyList:[].concat((0,w.Z)(t().geojsonPropertyList),[n])})}})}),"MapStore"),_t=(0,it.Z)(bt,2),kt=_t[0],Ct=_t[1].getState,Zt=ht},3549:function(e,t,n){n.d(t,{V:function(){return r}});var r=function(e){var t=!0;try{JSON.parse(e)}catch(n){t=!1}return t}}}]);
//# sourceMappingURL=332.e98c284d.chunk.js.map
(self.webpackChunkpoc_app=self.webpackChunkpoc_app||[]).push([[478],{30:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(1413),a=n(3433),o=n(4925),i=n(2791),c=n(9970),u=n(2646),s=n(2064),l=n.n(s),d=n(184),f=["data"],p=function(t){var e=t.data,n=(0,o.Z)(t,f),s=i.useRef(null),p=i.useRef(null);return i.useLayoutEffect((function(){s.current&&p.current&&(null===e||void 0===e?void 0:e.length)>0&&function(t){var e=t.data,n=t.svg,r=t.width,a=void 0===r?1152:r,o=t.height,i=void 0===o?1152:o,c=t.groupColors||u.K2I,s=e.map((function(t){return t.value})),d=u.w6H(s.length).filter((function(t){return s[t]>0})),f=function(t){return t.data},p=e.map((function(t){return t.group})),v=l()(d.map((function(t){return p[t]}))),h=p&&u.PKp(v,c),m=u.P2p().size([a,i]).padding(10)(u.bT9({children:e}).sum((function(t){return t.value}))),x=u.Ys(n);x.html(""),x.attr("width",a).attr("height",i).attr("viewBox",[0,0,a,i]).attr("style","max-width: 100%; height: auto; height: intrinsic;").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle").attr("fill","#FFF");var g=x.selectAll("a").data(m.leaves()).join("a").attr("xlink:href",(function(t){return f(t).link})).attr("target","_blank").attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}));g.append("circle").attr("stroke","#FFF").attr("stroke-width",1).attr("stroke-opacity",1).attr("fill",(function(t){return h(f(t).group)})).attr("fill-opacity",1).attr("r",(function(t){return t.r})),g.append("title").text((function(t){return f(t).title}));var b="O-".concat(Math.random().toString(16).slice(2));g.append("clipPath").attr("id",(function(t){return"".concat(b,"-clip-").concat(f(t).id)})).append("circle").attr("r",(function(t){return t.r})),g.append("text").attr("clip-path",(function(t){return"url(".concat(new URL("#".concat(b,"-clip-").concat(f(t).id),window.location),")")})).selectAll("tspan").data((function(t){return"".concat(f(t).label).split(/\n/g)})).join("tspan").attr("x",0).attr("y",(function(t,e,n){return"".concat(e-n.length/2+.85,"em")})).attr("fill-opacity",(function(t,e,n){return e===n.length-1?.7:null})).text((function(t){return t})),Object.assign(x.node(),{scales:{color:h}})}({data:e.map((function(t){var e=t.id,n=t.value,o=e.split("."),i=(0,a.Z)(o.pop().split(/(?=[A-Z][a-z])/g)),c=[].concat((0,a.Z)(i),[n.toLocaleString("en")]).join("\n"),u=o[1],s="https://google.com/".concat(c),l="".concat(c,"\n").concat(n.toLocaleString("en"));return(0,r.Z)((0,r.Z)({},t),{},{label:c,group:u,link:s,title:l})})),svg:p.current,container:s.current})}),[e,s,p]),(0,d.jsx)(c.Z,(0,r.Z)((0,r.Z)({},n),{},{ref:{ref:s,refSVG:p}}))},v=i.memo(p)},9970:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(1694),a=n.n(r),o=n(1017),i=n(2791),c=n(184),u=i.forwardRef((function(t,e){var n=e.ref,r=e.refSVG,i=t.chartName,u=t.isLoading,s=t.classNameContainer,l=t.classNameSVGChart,d=t.children;return(0,c.jsxs)("div",{ref:n,className:"relative ".concat(a()(s)),children:[i&&(0,c.jsx)("div",{className:"text-center mb-5 text-xl font-medium",children:i}),u&&(0,c.jsx)(o.Z,{}),r&&(0,c.jsx)("svg",{ref:r,className:"m-auto ".concat(l)}),d&&d]})}));u.defaultProps={chartName:"",isLoading:!1,classNameContainer:"",classNameSVGChart:"",children:null};var s=u},4899:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var r=n(1413),a=n(4925),o=n(2791),i=n(9970),c=n(4165),u=n(5861),s=n(2646),l=Math.PI/3,d=[0,l,2*l,3*l,4*l,5*l];function f(t){return t[0]}function p(t){return t[1]}function v(){var t,e,n,r=0,a=0,o=1,i=1,c=f,u=p;function s(t){var r,a={},o=[],i=t.length;for(r=0;r<i;++r)if(!isNaN(l=+c.call(null,s=t[r],r,t))&&!isNaN(d=+u.call(null,s,r,t))){var s,l,d,f=Math.round(d/=n),p=Math.round(l=l/e-(1&f)/2),v=d-f;if(3*Math.abs(v)>1){var h=l-p,m=p+(l<p?-1:1)/2,x=f+(d<f?-1:1),g=l-m,b=d-x;h*h+v*v>g*g+b*b&&(p=m+(1&f?1:-1)/2,f=x)}var y=p+"-"+f,w=a[y];w?w.push(s):(o.push(w=a[y]=[s]),w.x=(p+(1&f)/2)*e,w.y=f*n)}return o}function v(t){var e=0,n=0;return d.map((function(r){var a=Math.sin(r)*t,o=-Math.cos(r)*t,i=a-e,c=o-n;return e=a,n=o,[i,c]}))}return s.hexagon=function(e){return"m"+v(null==e?t:+e).join("l")+"z"},s.centers=function(){for(var c=[],u=Math.round(a/n),s=Math.round(r/e),l=u*n;l<i+t;l+=n,++u)for(var d=s*e+(1&u)*e/2;d<o+e/2;d+=e)c.push([d,l]);return c},s.mesh=function(){var e=v(t).slice(0,4).join("l");return s.centers().map((function(t){return"M"+t+"m"+e})).join("")},s.x=function(t){return arguments.length?(c=t,s):c},s.y=function(t){return arguments.length?(u=t,s):u},s.radius=function(r){return arguments.length?(e=2*(t=+r)*Math.sin(l),n=1.5*t,s):t},s.size=function(t){return arguments.length?(r=a=0,o=+t[0],i=+t[1],s):[o-r,i-a]},s.extent=function(t){return arguments.length?(r=+t[0][0],a=+t[0][1],o=+t[1][0],i=+t[1][1],s):[[r,a],[o,i]]},s.radius(1)}var h=function(){var t=(0,u.Z)((0,c.Z)().mark((function t(e){var n,r,a,o,i,u,l,d,f,p,h,m,x,g;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.points,r=e.geojson,a=e.width,o=void 0===a?800:a,i=e.height,u=void 0===i?640:i,l=e.svg;try{(d=s.Ys(l).attr("width",o).attr("height",u).attr("viewbox","0,0,".concat(o,",").concat(u))).html(""),f=s.l49().centroid(r),p=s.mw4().scale(1/(2*Math.PI)).translate(f).fitSize([o,u],r),h=s.l49(p),r.features.forEach((function(t){return d.append("path").datum(t).attr("class","geometry-map").attr("pointer-events","visible").attr("stroke","#777").attr("stroke-width",.5).attr("stroke-linejoin","round").attr("cursor","pointer").attr("fill","none").attr("d",(function(t){return h(t)}))})),m=s.PKp(n,s.K2I),x=v().extent([[0,0],[o,u]]).radius(9),g=n.map((function(t){return p(t)})),d.append("g").attr("class","hexagon-data").selectAll("path").data(x(g)).enter().append("path").attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")})).attr("d",x.hexagon()).attr("fill",(function(t){return m(t)})).attr("stroke","currentColor").attr("stroke-width","0.5")}catch(c){}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=n(184),x=["data"],g=function(t){var e=t.data,n=(0,a.Z)(t,x),c=o.useRef(null),u=o.useRef(null);return o.useLayoutEffect((function(){c.current&&u.current&&e&&h((0,r.Z)({svg:u.current,container:c.current},e))}),[c,u,e]),(0,m.jsx)(i.Z,(0,r.Z)({},(0,r.Z)((0,r.Z)({},n),{},{ref:{ref:c,refSVG:u}})))}},6611:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var r=n(1413),a=n(4925),o=n(2791),i=n(9970),c=n(7852),u=n(3433),s=n(2646),l=n(2064),d=n.n(l),f=n(2127),p=n(7725),v=n(3054),h=function(t){return null!==t&&"object"===typeof t?t.valueOf():t},m=n(184),x=["data"],g=function(t){var e=t.data,n=(0,a.Z)(t,x),l=o.useRef(null),g=o.useRef(null),b=(0,c.Z)(),y=b.width,w=b.height;return o.useLayoutEffect((function(){var t;(null===e||void 0===e||null===(t=e.links)||void 0===t?void 0:t.length)>0&&l.current&&g.current&&function(t){var e,n=t.data,r=t.options,a=t.svg,o=t.container,i=n.nodes,c=n.links,l=[],m=[],x=[];try{var g=r.format,b=void 0===g?s.WUZ:g,y=r.nodeId,w=r.nodeLabel,Z=r.nodeAlign,k=void 0===Z?v.PT:Z,j=r.nodeWidth,N=void 0===j?24:j,S=r.nodePadding,C=void 0===S?20:S,D=r.nodeLabelPadding,I=void 0===D?6:D,L=r.linkSource,E=void 0===L?function(t){return t.source}:L,R=r.linkTarget,M=void 0===R?function(t){return t.target}:R,P=r.linkValue,B=void 0===P?function(t){return t.value}:P,F=r.linkTitle,A=r.linkMixBlendMode,O=void 0===A?"normal":A,U=r.colors,V=void 0===U?s.K2I:U,z=r.width,T=void 0===z?640:z,G=r.height,_=void 0===G?400:G,K=r.nodeGroup,W=r.standardizeNode,J=r.standardizeLink,Y=r.onMouseEnterLink,q=r.onMouseEnterNode,H=r.onMouseLeaveLink,$=r.onMouseLeaveNode,X=r.linkColor,Q=void 0===X?"source-target":X;c=c.map((function(t){return J(t)}));var tt=s.UID(c,E).map(h),et=s.UID(c,M).map(h),nt=s.UID(c,B);i=Array.from(s.G0j(tt,et),(function(t){return{id:t,name:t}})).map((function(t){return W(t)}));var rt=s.UID(i,y).map(h);x=s.UID(i,(function(t){return K(t)})).map(h),i=s.UID(i,(function(t,e){return{id:rt[e]}})),c=s.UID(c,(function(t,e){return{source:tt[e],target:et[e],value:nt[e]}})),!x&&["source","target","source-target"].includes(Q)&&(Q="currentColor");var at=x;e=s.PKp(at,V),l=s.UID(i,(function(t){return w?w(t):t.id}));var ot=f.Z().nodeId((function(t){var e=t.index;return rt[e]})).nodeAlign(k).nodeWidth(N).nodePadding(C).extent([[20,20],[T-10,_-10]]),it=ot({nodes:(0,u.Z)(i),links:(0,u.Z)(c)});i=it.nodes,c=it.links,m=s.UID(c,(function(t){return F?F(t):"".concat(t.source.id," \u2192 ").concat(t.target.id,"\n").concat(b(t.value))}));var ct=s.Ys(a).attr("width",T).attr("height",_).attr("viewbox","0, 0, ".concat(T,",").concat(_));ct.html("");var ut="O-".concat(Math.random().toString(16).slice(2)),st=ct.append("g").attr("fill","none").attr("class","g-links").selectAll("g").data(c).join("g").style("mix-blend-mode",O).attr("class","g-link").attr("stroke",(function(t){return"url(#".concat(ut,"-link-").concat(t.index,")")}));st.append("linearGradient").attr("id",(function(t){return"".concat(ut,"-link-").concat(t.index)})).attr("gradientUnits","userSpaceOnUse").attr("x1",(function(t){return t.source.x1})).attr("x2",(function(t){return t.target.x0})).call((function(t){return t.append("stop").attr("offset","0%").attr("stop-color",(function(t){var n=t.source.index;return e(x[n])}))})).call((function(t){return t.append("stop").attr("offset","100%").attr("stop-color",(function(t){var n=t.target.index;return e(x[n])}))}));var lt=st.append("path").attr("class","path-link").attr("stroke-width",(function(t){return Math.max(t.width,1)})).attr("cursor","pointer").attr("opacity",.5).on("mouseenter",(function(t,e){s.Ys(t.target).attr("opacity","1");var n=e.index,r=m[n],a=t.pageX,i=t.pageY;s.Ys(o).selectChild(".tooltip").html(r).style("opacity","1").style("visibility","visible").style("left","".concat(a+20,"px")).style("top","".concat(i-20,"px")),"function"===typeof Y&&Y(t,e)})).on("mouseleave",(function(t,e){s.Ys(t.target).attr("opacity","0.5"),s.Ys(o).selectChild(".tooltip").style("opacity","0").style("visibility","hidden"),"function"===typeof H&&H(t,e)})).attr("d",(function(t){return p.Z()(t)})),dt=ct.append("g").attr("class","g-nodes").selectAll("g").data(it.nodes).enter().append("g").attr("class","g-node").call((function(t){return s.ohM().on("start",(function(){this.parentNode&&this.parentNode.appendChild(this)})).on("drag",(function(t){var e=Number(s.Ys(this).select("rect").attr("y")),n=t.subject;n.y0+=t.dy;var r=n.y0-e;s.Ys(this).attr("transform","translate(0,".concat(r,")")),lt.attr("d",(function(t){return p.Z()(t)})),ot.update(it)}))(t)}));dt.append("rect").attr("cursor","pointer").attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("height",(function(t){return Math.max(t.y1-t.y0,1)})).attr("width",(function(t){return t.x1-t.x0})).attr("fill",(function(t){return V[t.depth]})).on("mouseenter",(function(t,e){var n=e.sourceLinks,r=e.targetLinks,a=d()([].concat((0,u.Z)(n.map((function(t){return t.index}))),(0,u.Z)(r.map((function(t){return t.index})))));lt.attr("opacity",(function(t){return a.includes(t.index)?"1":"0.5"})),"function"===typeof q&&q(t,e)})).on("mouseleave",(function(t,e){lt.attr("opacity","0.5"),"function"===typeof $&&$(t,e)})),dt.append("text").join("text").attr("x",(function(t){return t.x0<T/2?t.x1+I:t.x0-I})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dy","0.35em").attr("text-anchor",(function(t){return t.x0<T/2?"start":"end"})).attr("fill","#FFFFFF").attr("stroke","#FFFFFF").attr("font-size","16").text((function(t){var e=t.index;return l[e]}))}catch(ft){}}({data:e,options:{nodeWidth:24,nodeGroup:function(t){return t.id.split(/\W/)[0]},nodeId:function(t){return t.id},standardizeNode:function(t){return{id:t.name}},standardizeLink:function(t){return{source:t.source,target:t.target,value:t.value}},width:.5*y,height:.75*w},svg:g.current,container:l.current})}),[l,g,e]),(0,m.jsx)(i.Z,(0,r.Z)((0,r.Z)({},(0,r.Z)((0,r.Z)({},n),{},{ref:{ref:l,refSVG:g}})),{},{children:(0,m.jsx)("div",{className:"tooltip fixed -[1000] invisible opacity-0 flex justify-center items-center p-[10px] h-[40px] bg-white rounded-[4px] shadow-xl text-black"})}))},b=o.memo(g)},1017:function(t,e,n){"use strict";var r=n(1413),a=n(4925),o=n(1694),i=n.n(o),c=n(2791),u=n(8965),s=n(184),l=["className","isCenterAbsolute"],d=function(t){var e=t.className,n=t.isCenterAbsolute,o=(0,a.Z)(t,l);return(0,s.jsx)("div",(0,r.Z)((0,r.Z)({className:"".concat(n&&u.Z.absCenter," ").concat(i()(e))},o),{},{children:(0,s.jsx)("i",{className:"fa-solid fa-spinner fa-spin-pulse fa-2xl"})}))};d.defaultProps={className:"",isCenterAbsolute:!0},e.Z=c.memo(d)},1590:function(t,e,n){"use strict";n.d(e,{N:function(){return i}});var r=n(2791),a=n(7187),o=n(2646),i=function(){var t=r.useCallback((function(t,e){return!!t.type.match(e)}),[]);return{readData:r.useCallback((function(t){var e=t.files,n=t.callbackSetData,r=t.callbackHandleError;try{var i=e[0];if(i){var c=i.type,u=new FileReader;u.addEventListener("load",(function(){var t=u.result,e="";c.match("application/json")?(0,a.V)(t)&&(e=t):e=c.match("text/tab-separated-values")||c.match("text/tsv")?JSON.stringify(o.tJ3(t)):c.match("text/comma-separated-values")||c.match("text/csv")?JSON.stringify(o.ueB(t)):t,n(e,i)})),u.removeEventListener("load",(function(){return null})),u.readAsText(i)}}catch(s){"function"===typeof r&&r(s)}}),[]),handleValidateAcceptType:t}}},7852:function(t,e,n){"use strict";var r=n(9439),a=n(2791),o=function(){var t=window;return{width:t.innerWidth,height:t.innerHeight}};e.Z=function(){var t=(0,a.useState)(o()),e=(0,r.Z)(t,2),n=e[0],i=e[1];return(0,a.useEffect)((function(){function t(){i(o())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}},7478:function(t,e,n){"use strict";n.r(e),n.d(e,{DataResourceChart:function(){return Dt},default:function(){return It},getDataResourceState:function(){return ft},useDataResourceStore:function(){return dt}});var r=n(1020),a=n(2791),o=n(6415),i=n(9439),c=function(t,e){var n=function(n){var r,a;"function"!==typeof(null===t||void 0===t||null===(r=t.current)||void 0===r?void 0:r.contains)||null!==t&&void 0!==t&&null!==(a=t.current)&&void 0!==a&&a.contains(n.target)||"function"===typeof e&&e()};a.useEffect((function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[t,e])},u={toggleVisible:"style_toggleVisible__a7FjK",toggleDisabled:"style_toggleDisabled__+SL-0"},s=n(184),l=function(t){var e=t.options,n=t.onSelectOption,r=t.defaultSelected,o=t.dropdownContainerClassName,l=a.useState(!1),d=(0,i.Z)(l,2),f=d[0],p=d[1],v=a.useRef(null);return c(v,(function(){f&&p(!1)})),(0,s.jsx)("div",{ref:v,className:"dropdown-container w-fit mb-4 ".concat(o),children:(0,s.jsxs)("div",{className:"flex border-none relative cursor-pointer items-center pl-2 h-10 min-w-[150px] text-white bg-blue-500 font-normal capitalize w-fit ".concat(u.dropdown),onClick:function(){return p(!f)},children:[r,f&&(0,s.jsx)("div",{className:"dropdown-menu absolute top-[100%] left-0 w-[100%] z-10",children:e.map((function(t){var e=t.id,r=t.value,a=t.label;return(0,s.jsx)("div",{className:"flex pl-2 border-t-orange-100 items-center h-10 min-w-[150px] text-white bg-blue-500 font-medium capitalize w-fit hover:bg-blue-600 hover:font-medium border-solid border-t-[0.5px]",onClick:function(){n(r)},children:a},e)}))}),(0,s.jsx)("div",{className:"".concat(u.toggle," ").concat(f?u.toggleVisible:u.toggleDisabled)})]})})};l.defaultProps={dropdownContainerClassName:""};var d=a.memo(l),f=n(3433),p=function(t){var e=t.options,n=t.title,r=t.dropdownBoxContainerClassName,o=t.selected,l=t.setSelected,d=a.useState(!1),p=(0,i.Z)(d,2),v=p[0],h=p[1],m=a.useRef(null);return c(m,(function(){v&&h(!1)})),(0,s.jsx)("div",{ref:m,className:"dropdownBox-container w-fit ".concat(r),children:(0,s.jsxs)("div",{className:"flex border-none relative cursor-pointer items-center h-10 min-w-[150px] text-white bg-blue-500 font-normal capitalize w-fit ".concat(u.dropdownBox),children:[(0,s.jsx)("div",{className:"absolute left-1 right-4 top-0 h-[100%] flex items-center",onClick:function(){return h(!v)},children:(0,s.jsx)("div",{className:"text-sm",children:n})}),v&&(0,s.jsx)("div",{className:"dropdownBox-menu absolute top-[100%] left-0 w-[100%] z-10 max-h-[200px] overflow-y-scroll bg-blue-500",children:e.map((function(t){var e=t.id,n=t.label,r=o.findIndex((function(t){return t.id===e}))>-1,a=r?o.filter((function(t){return t.id!==e})):[].concat((0,f.Z)(o),[t]);return(0,s.jsxs)("div",{className:"grid gap-1 items-center min-h-[40px] min-w-[150px] border-t-orange-100 p-1 hover:bg-blue-600 border-solid border-t-[0.5px] w-fit",style:{gridTemplateColumns:"20px fit-content(100%)"},onClick:function(){return l(a)},children:[(0,s.jsx)("i",{className:"fa-regular ".concat(r?"fa-square-check":"fa-square"," ")}),(0,s.jsx)("div",{className:"text-sm text-white hove'r:font-medium capitalize",children:n})]},e)}))}),(0,s.jsx)("div",{className:"".concat(u.toggle," ").concat(v?u.toggleVisible:u.toggleDisabled)})]})})};p.defaultProps={dropdownBoxContainerClassName:""};var v=a.memo(p),h=d,m=n(4165),x=n(5861),g=n(1413),b=n(4925),y=n(1694),w=n.n(y),Z={inputContainer:"Input_styles_inputContainer__6sxZr"},k=["onChangeInput"],j="w-fit border-solid border-gray-500 border-[0.5px] focus:border-blue-500 block outline-none h-10 rounded text-black font-normal text-sm w-[100%] py-2 px-3",N=function(t){var e=t.label,n=t.isRequired,o=t.type,i=t.optionProps,c=t.renderInputComponent,u=a.useCallback((function(){switch(o){case"input":return(0,s.jsx)("input",(0,g.Z)({className:"w".concat(j," ").concat(w()(Z.input||"")),maxLength:32},i));case"input-number":var t=i,e=t.onChangeInput,n=(0,b.Z)(t,k),a=/^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)$/;return(0,s.jsx)("input",(0,g.Z)({className:"".concat(j," ").concat(w()(Z.input||"")),maxLength:32,onChange:function(t){t.preventDefault();var n=t.target.value;(""===n||a.test(n))&&e(t,n)}},n));case"file":return(0,s.jsx)(r.Z,(0,g.Z)({},i));case"read-only":var u=i.value;return(0,s.jsx)("div",{className:"opacity-50 cursor-not-allowed",children:u});case"input-dropdown":var l=i,d=l.dropdownBoxProps,f=l.selected,p=l.handleSaveSelected,h=l.dropdownValue,m=f.length>0;return(0,s.jsxs)("div",{className:"grid items-center gap-4",style:{gridTemplateColumns:"1fr min-content ".concat(m?"min-content":""," ")},children:[(0,s.jsx)("div",{className:"flex items-center overflow-scroll ".concat(j),children:h}),m&&(0,s.jsx)(r.Z,{title:"Save",onClick:p}),(0,s.jsx)(v,(0,g.Z)({},d))]});default:if("function"===typeof c)return c()}}),[t]);return(0,s.jsxs)("div",{className:"grid ".concat(Z.inputContainer," mb-4"),children:[(0,s.jsxs)("div",{className:"flex items-center black font-medium text-sm ".concat(Z.inputLabel),children:[(0,s.jsx)("span",{className:"".concat(n?"opacity-100":"opacity-0"," text-red-500"),children:"*"}),e]}),u()]})};N.defaultProps={isRequired:!1,type:"input",optionProps:null,renderInputComponent:void 0};var S,C,D=a.memo(N),I=n(5671),L=n(3144);var E=new WeakMap,R=new WeakMap,M=new WeakMap,P=new WeakMap,B=new WeakMap;var F={get:function(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return R.get(t);if("objectStoreNames"===e)return t.objectStoreNames||M.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return U(t[e])},set:function(t,e,n){return t[e]=n,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function A(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(C||(C=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(V(this),n),U(E.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return U(t.apply(V(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=t.call.apply(t,[V(this),e].concat(r));return M.set(o,e.sort?e.sort():[e]),U(o)}}function O(t){return"function"===typeof t?A(t):(t instanceof IDBTransaction&&function(t){if(!R.has(t)){var e=new Promise((function(e,n){var r=function(){t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=function(){e(),r()},o=function(){n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)}));R.set(t,e)}}(t),e=t,(S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(t){return e instanceof t}))?new Proxy(t,F):t);var e}function U(t){if(t instanceof IDBRequest)return function(t){var e=new Promise((function(e,n){var r=function(){t.removeEventListener("success",a),t.removeEventListener("error",o)},a=function(){e(U(t.result)),r()},o=function(){n(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",o)}));return e.then((function(e){e instanceof IDBCursor&&E.set(e,t)})).catch((function(){})),B.set(e,t),e}(t);if(P.has(t))return P.get(t);var e=O(t);return e!==t&&(P.set(t,e),B.set(e,t)),e}var V=function(t){return B.get(t)};function z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,o=n.blocking,i=n.terminated,c=indexedDB.open(t,e),u=U(c);return a&&c.addEventListener("upgradeneeded",(function(t){a(U(c.result),t.oldVersion,t.newVersion,U(c.transaction))})),r&&c.addEventListener("blocked",(function(){return r()})),u.then((function(t){i&&t.addEventListener("close",(function(){return i()})),o&&t.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),u}var T=["get","getKey","getAll","getAllKeys","count"],G=["put","add","delete","clear"],_=new Map;function K(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"===typeof e){if(_.get(e))return _.get(e);var n=e.replace(/FromIndex$/,""),r=e!==n,a=G.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||T.includes(n))){var o=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){var o,i,c,u,s,l,d=arguments;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=this.transaction(e,a?"readwrite":"readonly"),c=i.store,u=d.length,s=new Array(u>1?u-1:0),l=1;l<u;l++)s[l-1]=d[l];return r&&(c=c.index(s.shift())),t.next=6,Promise.all([(o=c)[n].apply(o,s),a&&i.done]);case 6:return t.abrupt("return",t.sent[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();return _.set(e,o),o}}}F=function(t){return(0,g.Z)((0,g.Z)({},t),{},{get:function(e,n,r){return K(e,n)||t.get(e,n,r)},has:function(e,n){return!!K(e,n)||t.has(e,n)}})}(F);var W=function(){function t(e){(0,I.Z)(this,t),this.database=void 0,this.db=void 0,this.database=e}return(0,L.Z)(t,[{key:"createObjectStore",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(this.database,1,{upgrade:function(t){e.forEach((function(e){t.objectStoreNames.contains(e)||t.createObjectStore(e,{autoIncrement:!0,keyPath:"id"})}))}});case 2:return this.db=t.sent,t.abrupt("return",this);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRecord",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n){var r,a,o,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db,a=r.transaction(e,"readonly"),o=a.objectStore(e),t.next=5,o.get(n);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getAllRecord",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){var n,r,a,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.db,r=n.transaction(e,"readonly"),a=r.objectStore(e),t.next=5,a.getAll();case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0=[];case 8:return o=t.t0,t.abrupt("return",o.sort((function(t,e){return e.id-t.id})));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addRecord",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n){var r,a,o,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db,a=r.transaction(e,"readwrite"),o=a.objectStore(e),t.next=5,o.add(n);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"addRecordByKey",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n,r){var a,o,i,c;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.db,o=a.transaction(e,"readwrite"),i=o.objectStore(e),t.next=5,i.add(n,r);case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"putBulkRecord",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n){var r,a,o,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db,a=r.transaction(e,"readwrite"),o=a.objectStore(e),i=n.map((function(t){return o.add(t)})),t.next=6,Promise.all(i);case 6:return t.abrupt("return",this.getAllRecord(e));case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateByKey",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n){var r,a,o,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db,a=r.transaction(e,"readwrite"),o=a.objectStore(e),t.next=5,o.put(n);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteRecord",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n){var r,a,o,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db,a=r.transaction(e,"readwrite"),o=a.objectStore(e),t.next=5,o.get(n);case 5:if(i=t.sent){t.next=8;break}return t.abrupt("return",i);case 8:return t.next=10,o.delete(n);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"clearTable",value:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){var n,r,a,o;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.db,r=n.transaction(e,"readwrite"),a=r.objectStore(e),t.next=5,a.clear();case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),J=W,Y="chart",q="presale-poc-database-".concat(Y),H=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(){var e,n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new J(q),n=[Y],t.next=4,e.createObjectStore(n);case 4:return e=t.sent,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H();case 2:return n=t.sent,t.next=5,n.addRecord(Y,e);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H();case 2:return n=t.sent,t.next=5,n.getRecord(Y,e);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(){var e,n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H();case 2:return e=t.sent,t.next=5,e.getAllRecord(Y);case 5:return n=t.sent,t.abrupt("return",n||[]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),tt=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(){var e;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H();case 2:return e=t.sent,t.abrupt("return",e.clearTable(Y));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),et=n(1590),nt=n(298),rt=n.n(nt),at=n(6364),ot=n.n(at),it=n(4942),ct=n(1113),ut={option:"sankey",sankey:void 0,bubble:void 0,hexbin:void 0,tiles:void 0,hierachy:void 0,toggleExample:!1,chartName:"",resources:[]},st=(0,ct.D)((function(t,e){return(0,g.Z)((0,g.Z)({},ut),{},{actionSetOption:function(e){return t({option:e})},actionSetChartId:function(n){var r=e().option;t((0,it.Z)({},r,n))},actionToggleExample:function(){return t({toggleExample:!e().toggleExample})},actionSetChartName:function(e){return t({chartName:e})},actionSetResource:function(e){return t({resources:e})},actionChartData:function(e,n){return t((0,it.Z)({},n,e))}})}),"StoreDataResource"),lt=(0,i.Z)(st,2),dt=lt[0],ft=lt[1].getState,pt=n(7187),vt=function(){var t=dt(),e=t.resources,n=t.actionSetResource,r=ft().option,a=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e){var a,o,i,c;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.type,o=void 0===a?r:a,t.prev=1,t.next=4,Q();case 4:i=t.sent,c=i.filter((function(t){return t.type===o})),n(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),tt();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return{resources:e,actionSetResource:n,handleGetCharts:a}},ht=function(t){var e=t.type,n=a.useState(null),r=(0,i.Z)(n,2),o=r[0],c=r[1],u=a.useState(!0),s=(0,i.Z)(u,2),l=s[0],d=s[1],f=ft(),p=dt().actionChartData,v=f[e||f.option],h=a.useCallback((0,x.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!rt()(v)){t.next=6;break}return t.next=4,X(v);case 4:(n=t.sent)&&n.id&&(0,pt.V)(n.data)&&c(n);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),p(void 0,e||f.option);case 11:d(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),[v]);return a.useEffect((function(){h()}),[]),{data:o,isLoading:l,chartId:v}},mt=function(){var t=dt(),e=t.option,n=t.actionSetChartId,c=a.useState([]),u=(0,i.Z)(c,2),l=u[0],d=u[1],p=a.useState(!1),v=(0,i.Z)(p,2),h=v[0],b=v[1],y=a.useMemo((function(){switch(e){case"sankey":case"bubble":return ot()(l)}}),[l,e]),w=a.useMemo((function(){var t;return(null===(t=l.find((function(t){return"name"===t.key})))||void 0===t?void 0:t.value)||""}),[l]),Z=(0,et.N)().readData,k=(0,o.aE)().setVisibleModal,j=vt().handleGetCharts,N=a.useCallback((function(t){var e=(0,f.Z)(l);t.forEach((function(t){var n=t.key,r=t.value,a=e.findIndex((function(t){return t.key===n}));e=a>-1?(0,f.Z)(e).map((function(t){return t.key===n?(0,g.Z)((0,g.Z)({},t),{},{value:r}):t})):[].concat((0,f.Z)(e),[{key:n,value:r}])})),d(e)}),[l]),S=a.useCallback((function(){switch(e){case"sankey":case"bubble":var t=l.find((function(t){return"name"===t.key})),n=(null===t||void 0===t?void 0:t.value)||"Upload file";return(0,s.jsx)(D,{label:"Data",type:"file",isRequired:!0,optionProps:{title:n,useToUploadFile:!0,onHandleUploadFile:function(t){t.preventDefault();var n=t.target.files;n&&Z({files:n,callbackSetData:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N([{key:"name",value:r.name},{key:e,value:n}]);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}}});case"hexbin":var r=l.find((function(t){return"geometryFileName"===t.key})),a=(null===r||void 0===r?void 0:r.value)||"Upload *.json, *.geojson",o=l.find((function(t){return"name"===t.key})),i=(null===o||void 0===o?void 0:o.value)||"Upload *.csv";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D,{label:"Geometry",type:"file",isRequired:!0,optionProps:{title:a,useToUploadFile:!0,onHandleUploadFile:function(t){t.preventDefault();var e=t.target.files;e&&Z({files:e,callbackSetData:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(e,n){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N([{key:"geometry",value:e},{key:"geometryFileName",value:n.name}]);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}}}),(0,s.jsx)(D,{label:"Points",type:"file",isRequired:!0,optionProps:{title:i,useToUploadFile:!0,onHandleUploadFile:function(t){t.preventDefault();var n=t.target.files;n&&Z({files:n,callbackSetData:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N([{key:e,value:n},{key:"name",value:r.name}]);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}}})]})}}),[e,l]),C=a.useCallback((0,x.Z)((0,m.Z)().mark((function t(){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h){t.next=2;break}return t.abrupt("return");case 2:return b(!0),t.next=5,$({data:JSON.stringify(l),type:e,name:w});case 5:r=t.sent,rt()(r)&&(n(r),k({isVisible:!1}),j({})),b(!1);case 8:case"end":return t.stop()}}),t)}))),[l,e,h,j]);return(0,s.jsx)(o.hz,{children:(0,s.jsxs)("div",{className:"form",children:[(0,s.jsx)(D,{label:"Name",isRequired:!0,type:"input",optionProps:{value:w,onChange:function(t){return N([{key:"name",value:t.target.value}])}}}),S(),(0,s.jsx)(r.Z,{title:h?"Saving...":"Save",onClick:C,isDisabled:y,className:"ml-auto"})]})})},xt=a.memo(mt),gt=function(){var t=vt(),e=t.resources,n=t.actionSetResource,r=t.handleGetCharts,o=dt().actionSetChartId,i=ht({}).chartId;return a.useEffect((function(){return r({}),function(){n([])}}),[]),(0,s.jsx)("div",{children:e.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 text-white font-medium text-lg bg-gray-500 h-10 items-center",children:[(0,s.jsx)("div",{children:"ID"}),(0,s.jsx)("div",{children:"Name"}),(0,s.jsx)("div",{children:"Status"})]}),e.map((function(t){return(0,s.jsxs)("div",{className:"grid grid-cols-3 cursor-pointer font-medium h-10 items-center text-base hover:bg-gray-50 hover:font-medium hover:text-black hover:border-t-[0.5px] hover:border-t-transparent border-solid border-t-[0.5px] border-t-gray-300",onClick:function(){return o(t.id)},children:[(0,s.jsx)("div",{children:t.id}),(0,s.jsx)("div",{children:t.name}),(0,s.jsx)("div",{children:i===t.id&&"Actived"})]},t.id)}))]})})},bt=a.memo(gt),yt=["sankey","bubble","hexbin","tiles","hierachy"],wt=function(){var t=(0,o.aE)().setVisibleModal,e=dt(),n=e.option,i=e.actionSetChartName,c=e.actionSetOption,u=vt().handleGetCharts,l=a.useMemo((function(){return yt.map((function(t){return{id:t,value:t,label:t}}))}),[]);return(0,s.jsxs)("div",{className:"bg-transparent text-white",children:[(0,s.jsx)(h,{defaultSelected:n,onSelectOption:function(t){var e=t;c(e),i(""),u({type:e})},options:l}),(0,s.jsx)(r.Z,{title:"+ New data resource",onClick:function(){return t({isVisible:!0,content:(0,s.jsx)(xt,{})})},className:"mb-4"}),(0,s.jsx)(bt,{})]})},Zt=a.memo(wt),kt=n(1017),jt=n(6611),Nt=n(30),St=n(4899),Ct=function(t){var e=t.type,n=ht({type:e}),r=n.data;if(n.isLoading)return(0,s.jsx)(kt.Z,{});if(!r)return null;var a,o,c=r.data,u=r.name,l=JSON.parse(c);switch(e){case"sankey":var d;a=jt.Z,o=JSON.parse((null===(d=l.find((function(t){return t.key===e})))||void 0===d?void 0:d.value)||"");break;case"bubble":var f;a=Nt.Z,o=JSON.parse((null===(f=l.find((function(t){return t.key===e})))||void 0===f?void 0:f.value)||"");break;case"hexbin":var p,v,h=JSON.parse(null===(p=l.find((function(t){return t.key===e})))||void 0===p?void 0:p.value)||[],m=JSON.parse(null===(v=l.find((function(t){return"geometry"===t.key})))||void 0===v?void 0:v.value)||{};o={points:h.map((function(t){return[Number(t.longitude),Number(t.latitude)]})).filter((function(t){var e=(0,i.Z)(t,2),n=e[0],r=e[1];return rt()(n)&&rt()(r)})),geojson:m},a=St.Z}return o?(0,s.jsx)(a,{data:o,chartName:u}):null},Dt=a.memo(Ct),It=Zt},7187:function(t,e,n){"use strict";n.d(e,{V:function(){return r}});var r=function(t){var e=!0;try{JSON.parse(t)}catch(n){e=!1}return e}},6364:function(t,e,n){var r=n(3654),a=n(8383),o=n(4963),i=n(3629),c=n(1473),u=n(5174),s=n(2936),l=n(9102),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(c(t)&&(i(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=a(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(s(t))return!r(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},298:function(t,e,n){var r=n(9066),a=n(3141);t.exports=function(t){return"number"==typeof t||a(t)&&"[object Number]"==r(t)}}}]);
//# sourceMappingURL=478.e3fdb842.chunk.js.map